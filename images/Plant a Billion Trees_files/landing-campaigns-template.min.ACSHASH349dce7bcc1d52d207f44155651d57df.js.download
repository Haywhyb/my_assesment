/*
 Waypoints - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
 Waypoints Inview Shortcut - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
this.TNC=this.TNC||{};
this.TNC.HighlightShare=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=a("input#show-hide-highlight-and-share").val(),d=a("input#social-channels-highlight-and-share").val();if(e&&"true"===e&&d){d=d.split(" || ");e=[];var b=[];e=e.concat(d);for(d=0;d<e.length;++d)this.isValidChannels(e[d])&&b.push(this.isValidChannels(e[d]))}ShareThis({sharers:b,selector:".cd-main-content"}).init()};f.prototype.isValidChannels=
function(a){var d={facebook:ShareThisViaFacebook,twitter:ShareThisViaTwitter,linkedin:ShareThisViaLinkedIn};return d[a]?d[a]:!1};return f}())}($);this.TNC=this.TNC||{};
this.TNC.SocialShare=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;var f=function(){function e(d,b){var c={stickTo:window};this.allowedPaths=["/en-us/get-involved/how-to-help/places-we-protect/"];this.element=d;this.$element=a(d);this.$placeholder=a("\x3cdiv\x3e\x3c/div\x3e");d=this.$element.data();this.settings=a.extend({},c,d,b);this.initialize()}e.prototype.initialize=function(){this.$element.removeClass("social-share--sticky");this.isSticky=!1;this.initTop=this.$element.offset().top;
this.$stickTo=a(this.settings.stickTo);this.bindEvents();this.decide()};e.prototype.stick=function(){this.$placeholder.css({height:this.$element.outerHeight()+"px"});this.$element.addClass("social-share--sticky").after(this.$placeholder);if(this.$stickTo.length&&this.settings.stickTo!==window){var d=a(this.$stickTo).get(0).getBoundingClientRect().bottom;this.$element.css({top:d})}this.isSticky=!0};e.prototype.unstick=function(){this.$placeholder.remove();this.$element.removeClass("social-share--sticky").css({top:""});
this.isSticky=!1};e.prototype.decide=function(){window.scrollY>=this.initTop&&!this.isSticky?this.stick():window.scrollY<this.initTop&&this.isSticky&&this.unstick()};e.prototype.sanitize=function(a){var b="";a=a.split("\x26");for(var c=0;c<a.length;c++)if(a[c].includes("wcmmode"))a.splice(c,1);else{for(var g=a[c].split("\x3d"),d=0;d<g.length;d++){var k=decodeURIComponent(g[d]);k=k.replace(/\s/g,"+");g[d]=k.replace(/[^a-zA-Z0-9+_\-,\s]/g,"")}a[c]=g.join("\x3d")}0<a.length&&(b="?"+a.join("\x26"));return encodeURIComponent(b)};
e.prototype.bindEvents=function(){var d=this;a(window).scroll(function(){d.decide()});a(".social-share__icon a").on("click",function(b){var c=a(b.target);c.is("a")||(c=a(b.target.closest("a")));b=c.attr("href");for(var g=b.substring(b.indexOf("?")+1),d=0;d<this.allowedPaths.length;d++){var k=this.allowedPaths[d];if(g.includes(k)&&""!==window.location.search&&!b.startsWith("https://www.linkedin.com")){var e=k+this.sanitize(window.location.search);if(!g.includes(e)){c.attr("href",b.replace(k,e));break}}}c=
{event_name:"social_share",social_share_id:window.location.hostname+".share."+c.data("platform"),social_share_platform:c.data("platform")};try{utag.link(c)}catch(l){}}.bind(this));a(".social-share__language-selector a").on("click",function(b){b={event_name:"language_toggle",selected_language:a(b.target).text()};try{utag.link(b)}catch(c){}})};return e}();a.fn.socialShare=function(a){return this.each(function(){return new f(this,a)})};a(function(){a(".social-share").socialShare()});return a.fn.socialShare}($);
this.TNC=this.TNC||{};
this.TNC.FeaturedContent=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;var f={featured_cta:function(a,b){return{event_name:"feature_cta_click",feature_button_type:b,feature_type:a}}},e=function(){return function(d){var b=d.querySelector(".c-featured-content__button.btn-primary");a(b).on("click",function(c){var b=d.querySelector(".c-featured-content__label");b=a(b).data("featuretype");utag.link(f.featured_cta(b,a(c.currentTarget).hasClass("btn-primary")?"primary":"none"))});b=d.querySelector(".c-featured-content__button.btn-secondary");
a(b).on("click",function(c){var b=d.querySelector(".c-featured-content__label");b=a(b).data("featuretype");utag.link(f.featured_cta(b,a(c.currentTarget).hasClass("btn-secondary")?"secondary":"none"))})}}();return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){Array.from(document.querySelectorAll(".c-featured-content")).forEach(function(a){new e(a)})};return a}())}($);this.TNC=this.TNC||{};
this.TNC.FullWidthPhotoCta=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;this.rerenderComponent();a(window).resize(function(){e.rerenderComponent()})};f.prototype.rerenderComponent=function(){setTimeout(function(){a(".c-full-width-button").length&&(100<a(".c-full-width-button").closest(".c-feature-one-column-with-image").find(".c-full-width-btn-container").height()?(a(".c-full-width-button").addClass("c-rm-margin"),
a(".c-full-width-button-primary").addClass("c-rm-margin")):(a(".c-full-width-button").removeClass("c-rm-margin"),a(".c-full-width-button-primary").removeClass("c-rm-margin")))},100)};return f}())}($);this.TNC=this.TNC||{};
this.TNC.ImageTextExpansion=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;var f=function(){return function(e){Array.from(e.querySelectorAll(".c-image-text-expansion__button")).forEach(function(d){a(d).on("click",function(b){var c=e.querySelector(".c-image-text-expansion__text");a(b.currentTarget).hasClass("c-image-text-expansion__button--collapse")?(c.style.paddingTop="0",c.style.paddingBottom="0",a(c).toggleClass("c-image-text-expansion__text--expanded"),a(e)[0].scrollIntoView({behavior:"smooth",
block:"start"})):(b=c.offsetTop,c.style.paddingTop=b.toString()+"px",c.style.paddingBottom=b.toString()+"px",a(c).toggleClass("c-image-text-expansion__text--expanded"))})})}}();return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){Array.from(document.querySelectorAll(".c-image-text-expansion")).forEach(function(a){new f(a)})};return a}())}($);this.TNC=this.TNC||{};
this.TNC.Image=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};this.TNC.InPageNavigation=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};this.TNC.PreserveContact=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.PreserveOverviewDetail=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){a(".print-modal").on("click",this.printPreserveAnalytics.bind(this));this.handleMapError();for(var d=[a(".c-preserve-overview__heading-highlights"),a(".c-preserve-overview__heading-hours")],b=0;b<d.length;b++)if(0<d[b].length){var c=d[b].next(),g=c.text();c.text(this.sanitizeDetailText(g))}};
e.prototype.printPreserveAnalytics=function(){f.setAnalyticsByPage({event_name:"print_directions",event_action:"Preserve Overview Details"},!0)};e.prototype.sanitizeDetailText=function(a){return a.replace(/(<([^>]+)>)/gi,"")};e.prototype.handleMapError=function(){function d(b){var c=b.src;a.get(c).then(function(){b.src="";b.src=c})["catch"](function(){a(b).remove()})}a(".c-preserve-overview__map").each(function(b,c){if(c.complete)0===c.naturalWidth&&0===c.naturalHeight&&d(c);else a(c).one("error",
function(){d(c)})})};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};this.TNC.ResourceListing=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.YoutubeVideo=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(a){this.options=a;this.initialize()}f.prototype.initialize=function(){this.settings=a.extend(!0,{},{milestones:[50],pollingTime:100},this.options);a('iframe[src*\x3d"youtube.com"]').video(this.settings)};return f}())}($);this.TNC=this.TNC||{};
this.TNC.Accordion=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.resizeTimeout=null;this.initialize()}f.prototype.initialize=function(){var e=this;a(".c-accordian__item").on("click",function(a){e.toggleHandler(a)});this.calculateVirtualHeight();a(window).resize(this.calculateVirtualHeight.bind(this,!0))};f.prototype.toggleHandler=function(e){var d=a(e.target).data("toggleContent"),b=a("#"+d);b.hasClass("is-visible")?(b.on("transitionend",this.removeClasses.bind(this,
e,b,d)),b.css("max-height","1px")):(b.css("max-height",b.data("virtualHeight")),b.on("transitionend",this.addClasses.bind(this,e,b,d)))};f.prototype.calculateVirtualHeight=function(e){this.resizeTimeout&&clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){var d=a('\x3cdiv class\x3d"c-accordian-virtual"\x3e\x3c/div\x3e');a(document.body).append(d);a(".c-accordian__item .toggle-content-acc").each(function(b,c){b=a(c);c=a("\x3cdiv/\x3e").html(b.html());c=a("\x3cli/\x3e").addClass("c-accordian__item").css("width",
b.width()).append(c);c=a("\x3cul/\x3e").addClass("c-accordian").append(c);d.empty().append(c);c=d.height()+6;b.data("virtualHeight",c);!0===e&&b.hasClass("is-visible")&&b.css("max-height",c)});d.empty()},300)};f.prototype.removeClasses=function(e,d,b){var c=a(e.target).data("expandText");d.off("transitionend");d.removeClass("is-visible");a('[data-toggle-content\x3d"'+b+'"]').removeClass("is-visible");a(e.target).attr("title",c)};f.prototype.addClasses=function(e,d,b){var c=a(e.target).data("collapseText");
d.off("transitionend");d.addClass("is-visible");a('[data-toggle-content\x3d"'+b+'"]').addClass("is-visible");a(e.target).attr("title",c)};return f}())}($);this.TNC=this.TNC||{};
this.TNC.BasicTextBlock=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;this.toggleMore=a(".toggle-basic-text-more");this.toggleLess=a(".toggle-basic-text-less");this.toggleMore.on("click",function(a){return e.toggleView(a)});this.toggleLess.on("click",function(a){return e.toggleView(a)})};f.prototype.toggleView=function(e){e=a(e.target).attr("data-componentuniqueid");var d=a(".toggle-content").closest('[data-componentuniqueid\x3d"'+
e+'"]'),b=a(".toggle-basic-text-less").closest('[data-componentuniqueid\x3d"'+e+'"]'),c=a(".toggle-basic-text-more").closest('[data-componentuniqueid\x3d"'+e+'"]');c.hasClass("toggle-on")?(d.css("display","none").css("height","0"),c.removeClass("toggle-on").css("display","block"),b.css("display","none"),a("html, body").animate({scrollTop:a("#"+e).offset().top},1E3)):(d.css("display","block").css("height","auto"),c.addClass("toggle-on").css("display","none"),b.css("display","block"));return!1};return f}())}($);
this.TNC=this.TNC||{};
this.TNC.ConnectCallout=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;this.toggle=a(".c-connect-callout .toggle");this.toggle.on("click",function(a){e.toggleView(a)});a(window).on("resize",function(){a(".c-connect-callout").find(".toggle-content").length&&(a(window).innerHeight()<a(window).innerWidth()?a(".c-connect-callout").find(".toggle-content").css("height","auto").end().find(".toggle.toggle-on").addClass("toggle-on-orientation"):a(".toggle-on-orientation").length&&
a(".c-connect-callout").end().find(".toggle.toggle-on.toggle-on-orientation").removeClass("toggle-on-orientation"))})};f.prototype.toggleView=function(e){var d=a(e.target);e=a(e.target).attr("data-componentuniqueid");e=a("#"+e).find(".toggle-content");var b=a(e).find(".c-connect-callout__item").hasClass("c-connect-callout__email"),c=a(e).find(".c-connect-callout__item").hasClass("c-connect-callout__phone");d.hasClass("toggle-on")?(e.css("display","block").css("height","0"),d.removeClass("toggle-on")):
(b&&c?e.css("display","block").css("height","150px"):b||c?e.css("display","block").css("height","95px"):e.css("display","block").css("height","55px"),d.addClass("toggle-on fz-v7-after"))};return f}())}($);this.TNC=this.TNC||{};
this.TNC.RelatedArticles=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.fiveUpWrapper=".c-5-up__marker";this.timer=null;this.flag=!0;a(window).on("load",function(){a(window).trigger("resize")});this.initialize()}e.prototype.initialize=function(){var d=this;this.fiveUpWrapper.length&&(this.fiveUpCards=a(".five-up-cards").length,this.checkCharCount(this.fiveUpCards));a(".r2a-normal .c-cards-articles__card, .r2a-normal .c-cards-articles__card-5-up, .r2a-normal.c-text-asset__marker a").on("click",
this.relatedStoryClick.bind(this));a(window).on("resize",function(){1023<a(window).width()?(clearTimeout(d.timer),d.timer=setTimeout(function(){d.adjustHeight()},100)):a(".c-5up-container-manual").find(".c-5up-featured-image").height("auto")})};e.prototype.checkCharCount=function(d){for(var b=[],c=[],g=[],h=[],k=0;k<=d;k++)b[k]=a(".five-up-cards").find(".c-cards-articles__title").eq(k),h[k]=a.trim(b[k].text()),c[k]=a.trim(b[k].text()).length,82<=c[k]&&(g[k]=h[k].slice(0,82),b[k].text(g[k]).append("..."))};
e.prototype.relatedStoryClick=function(d){var b="undefined"!==typeof utag_data?utag_data.page_name:"";d=a(d.currentTarget).find(".c-cards-articles__title, .c-cards-articles__title-text-asset").text().trim();b="undefined"!==typeof utag_data?b:"";d="undefined"===typeof d||null===d?"":d;f.setAnalyticsByPage({event_name:"related_story_click",event_action:"clicked from "+b,event_category:"clicked to "+d,related_story_title:d},!0)};e.prototype.adjustHeight=function(){function d(a){var c=a.find(".c-5up-right-cards").eq(0).height(),
b=parseInt(a.find(".c-articles__separator").eq(1).css("margin-top"),10);c=3*c+2*b;a.find(".c-5up-featured-image").height(c)}var b=this;a(".c-5up-container-manual").each(function(c,g){var h=0;c=a(g).find(".c-5up-right-cards").find("img");b.flag?(b.flag=!1,c.each(function(c,b){a("\x3cimg\x3e").on("load",function(){h++;3===h&&d(a(g))}).attr("src",a(b).attr("src"))})):d(a(g))})};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.RelatedArticlesAuto=function(a,f,e,d){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;d=d&&d.hasOwnProperty("default")?d["default"]:d;return new (function(){function b(){this.componentWrapper=".c-parsely";this.articleCardContainer=".articles-auto";this.threeUpContainer=".three-up-container";this.fourUpContainer=".four-up-container";this.fiveUpContainerFeatured=".five-up-container-featured";this.fiveUpContainer=
".five-up-container";this.textAssetContainer=".text-asset-container";this.errorContainer=".articles-auto-err";this.authorContainer=".c-related-article-author";this.browserLocale="";this.geoResponse=null;this.usrStateCountryName="";this.timer=null;this.flag=!0;a(this.componentWrapper).length&&(a(window).on("load",function(){a(window).trigger("resize")}),this.initialize())}b.prototype.initialize=function(){var c=this;this.eventHandlers();this.geoCountryData=a(".geoCountryHiddenData")&&0<a(".geoCountryHiddenData").length?
JSON.parse(a.trim(a(".geoCountryHiddenData").eq(0).text())):null;this.geoStateData=a(".geoStateHiddenData")&&0<a(".geoStateHiddenData").length?JSON.parse(a.trim(a(".geoStateHiddenData").eq(0).text())):null;e.checkBrowserLocale();this.getUserLocalization().then(function(){a(c.componentWrapper).find(c.articleCardContainer).length&&a(c.componentWrapper).find(c.articleCardContainer).each(function(b,d){c.getArticles(a(d))})});a(this.componentWrapper).find(this.authorContainer).length&&(this.authorCards=
a(".r2a-author-card").length,this.checkCharCount(this.authorCards))};b.prototype.getComponentId=function(a){return a.closest(this.componentWrapper).data("componentId")};b.prototype.getArticles=function(c){var b=this,h=c.data("geolocation"),k=a.trim(c.data("siteLocale")).toLowerCase().replace("-","_"),e=this.getComponentId(c);c=c.data("getArticlesApi");h&&"yes"===h&&(c=c+"\x26tag\x3d"+k,""!==this.usrStateCountryName&&(c=c+"\x26tag\x3d"+this.usrStateCountryName.toLowerCase()));h={url:c,dataType:"jsonp"};
window.textAssestFlag&&delete h.dataType;d.initXHR(h).then(function(a){return b.renderArticles(a,e)})["catch"](function(c,g){a("#"+e).closest(b.componentWrapper).find(b.articleCardContainer).addClass("hide");a("#"+e).closest(b.componentWrapper).find(b.errorContainer).removeClass("hide");throw Error(g);})};b.prototype.adjustHeight=function(){function c(a){var c=a.find(".c-5up-right-cards").eq(0).height(),b=parseInt(a.find(".c-articles__separator").eq(1).css("margin-top"),10);c=3*c+2*b;a.find(".c-5up-featured-image").height(c)}
var b=this;a(".c-parsely").each(function(g,d){var h=0;g=a(d).find(".c-5up-right-cards").find("img");b.flag?(b.flag=!1,g.each(function(b,g){a("\x3cimg\x3e").on("load",function(){h++;3===h&&c(a(d))}).attr("src",a(g).attr("src"))})):c(a(d))})};b.prototype.renderArticles=function(c,b){function g(a){var c=document.createElement("a");c.href=a;c.search="";return c.href.replace(/(^\w+:|^)\/\/[^/]+/,"").replace(/\.html$/,"/").replace(/([^/])$/,"$1/")}for(var d=0;d<c.data.length;d++){var e=g(c.data[d].link),
f=g(window.location.href),p=e.split("/");for(f=f.split("/");f.length>p.length;)f.shift();f=f.join("/");e===f&&c.data.splice(d,1)}b=a("#"+b).closest(this.articleCardContainer);if(c.data.length&&c.success){for(d=0;d<c.data.length;d++)c.data[d].metadata=JSON.parse(c.data[d].metadata);b.find(this.errorContainer).addClass("hide");b.removeClass("hide");d=b.data("variation");"three-up-auto"===d?(d=c.data.splice(0,3),c=Handlebars.compile(this.threeUpTemplate()),c=c(d),b.find(this.threeUpContainer).html(c)):
"four-up-auto"===d?(e=c.data.splice(0,1),d=c.data.splice(0,3),e=Handlebars.compile(this.fourUpFeaturedTemplate())(e),c=Handlebars.compile(this.threeUpTemplate()),c=c(d),b.find(this.fourUpContainer).html(e),b.find(this.fourUpContainer).append(c)):"five-up-auto"===d?(b.addClass("hide"),e=c.data.splice(0,1),d=c.data.splice(0,4),e=Handlebars.compile(this.fiveUpFeaturedTemplate())(e),c=Handlebars.compile(this.fiveUpTemplate()),c=c(d),b.find(this.fiveUpContainerFeatured).html(e),b.find(this.fiveUpContainer).html(c),
this.totalCards=b.find(".c-cards-articles__card-5-up").length,this.checkCharCount(this.totalCards),b.removeClass("hide")):"text-asset-auto"===d&&(d=c.data.splice(0,3),c=Handlebars.compile(this.textAssetTemplate()),c=c(d),b.find(this.textAssetContainer).html(c))}else b.addClass("hide"),b.find(this.errorContainer).removeClass("hide")};b.prototype.checkCharCount=function(c){var b=[],d=[],k=[],e=[],f=[],p=[],q=[];if(a(".c-related-article-author").length)for(var n=0;n<c;n++)f[n]=a(".c-related-article-author").find(".r2a-author-card__title").eq(n),
p[n]=a.trim(f[n].text()),q[n]=a.trim(f[n].text()).length,82<=q[n]&&(k[n]=p[n].slice(0,82),f[n].text(k[n]).append("..."));if(a(".five-up-container").length)for(n=0;n<c;n++)b[n]=a(".five-up-container").find(".c-cards-articles__title").eq(n),e[n]=a.trim(b[n].text()),d[n]=a.trim(b[n].text()).length,82<=d[n]&&(k[n]=e[n].slice(0,82),b[n].text(k[n]).append("..."))};b.prototype.threeUpTemplate=function(){return'{{#each this}}\n            \x3ca href\x3d"{{this.url}}" target\x3d"{{this.metadata.target}}" class\x3d"c-cards-articles__card secondary-link bs_col-4 bs_col-lg-4"\x3e\n                \x3cdiv class\x3d"c-cards-articles__card-container"\x3e\n                    {{#if this.metadata.pageImage}}\n                        \x3cpicture\x3e\n                            \x3csource srcset\x3d"{{this.metadata.pageImage.large}} 1x,\n                                    {{this.metadata.pageImage.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n                            \x3csource srcset\x3d"{{this.metadata.pageImage.medium}} 1x,\n                                    {{this.metadata.pageImage.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n                            \x3csource srcset\x3d"{{this.metadata.pageImage.small}} 1x,\n                                    {{this.metadata.pageImage.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n                            \x3cimg src\x3d"{{this.metadata.pageImage.default}}" alt\x3d"{{this.metadata.pageImageAlt}}" class\x3d"c-cards-articles__image image-position-desktop__{{this.metadata.desktopImageCrop}} image-position-mobile__{{this.metadata.mobileImageCrop}}"\x3e\n                        \x3c/picture\x3e\n                    {{else}}\n                        \x3cpicture\x3e\n                            \x3cimg src\x3d"{{this.image_url}}" alt\x3d"{{this.metadata.pageImageAlt}}" class\x3d"c-cards-articles__image" /\x3e\n                        \x3c/picture\x3e\n                    {{/if}}\n                    \x3cdiv class\x3d"c-cards-articles__content"\x3e\n                        \x3cp class\x3d"fz-v6 lhr-v3 family-sans fw-v4 c-cards-articles__label heading-label txt-clr-p2"\x3e\n                            {{this.metadata.contentTypeTag}}\n                        \x3c/p\x3e\n                        \x3ch4 class\x3d"fz-v12 lh-v15 c-cards-articles__title r2a-title"\x3e\n                            {{ this.title }}\n                        \x3c/h4\x3e\n                        \x3cp class\x3d"family-sans fz-v7 lh-v9 c-cards-articles__excerpt txt-clr-g1"\x3e\n                            {{{ this.metadata.description }}}\n                        \x3c/p\x3e\n                        \x3cp class\x3d"family-sans fw-v4 fz-v4 lh-v2 c-cards-articles__byline txt-clr-g2"\x3e\n                        {{#if metadata.primaryAuthor}}By {{ metadata.primaryAuthor }} {{/if}}\n                        {{#if this.metadata.articleDate}}\n                            {{#if metadata.primaryAuthor}}|{{/if}} {{ this.metadata.articleDate }}\n                        {{/if}}\n                        \x3c/p\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/a\x3e\n        {{/each}}'};
b.prototype.fourUpFeaturedTemplate=function(){return'{{#each this}}\n        \x3ca href\x3d"{{url}}" target\x3d"{{metadata.target}}" class\x3d"c-cards-articles__card is-featured secondary-link bs_col-4 bs_col-lg-12"\x3e\n            \x3cdiv class\x3d"c-cards-articles__card-container"\x3e\n                {{#if metadata.pageImage}}\n                {{#if metadata.pageImage.default}}\n                    \x3cpicture\x3e\n                    \x3csource srcset\x3d"{{metadata.pageImage.large}} 1x,\n                                {{metadata.pageImage.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n                    \x3csource srcset\x3d"{{metadata.pageImage.medium}} 1x,\n                                {{metadata.pageImage.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n                    \x3csource srcset\x3d"{{metadata.pageImage.small}} 1x,\n                                {{metadata.pageImage.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n                    \x3cimg src\x3d"{{metadata.pageImage.default}}" alt\x3d"{{metadata.pageImageAlt}}" class\x3d"c-34up-feature_image c-cards-articles__image image-position-desktop__{{metadata.desktopImageCrop}} image-position-mobile__{{metadata.mobileImageCrop}}"\x3e\n                    \x3c/picture\x3e\n                {{else}}\n                    \x3cpicture\x3e\n                    \x3cimg src\x3d"{{image_url}}" alt\x3d"{{metadata.pageImageAlt}}" class\x3d"c-34up-feature_image c-cards-articles__image" /\x3e\n                    \x3c/picture\x3e\n                {{/if}}\n                {{/if}}\n                \x3cdiv class\x3d"c-cards-articles__content"\x3e\n                \x3cdiv\x3e\n                    \x3cp class\x3d"fz-v6 lhr-v3 family-sans fw-v4 c-cards-articles__label heading-label txt-clr-p2"\x3e\n                    {{metadata.contentTypeTag}}\n                    \x3c/p\x3e\n                    \x3ch4 class\x3d"fz-v12 lh-v15 c-cards-articles__title r2a-title"\x3e\n                    {{title}}\n                    \x3c/h4\x3e\n                    \x3cp class\x3d"family-sans fz-v7 lh-v9 c-cards-articles__excerpt txt-clr-g1"\x3e\n                    {{{metadata.description}}}\n                    \x3c/p\x3e\n                    \x3cp class\x3d"family-sans fw-v4 fz-v4 lh-v2 c-cards-articles__byline txt-clr-g2"\x3e\n                    {{#if metadata.primaryAuthor}}By {{ metadata.primaryAuthor }} {{/if}}\n                    {{#if metadata.articleDate}}\n                        {{#if metadata.primaryAuthor}}|{{/if}} {{ metadata.articleDate }}\n                    {{/if}}\n                    \x3c/p\x3e\n                \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/a\x3e\n        {{/each}}'};
b.prototype.fiveUpFeaturedTemplate=function(){return'{{#each this}}\n        \x3ca href\x3d"{{url}}" target\x3d"{{metadata.target}}" class\x3d"c-cards-articles__card-5-up secondary-link"\x3e\n        \x3cdiv class\x3d"bs_container"\x3e\n          \x3cdiv class\x3d"bs_row mx-auto bs_no-gutters"\x3e\n              \x3cdiv class\x3d"bs_col-12"\x3e\n                  {{!-- Image --}}\n                  {{#if metadata.autoFeatureImage}}\n                    {{#if metadata.autoFeatureImage.default}}\n                        \x3cpicture class\x3d"c-cards-articles__width-100"\x3e\n                        \x3csource srcset\x3d"{{metadata.autoFeatureImage.large}} 1x,\n                                    {{metadata.autoFeatureImage.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n                        \x3csource srcset\x3d"{{metadata.autoFeatureImage.medium}} 1x,\n                                    {{metadata.autoFeatureImage.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n                        \x3csource srcset\x3d"{{metadata.autoFeatureImage.small}} 1x,\n                                    {{metadata.autoFeatureImage.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n                        \x3cimg src\x3d"{{metadata.autoFeatureImage.default}}" alt\x3d"{{metadata.pageImageAlt}}" class\x3d"c-5up-featured-image c-cards-articles__image image-position-desktop__{{metadata.desktopImageCrop}} image-position-mobile__{{metadata.mobileImageCrop}}"\x3e\n                        \x3c/picture\x3e\n                    {{else}}\n                        \x3cpicture class\x3d"c-cards-articles__width-100"\x3e\n                        \x3cimg src\x3d"{{this.image_url}}" alt\x3d"{{metadata.pageImageAlt}}" class\x3d"c-cards-articles__image c-5up-featured-image" /\x3e\n                        \x3c/picture\x3e\n                    {{/if}}\n                  {{/if}}\n              \x3c/div\x3e\n\n              {{!-- About Image --}}\n              \x3cdiv class\x3d"c-cards-articles__content c-5-up__marker bs_col-12"\x3e\n                \x3cdiv\x3e\n                  \x3cp class\x3d"fz-v6 lhr-v3 family-sans fw-v4 c-cards-articles__label heading-label txt-clr-p2"\x3e\n                    {{metadata.contentTypeTag}}\n                  \x3c/p\x3e\n                  \x3ch4 class\x3d"fz-v8 fz-v8-pro fz-v16-lg lhr-v8 c-cards-articles__title c-5-up-featured__marker r2a-title"\x3e{{title}}\x3c/h4\x3e\n                  \x3cp class\x3d"family-sans fw-v4 fz-v4 lhr-v9 c-cards-articles__byline txt-clr-g2"\x3e\n                    {{#if metadata.primaryAuthor}}By {{ metadata.primaryAuthor }} {{/if}}\n                    {{#if metadata.articleDate}}\n                      {{#if metadata.primaryAuthor}}|{{/if}} {{ metadata.articleDate }}\n                    {{/if}}\n                  \x3c/p\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n        \x3c/a\x3e\n    {{/each}}'};
b.prototype.fiveUpTemplate=function(){return'{{#each this}}\n        \x3cdiv class\x3d"c-articles__separator c-cards-articles__general-article-marker"\x3e\x3c/div\x3e\n        \x3ca href\x3d"{{this.url}}" target\x3d"{{this.metadata.target}}" class\x3d"c-cards-articles__card-5-up c-5up-right-cards secondary-link"\x3e\n          \x3cdiv class\x3d"bs_container"\x3e\n            {{!-- Image --}}\n            \x3cdiv class\x3d"bs_row"\x3e\n              \x3cdiv class\x3d"bs_col-12 bs_col-lg-4 c-articles__toggle-picture-display"\x3e\n                {{#if this.metadata.pageImage}}\n                  {{#if this.metadata.pageImage.default}}\n                    \x3cpicture\x3e\n                      \x3csource srcset\x3d"{{this.metadata.pageImage.large}} 1x,\n                              {{this.metadata.pageImage.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n                      \x3csource srcset\x3d"{{this.metadata.pageImage.medium}} 1x,\n                              {{this.metadata.pageImage.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n                      \x3csource srcset\x3d"{{this.metadata.pageImage.small}} 1x,\n                              {{this.metadata.pageImage.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n                      \x3cimg src\x3d"{{this.metadata.pageImage.default}}" alt\x3d"{{this.metadata.pageImageAlt}}" class\x3d"c-cards-articles__image image-position-desktop__{{this.metadata.desktopImageCrop}} image-position-mobile__{{this.metadata.mobileImageCrop}}"\x3e\n                    \x3c/picture\x3e\n                  {{else}}\n                    \x3cpicture\x3e\n                      \x3cimg src\x3d"{{this.image_url}}" alt\x3d"{{this.metadata.pageImageAlt}}" class\x3d"c-cards-articles__image" /\x3e\n                    \x3c/picture\x3e\n                  {{/if}}\n                {{/if}}\n              \x3c/div\x3e\n\n\n              {{!-- About Image --}}\n              \x3cdiv class\x3d"bs_col-12 bs_col-lg-8"\x3e\n                \x3cp class\x3d"fz-v6 lhr-v3 family-sans fw-v4 c-cards-articles__label c-5-up__marker heading-label txt-clr-p2"\x3e\n                  {{this.metadata.contentTypeTag}}\n                \x3c/p\x3e\n                \x3ch4 class\x3d"fz-v8 fz-v6-pro fz-v10-lg lhr-v11 lhr-v5-lg c-cards-articles__title c-5-up__marker r2a-title"\x3e\n                  {{ this.title }}\n                \x3c/h4\x3e\n                \x3cp class\x3d"family-sans fw-v4 fz-v4 lhr-v9 c-cards-articles__byline txt-clr-g2"\x3e\n                    {{#if metadata.primaryAuthor}}By {{ metadata.primaryAuthor }} {{/if}}\n                    {{#if this.metadata.articleDate}}\n                        {{#if metadata.primaryAuthor}}|{{/if}} {{ this.metadata.articleDate }}\n                    {{/if}}\n                \x3c/p\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/a\x3e\n      {{/each}}'};
b.prototype.textAssetTemplate=function(){return'{{#each this}}\n            \x3ca href\x3d"{{this.url}}" target\x3d"{{this.metadata.target}}" class\x3d"c-cards-articles__card-text-asset secondary-link"\x3e\n                \x3ch4 class\x3d"c-cards-articles__title-text-asset r2a-title fz-v9 lhr-v7 fw-v4 family-sans"\x3e\n                    {{this.title}}\n                \x3c/h4\x3e\n                \x3cp class\x3d"family-sans fw-v4 fz-v4 lhr-v9 c-cards-articles__byline c-cards-articles__byline-text-asset txt-clr-g2"\x3e\n                    {{#if metadata.primaryAuthor}}\n                        By {{metadata.primaryAuthor}}\n                    {{/if}}\n                    {{#if this.metadata.articleDate}}\n                        {{#if metadata.primaryAuthor}}\n                            |\n                        {{/if}}\n                        {{this.metadata.articleDate}}\n                    {{/if}}\n                \x3c/p\x3e\n            \x3c/a\x3e\n            \x3cdiv class\x3d"c-articles__separator"\x3e\x3c/div\x3e\n        {{/each}}'};
b.prototype.eventHandlers=function(){var c=this;a(this.componentWrapper).on("click",".related-article-auto .r2a-author-card, .related-article-auto .c-cards-articles__card-5-up, .related-article-auto .c-cards-articles__card, .related-article-auto.c-text-asset__marker a",function(c){var b="undefined"!==typeof utag_data?utag_data.page_name:"";c=a(c.currentTarget).find(".r2a-title").text().trim();b="undefined"!==typeof utag_data?b:"";c="undefined"===typeof c||null===c?"":c;e.setAnalyticsByPage({event_name:"related_story_click",
event_action:"clicked from "+b,event_category:"clicked to "+c,related_story_title:c},!0)});a(window).on("resize",function(){1023<a(window).width()?(clearTimeout(c.timer),c.timer=setTimeout(function(){c.adjustHeight()},100)):a(".c-parsely").find(".c-5up-featured-image").height("auto")})};b.prototype.getUserLocalization=function(){var c=this,b=f.getCookie("browserLocale");b&&(this.browserLocale=a.trim(b).toLowerCase().replace("-","_"));return e.checkGeolocation().then(function(a){c.geoResponse=a.response;
var b=a.response["edge-country"].toLowerCase();a=a.response["edge-region"].toLowerCase();"usa"===b?c.findLocation(c.geoStateData,a,"stateCode","stateName"):c.findLocation(c.geoCountryData,b,"countryCode","countryName")})};b.prototype.findLocation=function(a,b,d,k){var c="";if(a&&null!==a)for(var g=0;g<a.length;g++)if(a[g][d]===b){c=a[g][k];break}this.usrStateCountryName=c};return b}())}($,TNC.BrowserStorage,TNC.Utility,TNC.XHR);this.TNC=this.TNC||{};
this.TNC.TitleTextCta=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){for(var e=a("div.title-text-cta.base-component div.cta-container"),d=0;d<e.length;d++)if(1<a(e[d]).find("a").length)a(e[d]).find(".primary-cta-btn").addClass("two__btns");else break};return f}())}($);this.TNC=this.TNC||{};
this.TNC.BlockQuote=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};this.TNC.Text4UpLink=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.RelatedEvents=function(a,f,e){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;return new (function(){function d(){var b=this;this.geoCountryData=a(".geoCountryHiddenData")&&0<a(".geoCountryHiddenData").length?JSON.parse(a.trim(a(".geoCountryHiddenData").eq(0).text())):null;this.geoStateData=a(".geoStateHiddenData")&&0<a(".geoStateHiddenData").length?JSON.parse(a.trim(a(".geoStateHiddenData").eq(0).text())):
null;this.usrStateName=this.usrCountryName=this.edgeRegion=this.edgeCountry="";this.getUserLocalization().then(function(){b.initialize()})}d.prototype.initialize=function(){var b=this;a(function(){var c=a("section.c-related-events");c&&c.length&&a(c).each(function(){b.init(a("#"+this.id))})})};d.prototype.checkIsJSON=function(a){if("object"===typeof a)try{a=JSON.stringify(a)}catch(c){return!1}if("string"===typeof a)try{a=JSON.parse(a)}catch(c){return!1}return"object"!==typeof a?!1:!0};d.prototype.formateDate=
function(a,c){a=new Date(a);return c?a.toLocaleDateString("en-US",{month:"short",day:"2-digit"}):a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})};d.prototype.formatTime=function(a){return(new Date(a)).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})};d.prototype.sortByDate=function(a,c){a=(new Date(a.sortDate)).getTime();c=(new Date(c.sortDate)).getTime();return a>c?1:-1};d.prototype.sortEventsByDate=function(b){var c=this,g=new Date;a.each(b,function(a,
b){"yes"===b.fields.event_recurring?a=c.getClosestDate(g,b.fields.event_start_date):(a=c.getClosestDate(g,b.fields.event_end_date))&&Infinity!==a&&(a=b.fields.event_start_date[0]);a&&Infinity!==a&&(b.sortDate=a)});b.sort(this.sortByDate);this.eventStore=b.slice(0,this.noOfRecords)};d.prototype.getClosestDate=function(a,c){var b=Infinity;c.forEach(function(c){var g=new Date(c);g>=a&&g<b&&(b=c)});return b};d.prototype.isOneDayEvent=function(a,c){a=(new Date(a)).toDateString();c=(new Date(c)).toDateString();
return(new Date(a)).getTime()===(new Date(c)).getTime()?!0:!1};d.prototype.init=function(a){this.$el=a;this.enableGeoLocation=this.$el.data("geolocation");var c=this.$el.find("input[name\x3d'rv-data-json']").val();if(c=this.checkIsJSON(c)?JSON.parse(c):null)this.eventType=c.eventType,this.awsUrl=""+c.awsSearchEndPoint,this.awsDomain=c.search_by_domain,this.noOfRecords=c.paginationCount,this.tagOne=this.$el.find("input[name\x3d'tag-0']").val(),this.tagTwo=this.$el.find("input[name\x3d'tag-1']").val(),
this.eventStore=null,this.callAWSService(a)};d.prototype.makeUrlQuery=function(){var a=(new Date).toISOString();var c="q\x3d*\x26q.parser\x3dlucene";if(this.enableGeoLocation&&"yes"===this.enableGeoLocation){var g="",d="";this.usrCountryName&&""!==this.usrCountryName&&("usa"===this.edgeCountry&&this.usrStateName&&""!==this.usrStateName?(g=this.usrCountryName,d=this.usrStateName):"can"===this.edgeCountry?(g=this.usrCountryName,d=""):(g="",d=this.usrCountryName));c+="\x26fq\x3d(and template_name:'eventdetailpage'search_by_domain:'"+
this.awsDomain+"'(or geographic_location:'all_locations'(and "+(g?"event_region_title:'"+g+"'":"")+(d?"event_locale_title:'"+d+"'":"")+"))event_start_date: ['"+a+"',})"}else"local-event"===this.eventType?(g=this.tagOne?"event_region_title:'"+this.tagOne+"'":"",d=this.tagTwo?"event_locale_title:'"+this.tagTwo+"'":"",c+="\x26fq\x3d(and template_name:'eventdetailpage'search_by_domain:'"+this.awsDomain+"'(or geographic_location:'all_locations'(and "+g+d+"))event_start_date: ['"+a+"',})"):(this.tagOne=
this.tagOne.replace(/-/g,"_"),this.tagTwo=this.tagTwo.replace(/-/g,"_"),c+="\x26fq\x3d(and template_name:'eventdetailpage'search_by_domain:'"+this.awsDomain+"'(and "+(this.tagOne?"places_we_protect:'"+this.tagOne+"'":"")+(this.tagTwo?"places_we_protect:'"+this.tagTwo+"'":"")+")event_start_date: ['"+a+"',})");c+="\x26sort\x3devent_start_date_sort asc\x26size\x3d24";console.log("urlQuery",c);return encodeURI(c)};d.prototype.callAWSService=function(b){var c=this,g=this.makeUrlQuery();e.initXHR({url:this.awsUrl,
type:"GET",data:g,dataType:"json"}).then(function(g){g&&g.hits&&g.hits.found&&g.hits.hit?(c.renderCardsModel(b,g.hits.hit),g=b.find(".c-cards-events__card"),a.each(g,function(b,g){a(g).click(function(b){b.preventDefault();c._setAnalyticsEvents(a(this).find(".c-cards-events__title").text().trim(),a(this).attr("href"));window.location.href=a(this).attr("href")})})):b.addClass("hideContent")})};d.prototype.renderCardsModel=function(a,c){this.sortEventsByDate(c);this.renderCardsView(a)};d.prototype.renderCardsView=
function(b){var c=this,g="";a.each(this.eventStore,function(a,b){g+=c.cardsTemplate(b)});b.find(".c-cards-events").html(g)};d.prototype.cardsTemplate=function(a){var c='\x3ca href\x3d"'+a.fields.link+'" class\x3d"c-cards-events__card txt-p2-hover bs_col-md-6 bs_col-lg-4"\x3e\x3cdiv class\x3d"c-cards-events__content border-primary"\x3e';c+='\x3cp class\x3d"c-cards-events__date txt-clr-p2 border-primary-sudo lhr-v3 fz-v6 family-sans fw-v4 __date"\x3e'+a.fields.event_dates+"\x3c/p\x3e";a.fields.event_site&&
(c+='\x3cdiv class\x3d"c-cards-events__date family-sans fz-v5 fw-v3 txt-clr-p2 border-primary-sudo c-cards-event__site"\x3e\n          \x3cdiv class\x3d"c-cards-events__loc-icon"\x3e\n            \x3csvg width\x3d"14px" height\x3d"17px" viewBox\x3d"0 0 14 17" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3ctitle\x3eIcon / Location\x3c/title\x3e \x3cdesc\x3eCreated with Sketch.\x3c/desc\x3e \x3cg id\x3d"_Optimized-Components" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e \x3cg id\x3d"C25-Related-Events-Feed---Location" transform\x3d"translate(-184.000000, -244.000000)" stroke\x3d"#3C3C3C"\x3e \x3cg id\x3d"Event-Card-1" transform\x3d"translate(155.000000, 192.000000)"\x3e \x3cg id\x3d"Icon-/-Location" transform\x3d"translate(30.000000, 53.000000)"\x3e \x3cg\x3e \x3cpath d\x3d"M8.14348007,6.09375 C8.14348007,7.3880654 7.12402932,8.4375 5.86669435,8.4375 C4.60935939,8.4375 3.58990864,7.3880654 3.58990864,6.09375 C3.58990864,4.7994346 4.60935939,3.75 5.86669435,3.75 C7.12402932,3.75 8.14348007,4.7994346 8.14348007,6.09375 Z" id\x3d"Stroke-1" stroke-width\x3d"1.5"\x3e\x3c/path\x3e \x3cpath d\x3d"M2.19489146,10.7266681 C1.62329017,10.0398146 1.1091844,9.30479458 0.687550587,8.51582815 C0.419238163,8.01297042 0.179673498,7.47302453 0.100617159,7.03230152 C0.0910345725,7.01303494 0.0910345725,6.98895172 0.0862432792,6.96968514 C0.0287477597,6.64215329 0,6.3001715 0,5.95337307 C0,2.66360462 2.64958519,0 5.91724721,0 C9.18970053,0 11.8392857,2.66360462 11.8392857,5.95337307 C11.8392857,6.3001715 11.810538,6.64215329 11.7530424,6.96968514 C11.7482511,6.98895172 11.7482511,7.01303494 11.7434598,7.03230152 C11.5072491,8.32942399 9.92037275,10.3374832 9.92037275,10.3374832 L5.97665925,14.9359341 C5.90287333,15.0221521 5.76967538,15.0211887 5.69732685,14.9340074 L2.19489146,10.7266681 Z" id\x3d"Stroke-3" stroke-width\x3d"1.5"\x3e\x3c/path\x3e \x3c/g\x3e \x3c/g\x3e \x3c/g\x3e \x3c/g\x3e \x3c/g\x3e \x3c/svg\x3e\n          \x3c/div\x3e\n          '+
a.fields.event_site+"\n          \x3c/div\x3e");c+='\x3ch4 class\x3d"c-cards-events__title txt-clr-g1 fz-v12 lh-v15"\x3e\n                  '+(a.fields.event_title?a.fields.event_title:a.fields.title)+"\n                \x3c/h4\x3e";c="yes"===a.fields.event_all_day?c+'\x3cp class\x3d"c-cards-events__time txt-clr-g2 family-sans fw-v2 fz-v7"\x3eAll day\x3c/p\x3e':c+('\x3cp class\x3d"c-cards-events__time txt-clr-g2 family-sans fw-v2 fz-v7"\x3e'+a.fields.event_timings+"\x3c/p\x3e");return c+='\x3cp class\x3d"c-cards-events__description txt-clr-g2 family-sans fz-v7 lh-v10"\x3e\n                  '+
a.fields.description+'\n                \x3c/p\x3e\n                \x3cp class\x3d"c-cards-events__eventdetails"\x3eSEE EVENT DETAILS \x3csvg width\x3d"6px" height\x3d"11px" viewBox\x3d"0 0 6 11" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\n                        \x3cg id\x3d"UI-Element-/-Forward-Arrow-/-Green" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\n                            \x3cpolyline id\x3d"Stroke-1-Copy-2" stroke\x3d"#007931" stroke-width\x3d"2" transform\x3d"translate(3.000000, 5.500000) rotate(-90.000000) translate(-3.000000, -5.500000) " points\x3d"8 3 3 8 -2 3"\x3e\x3c/polyline\x3e\n                        \x3c/g\x3e\n                    \x3c/svg\x3e\n                \x3c/p\x3e\n              \x3c/div\x3e\n            \x3c/a\x3e'};
d.prototype.getUserLocalization=function(){var a=this;return f.checkGeolocation().then(function(c){a.edgeCountry=c.response["edge-country"].toLowerCase();a.edgeRegion=c.response["edge-region"].toLowerCase();a.findLocation(a.geoCountryData,a.edgeCountry,"countryCode","countryName");"usa"===a.edgeCountry&&a.findLocation(a.geoStateData,a.edgeRegion,"stateCode","stateName")})};d.prototype.findLocation=function(a,c,g,d){var b="";if(a&&null!==a)for(var h=0;h<a.length;h++)if(a[h][g]===c){b=a[h][d];break}"countryName"===
d?this.usrCountryName=b:"stateName"===d&&(this.usrStateName=b)};d.prototype._setAnalyticsEvents=function(a,c){f.setAnalyticsByPage({event_name:"related_content_click",related_content_title:a,related_content_url:c,related_content_type:"event",event_action:"clicked from "+("undefined"!==typeof utag_data?utag_data.page_name:""),event_category:"related content click",event_label:a},!0)};return d}())}($,TNC.Utility,TNC.XHR);this.TNC=this.TNC||{};
this.TNC.MediaGallery=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){this.initFlickity();this.initEvents();setTimeout(function(){a(".c-media-gallery .carousel").find(".is-selected .triggerModalElement").addClass("triggerModal");a(".c-media-gallery .carousel").flickity("resize")},100)};e.prototype.initEvents=function(){a(".c-media-gallery").on("click",
".triggerModal",function(d){d.stopPropagation();d.preventDefault();var b=a(window).scrollTop();f.scrollPos=b;f.showModal(d)});a(".flickity-prev-next-button").on("click",function(){a(".c-media-gallery__cell.is-selected").find(".triggerModalElement").addClass("triggerModal")})};e.prototype.checkTouchDevice=function(){return"ontouchstart"in window||"onmsgesturechange"in window};e.prototype.initFlickity=function(){var d=this.checkTouchDevice();a(".c-media-gallery .carousel").flickity({pageDots:!1,wrapAround:!0,
draggable:d,arrowShape:{x0:10,x1:60,y1:50,x2:75,y2:35,x3:40}});a(".c-media-gallery .carousel").on("staticClick.flickity",function(b){a(b.target).hasClass("triggerModalElement")&&(a(b.target).addClass("triggerModal"),a(b.target).trigger("click"))})};return e}())}($,TNC.Modal);this.TNC=this.TNC||{};this.TNC.TextListCallout=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.FooterColumns=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;a(".c-footer__col_wraper").parent("div").parent(".parsys_column").addClass("c-mobile-footer-columns");for(var b=a(".c-footer__col .toggle"),c=0;c<b.length;c++)b[c].onclick=function(c){c=c.target.parentNode.getElementsByClassName("toggle")[0];a(c).hasClass("toggle-on")?
a(c).removeClass("toggle-on"):a(c).addClass("toggle-on")};var g=function(c){var b=function(){c.style.display="block";var a=c.scrollHeight+"px";c.style.display="";return a}();a(c).addClass("is-visible");a(c).height(b);window.setTimeout(function(){c.style.height=""},5)},h=function(c){c.style.height=c.scrollHeight+"px";window.setTimeout(function(){c.style.height="0"},1);window.setTimeout(function(){a(c).removeClass("is-visible")},5)};a(".c-footer__col_wraper .c-footer__heading \x3e a").on("click",function(c){a(c.target).hasClass("toggle")&&
(c.preventDefault(),c=document.querySelector(c.target.hash))&&(a(c).hasClass("is-visible")?h(c):g(c))});a(".c-footer__link").on("click",function(a){d.setAnalytics(a)});this.checkFooterHeadingLinks();a(window).resize(this.checkFooterHeadingLinks)};e.prototype.checkFooterHeadingLinks=function(){var d="0";915<a(window).width()&&(d="-1");a(".c-footer__heading a").attr("tabindex",d)};e.prototype.setAnalytics=function(d){var b=a(d.target),c=[];d=window.location.hostname;b.hasClass("c-footer__link")&&c.push(b.text());
b=b.parents(".c-footer__col-nav").find(".c-footer__heading");b=a(b).children("a");c.push(b.text());c=a.trim(c.reverse().join(".")).toString().toLowerCase();c=c.replace(/[^a-z0-9.]/gi,"");f.setAnalyticsByPage({event_name:"footer_nav_click",nav_click_location:d+".fnav."+c},!0)};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.FooterIntlSites=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;a(".c-footer__international--location").find("a").on("click",function(a){d.setAnalytics(a)});a(".portal-nature .c-footer__inner")[0]&&a(".portal-nature .c-footer__inner")[0].classList.add("border-none")};e.prototype.setAnalytics=function(d){var b=a(d.target),c=[];for(d=
window.location.hostname;!b.hasClass("c-footer__international--locations");){if(b.hasClass("c-footer__international--location")){var g=a(b).children("a");c.push(g.text())}b=b.parent()}b=a.trim(c.reverse().join(".")).toString().toLowerCase();b=b.replace(/ /g,"_");f.setAnalyticsByPage({event_name:"footer_nav_click",nav_click_location:d+".fnav."+b},!0)};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.FooterLegal=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.FooterSignup=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;this.$emailForm=a(".c-signup-email__footer");this.$textForm=a(".c-signup-mobile__footer");this.emailInput=a(".c-signup-email__footer .c-field__input");this.mobileInput=a(".c-signup-mobile__footer .c-field__input");this.signupSubmit=a(".c-signup-email__footer .c-button");
this.signupMobileSubmit=a(".c-signup-mobile__footer .c-button");f.checkGeolocation().then(function(b){b=b.response["edge-two-letter-country"];if(!b)return!1;b=a.trim(b.toLowerCase());d.checkEmailForm(b);d.checkTextForm(b)});this.emailInput.on("keyup",function(a){13===a.keyCode&&d.validateEmail.bind(d)});this.signupSubmit.on("click",this.validateEmail.bind(this));this.mobileInput.on("keyup",function(a){13===a.keyCode&&d.validatePhone.bind(d)});this.signupMobileSubmit.on("click",this.validatePhone.bind(this))};
e.prototype.validateEmail=function(d){/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(this.emailInput.val())?(d={event_name:"email_signup",event_action:"footer_sign_up",email_signup_location:"footer_sign_up"},f.setAnalyticsByPage(d,!0),a(".c-signup-email__footer .c-field__error-text").css("display","none"),a(".c-signup-email__footer .i-error").css("display","none")):(a(".c-signup-email__footer .c-field__error-text").css("display","block"),a(".c-signup-email__footer .i-error").css("display",
"block"),d.preventDefault(),d={event_name:"submit_error",event_action:"footer_sign_up",email_signup_location:"footer_sign_up"},f.setAnalyticsByPage(d,!0))};e.prototype.validatePhone=function(d){/^(?=.*[0-9])[- +()0-9]+$/gm.test(this.mobileInput.val())?(f.setAnalyticsByPage({event_name:"text_signup",event_action:"footer_sign_up",text_signup_location:"footer_sign_up"},!0),a(".c-signup-mobile__footer .c-field__error-text").css("display","none"),a(".c-signup-mobile__footer .i-error").css("display","none")):
(a(".c-signup-mobile__footer .c-field__error-text").css("display","block"),a(".c-signup-mobile__footer .i-error").css("display","block"),d.preventDefault())};e.prototype.checkEmailForm=function(d){var b=a(".geo-email-btns");d=a('.geo-email-sign-up-btn[data-country-code\x3d"'+d+'"]');d.length&&(this.$emailForm.hide(),this.$textForm.hide(),d.removeClass("hide"),b.removeClass("hide"))};e.prototype.checkTextForm=function(d){var b=a(".geo-text-btns");d=a('.geo-text-sign-up-btn[data-country-code\x3d"'+
d+'"]');d.length&&(this.$emailForm.hide(),this.$textForm.hide(),d.removeClass("hide"),b.removeClass("hide"))};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};this.TNC.FooterSocial=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.SignUpForm=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;setTimeout(function(){d.rerenderComponent()},100);a(window).resize(function(){d.rerenderComponent()});this.$el=a(".c-sign-up-form__field");this.emailInput=this.$el.find(".c-field__input");this.signupSubmit=this.$el.find(".signup-submit");this.emailInput.on("keyup",function(a){13===
a.keyCode&&d.validateEmail.bind(d)});this.signupSubmit.on("click",this.validateEmail.bind(this));this.$el.find(".error__msg").css("display","none");this.$el.find(".i-error").css("display","none")};e.prototype.validateEmail=function(d){var b=a(d.target).closest("form").attr("data-componentuniqueid"),c=this.$el.find(".c-field__input").closest('[data-componentuniqueid\x3d"'+b+'"]');/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(c.val())?(d={event_name:"email_signup",event_action:"sign_up_form",
email_signup_location:"sign_up_form"},f.setAnalyticsByPage(d,!0),a(".error__msg").closest('[data-componentuniqueid\x3d"'+b+'"]').css("display","none"),a(".i-error").closest('[data-componentuniqueid\x3d"'+b+'"]').css("display","none")):(a(".error__msg").closest('[data-componentuniqueid\x3d"'+b+'"]').css("display","block"),a(".i-error").closest('[data-componentuniqueid\x3d"'+b+'"]').css("display","block"),d.preventDefault(),d={event_name:"submit_error",event_action:"sign_up_form",email_signup_location:"sign_up_form"},
f.setAnalyticsByPage(d,!0))};e.prototype.rerenderComponent=function(){var d=a(".c-sign-up-form");d.length&&d.each(function(b,c){var g=a(c).find(".c-sign-up-form__background");b=a(c).find(".c-sign-up-form__image");c=a(c);g=g.outerHeight()+50;var d=b.height();g>d?(c.addClass("large-text-block"),c.css("background-image","url("+b.get(0).currentSrc+")")):c.removeClass("large-text-block")})};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.MediaContacts=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;a(".c-media-contacts_header").on("click",function(a){e.toggleAccordion(a)});a(window).on("resize",function(){a(window).height()<a(window).width()&&1023<a(window).width()&&(a(".c-media-contacts__list").css("display",""),a(".media-toggle").removeClass("toggle-on"))})};f.prototype.toggleAccordion=function(e){1023>a(window).width()&&
(e=a(e.currentTarget),e=a(e).find(".media-toggle"),e.toggleClass("toggle-on"),e=a(e).attr("data-componentuniqueid"),a("#"+e).find(".c-media-contacts__list").slideToggle(700,"easeInOutQuart"))};return f}())}($);this.TNC=this.TNC||{};this.TNC.HorizontalRuler=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.RichTextEditor=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};this.TNC.ToolsAndResources=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.ArticleCta=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;this.emailInput=a(".c-article-cta .c-field__input");this.signupSubmit=a(".c-article-cta .c-button");this.emailInput.on("keyup",function(a){13===a.keyCode&&d.validateEmail.bind(d)});this.signupSubmit.on("click",this.validateEmail.bind(this));a(".c-article-cta__field .error__msg").css("display",
"none");a(".c-article-cta__field .i-error").css("display","none")};e.prototype.validateEmail=function(d){var b=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,c=a(d.target).closest("form").attr("data-componentuniqueid"),g=a(".c-article-cta__field .c-field__input").closest('[data-componentuniqueid\x3d"'+c+'"]');g&&g.length&&(a(".c-article-cta .cons_email-"+c).length&&!b.test(g.val())?(a(".c-article-cta__field .error__msg").closest('[data-componentuniqueid\x3d"'+c+'"]').css("display","block"),a(".c-article-cta__field .i-error").closest('[data-componentuniqueid\x3d"'+
c+'"]').css("display","block"),d.preventDefault(),d={event_name:"submit_error",event_action:"article_cta",email_signup_location:"article_cta"},f.setAnalyticsByPage(d,!0)):(d={event_name:"email_signup",event_action:"article_cta",email_signup_location:"article_cta"},f.setAnalyticsByPage(d,!0),a(".c-article-cta__field .error__msg").closest('[data-componentuniqueid\x3d"'+c+'"]').css("display","none"),a(".c-article-cta__field .i-error").closest('[data-componentuniqueid\x3d"'+c+'"]').css("display","none")))};
return e}())}($,TNC.Utility);this.TNC=this.TNC||{};this.TNC.VisualListing=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){2>a(".c-visual-list__items .c-visual-list__item").length&&a(".c-visual-list__items .c-visual-list__item").css("border-bottom","none")};return f}())}($);this.TNC=this.TNC||{};
this.TNC.TabContainer=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;d.$tabContainer=".c-tab-container-container";a(window).on("popstate",function(){d.updateTabPosition()});var b=window.matchMedia("(max-width: 40em)");b.addListener(d.resetContainer);a(".c-tab-container-content:first-child").addClass("show");var c=f.getParameterByName("tab_q");
a(".c-tab-container-container").each(function(b,d){0===a(d).find('.c-tab-container-links__link[href\x3d"#'+c+'"]').length&&(b=a(d).find(".c-tab-container-links__link").first(),a(d).find(".c-tab-container-links__viewing_tab").addClass("is-active txt-clr-g1 fw-bold show").html(b.html()))});a(".c-tab-container-links__link").on("click",function(c){c.preventDefault();a(c.currentTarget).parents(d.$tabContainer).find(".c-tab-container-links__link").removeClass("is-active bx-shdo-clr-p1-bottom txt-clr-g1");
a(c.currentTarget).addClass("is-active bx-shdo-clr-p1-bottom txt-clr-g1");d.setAnalytics(c);d.toggleHandler(c);b.matches&&(a(c.currentTarget).parents(d.$tabContainer).find(".c-tab-container-links__items").slideToggle(300),a(c.currentTarget).parents(d.$tabContainer).find(".c-tab-container-links__arrow").toggleClass("open"));document.getElementById(f.getParameterByName("tab_q")).scrollIntoView();window.scrollTo(0,a(window).scrollTop()-60)});d.handleSizeCalculator();d.updateTabPosition();a(".c-tab-container-links__viewing").on("click",
function(c){a(c.currentTarget).parents(d.$tabContainer).find(".c-tab-container-links__items").slideToggle(300);a(c.currentTarget).find(".c-tab-container-links__arrow").toggleClass("open")});a(".c-tab-container-container").each(function(g,d){0===a(d).find('.c-tab-container-links__link[href\x3d"#'+c+'"]').length&&(b.matches?a(d).find(".c-tab-container-links__link").first().addClass("is-active txt-clr-g1"):a(d).find(".c-tab-container-links__link").first().addClass("is-active bx-shdo-clr-p1-bottom txt-clr-g1"))})};
e.prototype.resetContainer=function(d){var b=a(".c-tab-container-links__items");d.matches?b.each(function(c,b){a(b).css("display","none");a(b).find(".is-active").removeClass("bx-shdo-clr-p1-bottom")}):(b.each(function(c,b){a(b).css("display","flex");a(b).find(".is-active").addClass("bx-shdo-clr-p1-bottom")}),a(".c-tab-container-links__arrow").removeClass("open"))};e.prototype.toggleHandler=function(d){var b=a(d.currentTarget).attr("href");a(d.currentTarget).parents(this.$tabContainer).find(".c-tab-container-content").removeClass("show");
a(b).addClass("show");console.log(d);console.log(d.currentTarget);a(d.currentTarget).parents(this.$tabContainer).find(".c-tab-container-content").scrollTop(0);this.updateTabUrl(b);this.handleSizeCalculator()};e.prototype.updateTabUrl=function(a){a=a.substr(1);a=f.updateQueryString("tab_q",a);f.updateURL(a);this.updateTabPosition()};e.prototype.updateTabPosition=function(){var d=window.location.search,b=f.getParameterByName("tab_q"),c=window.matchMedia("(max-width: 40em)");d&&b?(d="#"+b,a(d).parent().parent().find(".c-tab-container-links__link").removeClass("is-active bx-shdo-clr-p1-bottom txt-clr-g1"),
a(d).siblings().removeClass("show"),a(d).addClass("show"),c.matches?a('.c-tab-container-links__link[href\x3d"'+d+'"]').addClass("is-active txt-clr-g1"):a('.c-tab-container-links__link[href\x3d"'+d+'"]').addClass("is-active bx-shdo-clr-p1-bottom txt-clr-g1"),b=a('.c-tab-container-links__link[href\x3d"'+d+'"]'),a(d).parent().parent().find(".c-tab-container-links__viewing_tab").html(b.html())):(a(".c-tab-container-links__link").removeClass("is-active bx-shdo-clr-p1-bottom"),a(".c-tab-container-content").removeClass("show"),
a(".c-tab-container-container").each(function(b,d){b=a(d).find(".c-tab-container-links__link").first();a(d).find(".c-tab-container-links__viewing_tab").addClass("is-active txt-clr-g1 fw-bold show").html(b.html());c.matches?a(d).find(".c-tab-container-links__link").first().addClass("is-active txt-clr-g1"):a(d).find(".c-tab-container-links__link").first().addClass("is-active bx-shdo-clr-p1-bottom txt-clr-g1");a(d).find(".c-tab-container-content").first().addClass("show")}))};e.prototype.handleSizeCalculator=
function(){var a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0);window.dispatchEvent(a)};e.prototype.setAnalytics=function(d){d=a(d.currentTarget).text().trim();f.setAnalyticsByPage({event_name:"tab_click",event_action:d,tab_title:d},!0)};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};this.TNC.ContactsListing=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.ContactDetail=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.AnchorLinks=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;(function(){function a(){function a(a,c){this.scrollLeft=a;this.scrollTop=c}function d(a){if(null===a||"object"!==typeof a||void 0===a.behavior||"auto"===a.behavior||"instant"===a.behavior)return!0;if("object"===typeof a&&"smooth"===a.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+a.behavior+" is not a valid value for enumeration ScrollBehavior.");}function b(a,c){if("Y"===c)return a.clientHeight+
v<a.scrollHeight;if("X"===c)return a.clientWidth+v<a.scrollWidth}function c(a,c){a=m.getComputedStyle(a,null)["overflow"+c];return"auto"===a||"scroll"===a}function g(a){var g=b(a,"Y")&&c(a,"Y");a=b(a,"X")&&c(a,"X");return g||a}function h(a){var c=(n()-a.startTime)/468;var b=.5*(1-Math.cos(Math.PI*(1<c?1:c)));c=a.startX+(a.x-a.startX)*b;b=a.startY+(a.y-a.startY)*b;a.method.call(a.scrollable,c,b);c===a.x&&b===a.y||m.requestAnimationFrame(h.bind(m,a))}function k(c,b,g){var d=n();if(c===f.body){var k=
m;var e=m.scrollX||m.pageXOffset;c=m.scrollY||m.pageYOffset;var l=q.scroll}else k=c,e=c.scrollLeft,c=c.scrollTop,l=a;h({scrollable:k,method:l,startTime:d,startX:e,startY:c,x:b,y:g})}var m=window,f=document;if(!("scrollBehavior"in f.documentElement.style&&!0!==m.__forceSmoothScrollPolyfill__)){var p=m.HTMLElement||m.Element,q={scroll:m.scroll||m.scrollTo,scrollBy:m.scrollBy,elementScroll:p.prototype.scroll||a,scrollIntoView:p.prototype.scrollIntoView},n=m.performance&&m.performance.now?m.performance.now.bind(m.performance):
Date.now,v=/MSIE |Trident\/|Edge\//.test(m.navigator.userAgent)?1:0;m.scroll=m.scrollTo=function(a,c){void 0!==a&&(!0===d(a)?q.scroll.call(m,void 0!==a.left?a.left:"object"!==typeof a?a:m.scrollX||m.pageXOffset,void 0!==a.top?a.top:void 0!==c?c:m.scrollY||m.pageYOffset):k.call(m,f.body,void 0!==a.left?~~a.left:m.scrollX||m.pageXOffset,void 0!==a.top?~~a.top:m.scrollY||m.pageYOffset))};m.scrollBy=function(a,c){void 0!==a&&(d(a)?q.scrollBy.call(m,void 0!==a.left?a.left:"object"!==typeof a?a:0,void 0!==
a.top?a.top:void 0!==c?c:0):k.call(m,f.body,~~a.left+(m.scrollX||m.pageXOffset),~~a.top+(m.scrollY||m.pageYOffset)))};p.prototype.scroll=p.prototype.scrollTo=function(a,c){if(void 0!==a)if(!0===d(a)){if("number"===typeof a&&void 0===c)throw new SyntaxError("Value could not be converted");q.elementScroll.call(this,void 0!==a.left?~~a.left:"object"!==typeof a?~~a:this.scrollLeft,void 0!==a.top?~~a.top:void 0!==c?~~c:this.scrollTop)}else c=a.left,a=a.top,k.call(this,this,"undefined"===typeof c?this.scrollLeft:
~~c,"undefined"===typeof a?this.scrollTop:~~a)};p.prototype.scrollBy=function(a,c){void 0!==a&&(!0===d(a)?q.elementScroll.call(this,void 0!==a.left?~~a.left+this.scrollLeft:~~a+this.scrollLeft,void 0!==a.top?~~a.top+this.scrollTop:~~c+this.scrollTop):this.scroll({left:~~a.left+this.scrollLeft,top:~~a.top+this.scrollTop,behavior:a.behavior}))};p.prototype.scrollIntoView=function(a){if(!0===d(a))q.scrollIntoView.call(this,void 0===a?!0:a);else{for(a=this;a!==f.body&&!1===g(a);)a=a.parentNode||a.host;
var c=a.getBoundingClientRect(),b=this.getBoundingClientRect();a!==f.body?(k.call(this,a,a.scrollLeft+b.left-c.left,a.scrollTop+b.top-c.top),"fixed"!==m.getComputedStyle(a).position&&m.scrollBy({left:c.left,top:c.top,behavior:"smooth"})):m.scrollBy({left:b.left,top:b.top,behavior:"smooth"})}}}}"object"===typeof exports&&"undefined"!==typeof module?module.exports={polyfill:a}:a()})();return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;this.container=a(".c-anchor-links");
this.container.length&&(a(document).on("scroll",function(){e.scrollHandler();e.scrollHighlight()}),this.containerObj=[],this.container.each(function(d,b){d=a(b);b={};b.staticPosition=d.offset().top-10;b.item=d;e.containerObj.push(b)}));a(".c-anchor-links__item:first-child").find(".c-anchor-links__link").addClass("is-active bx-shdo-clr-p3-bottom");a(".c-anchor-links__item").on("click",function(d){d.preventDefault();a(".c-anchor-links__items").find(".c-anchor-links__link").removeClass("is-active bx-shdo-clr-p3-bottom");
a(d.currentTarget).find(".c-anchor-links__link").addClass("is-active bx-shdo-clr-p3-bottom");d=a(d.currentTarget).find(".c-anchor-links__link").attr("href");d=a(""+d);var b=d.css("margin-top");b=parseFloat(b,10);d&&d.length&&a("html,body").animate({scrollTop:d.offset().top-e.container.height()-b},800)})};f.prototype.debounce=function(a,d,b){var c;return function(){var g=this,h=arguments,k=b&&!c;clearTimeout(c);c=setTimeout(function(){c=null;b||a.apply(g,h)},d);k&&a.apply(g,h)}};f.prototype.scrollHighlight=
function(){var e=a(document).scrollTop(),d=this.container,b=this.debounce(function(){document.getElementsByClassName("c-anchor-links__link is-active")[0].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},500,"immediate");a(".c-anchor-links__items .c-anchor-links__link").each(function(){var c=a(this),g=a(c.attr("href"));g.position().top<=e&&g.position().top+g.height()>e?(a(".c-anchor-links__items .c-anchor-links__link").removeClass("is-active bx-shdo-clr-p3-bottom"),c.addClass("is-active"),
1E3>a(window).width()&&d.hasClass("sticky")&&setTimeout(b,500)):c.removeClass("is-active")})};f.prototype.scrollHandler=function(){for(var e=a(window).scrollTop(),d=0,b=this.containerObj;d<b.length;d++){var c=b[d],g=c.item.offset().top;e>g?c.item.addClass("sticky"):e<c.staticPosition&&c.item.removeClass("sticky")}};return f}())}($);this.TNC=this.TNC||{};
this.TNC.TextAsset=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){a(".rte__img .c-article-cta form").length&&a(".c-article-cta form").closest(".rte__img").addClass("article-cta-container");if(window.textAssestFlag){var e=document.createElement("script");e.setAttribute("src","../../../../../../dist/output/components/article-cta/article-cta.component.js");document.body.appendChild(e);e=document.createElement("script");
e.setAttribute("src","../../../../../../dist/output/components/block-quote/block-quote.component.js");document.body.appendChild(e);e=document.createElement("script");e.setAttribute("src","../../../../../../dist/output/components/image/image.component.js");document.body.appendChild(e);e=document.createElement("script");e.setAttribute("src","../../../../../../dist/output/components/youtube-video/youtube-video.component.js");document.body.appendChild(e);e=document.createElement("script");e.setAttribute("src",
"../../../../../../dist/output/components/related-articles/related-articles.component.js");document.body.appendChild(e);e=document.createElement("script");e.setAttribute("src","../../../../../../dist/output/components/resource-listing/resource-listing.component.js");document.body.appendChild(e)}};return f}())}($);this.TNC=this.TNC||{};this.TNC.EventsDetail=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.PeopleAggregation=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.componentWraper=".c-ppl-category";this.pplData={};this.categoryWiseData={};this.loadMoreItems=24;this.pageLoad=!0;this.searchInput=".pplaggrSearch";this.searchForm=".ppl-form-search";this.featureResultContainer=".result-container-feature";this.nonFeatureResultContainer=".result-container-nonfeature";this.noResultContainer=
".result-container-noResult";this.showMore=".c-cards-people__more-people";this.searchIcon=".usrSearchSubmit";this.clearSearchIcon=".clearSearch";this.singleResultHeader=".singleResult";this.multiResultHeader=".multiResult";this.nonFeatureHeader=".nonFeatureHeading";this.allCategory="tnc:people/all";this.initialize()}e.prototype.getComponentId=function(a){var b=a.closest(this.componentWraper);a=b.data("componentuniqueid");var c=b.data("categoryToDisplay");b=b.data("showFeatured");return{componentId:a,
categoryToDisplay:c,showFeatured:b}};e.prototype.getQueryString=function(d){var b=f.getParameterByName("people_q"),c=f.getParameterByName("people_compId"),g=f.getParameterByName("people_sort");d&&(c=d);if(a("#"+c).is(":visible")){if(g&&(a("#"+c).find(this.searchInput).val(b),a("#"+c).find("select.pplSortBy").val(g),a("#"+c).find(".selectpicker").selectpicker("render"),!a.trim(b)))return a("#"+c).find("select.pplSortBy").trigger("change",[!1]),!1;if(a.trim(b))return a("#"+c).find(this.searchInput).val(b),
a("#"+c).find("select.pplSortBy").val(g),a("#"+c).find(".selectpicker").selectpicker("render"),a("#"+c).find(this.searchForm).trigger("submit",[!1]),!1;a("#"+c).find(this.searchInput).val("")}return!0};e.prototype.initialize=function(){var d=this;if(!a(this.componentWraper).length)return!1;this.initializeHandler();this.geoCountryData=JSON.parse(a.trim(a(".geoCountryHiddenData").eq(0).text()));this.geoStateData=JSON.parse(a.trim(a(".geoStateHiddenData").eq(0).text()));a(this.componentWraper).each(function(b,
c){c=a(c);var g=d.getComponentId(c);c=a.trim(c.find(".peopleHiddenData").text());d.categoryWiseData[g.categoryToDisplay]={showFeatured:g.showFeatured,categoryToDisplay:g.categoryToDisplay,componentuniqueid:g.componentId};c&&d.filteringForGeoLocation(JSON.parse(c),g).then(function(){d.getQueryString(g.componentId)&&(d.processData(d.pplData[g.componentId],g.categoryToDisplay,g.showFeatured),b+1===a(d.componentWraper).length&&(d.pageLoad=!1))})})};e.prototype.filteringForGeoLocation=function(d,b){function c(a,
c){for(var b=0;b<d.length;)"yes"===d[b].isPersonFeatured?d[b][c]&&d[b][c]===a?b++:d.splice(b,1):b++}function g(a,c,b,g){for(var d="",h=0;h<a.length;h++)if(a[h][b]===c){d=a[h][g];break}e=d}var h=this,k=a.Deferred(),e="";"no"===a("#"+b.componentId).data("disableGeoService")?f.checkGeolocation().then(function(m){var f=m.response["edge-country"].toLowerCase();m=m.response["edge-region"].toLowerCase();"usa"===f?(g(h.geoStateData,m,"stateCode","stateName"),c(m,"geoLocationStateCode")):(g(h.geoCountryData,
f,"countryCode","countryName"),c(f,"geoLocationCountryCode"));a("#"+b.componentId).find(".currentUsrLocation").html(e);h.pplData[b.componentId]=d;k.resolve()}):(this.pplData[b.componentId]=d,k.resolve());return k.promise()};e.prototype.processData=function(a,b,c){a&&a.length&&this.alphabeticalSort(a);this.filterData(a,c,b);this.render(b)};e.prototype.sortByRank=function(a,b){var c=this.categoryWiseData[a][b];c&&(c.sort(function(a,c){return parseInt(a.bioRank,10)<parseInt(c.bioRank,10)?-1:parseInt(a.bioRank,
10)>parseInt(c.bioRank,10)?1:0}),this.categoryWiseData[a][b]=c)};e.prototype.alphabeticalSort=function(a,b){void 0===b&&(b="bioLastName");b||(b="bioLastName");return a.sort(function(a,g){a[b]&&g[b]||(b="title");return a[b].toLowerCase()<g[b].toLowerCase()?-1:a[b].toLowerCase()>g[b].toLowerCase()?1:0})};e.prototype.filterData=function(a,b,c){var g=[],d=[];a&&a.length?c===this.allCategory?this.categoryWiseData[c].nonFeatureData=a:"yes"===b?(a.filter(function(a){"yes"===a.isPersonFeatured?(a.bioRank||
(a.bioRank=100),g.push(a)):d.push(a)}),this.categoryWiseData[c].featureData=g,this.categoryWiseData[c].nonFeatureData=d):this.categoryWiseData[c].nonFeatureData=a:(this.categoryWiseData[c].featureData=[],this.categoryWiseData[c].nonFeatureData=[]);this.pageLoad&&this.sortByRank(c,"featureData")};e.prototype.handlebarTemplate=function(a){return"{{#each "+a+'}}\n              \x3cdiv class\x3d"bs_col-6 bs_col-md-3 c-cards-people__card c-cards-link"\x3e\n                \x3ca class\x3d"c-ppl-card-anchor tertiary-link-v1 txt-clr-g1" target\x3d"{{this.target}}" href\x3d"{{this.link}}"\x3e\n                  \x3cdiv class\x3d"c-cards-people__card-container"\x3e\n                    \x3cpicture\x3e\n                      \x3csource srcset\x3d"{{this.bioHeadshot.large}} 1x, {{this.bioHeadshot.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n                      \x3csource srcset\x3d"{{this.bioHeadshot.medium}} 1x, {{this.bioHeadshot.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n                      \x3csource srcset\x3d"{{this.bioHeadshot.small}} 1x, {{this.bioHeadshot.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n                      \x3cimg class\x3d"c-cards-people__image image-position-desktop__{{this.desktopImageCrop}} image-position-mobile__{{this.mobileImageCrop}}" src\x3d"{{this.bioHeadshot.default}}" alt\x3d"{{this.headshotAltText}}"/\x3e\n                    \x3c/picture\x3e\n\n                    \x3cdiv class\x3d"c-cards-people__content"\x3e\n                      \x3ch2 class\x3d"c-cards-people__name family-serif fw-v2 fz-v9 lh-v11 fz-v11-md lh-v14-md"\x3e\n                        {{ this.title }}\n                      \x3c/h2\x3e\n\n                      \x3cp class\x3d"family-sans fw-v2 fz-v6 lh-v6 fz-v7-md lh-v8-md c-cards-people__title txt-clr-g1"\x3e\n                        {{ this.jobTitle }}\n                      \x3c/p\x3e\n                    \x3c/div\x3e\n                  \x3c/div\x3e\n                \x3c/a\x3e\n              \x3c/div\x3e\n            {{/each}}'};
e.prototype.render=function(d,b){void 0===b&&(b=this.categoryWiseData[d]);var c=a("#"+b.componentuniqueid),g=c.find(this.featureResultContainer);d=c.find(this.nonFeatureResultContainer);c=c.find(this.noResultContainer);d.find(this.showMore).addClass("hide");if(b.featureData&&b.featureData.length){var h=Handlebars.compile(this.handlebarTemplate("featureData"))(b);g.find(".c-cards-people").html(h).end().removeClass("hide")}else g.addClass("hide");b.nonFeatureData.length?(g=Handlebars.compile(this.handlebarTemplate("nonFeatureData"))(b),
d.find(".c-cards-people").html(g).end().removeClass("hide"),d.find(".c-cards-people").children().slice(this.loadMoreItems).addClass("hide"),b.nonFeatureData.length>this.loadMoreItems&&d.find(this.showMore).removeClass("hide")):d.addClass("hide");c.addClass("hide");"undefined"!==typeof b.featureData||b.nonFeatureData.length||c.removeClass("hide")};e.prototype.initializeHandler=function(){var d=this;window.addEventListener("popstate",function(){if(f.getParameterByName("people_compId"))d.getQueryString()&&
(g=a(d.componentWraper).eq(0).data("categoryToDisplay"),h=a(d.componentWraper).eq(0).data("showFeatured"),b=a(d.componentWraper).eq(0).attr("id"),a("#"+b).find(d.searchInput).val(""),d.processData(d.pplData[b],g,h),a("#"+b).find(".result-container-nonfeature").find(d.singleResultHeader).addClass("hideContent"),a("#"+b).find(".result-container-nonfeature").find(d.multiResultHeader).addClass("hideContent"),a("#"+b).find(".result-container-nonfeature").find(d.nonFeatureHeader).removeClass("hideContent"));
else{var b=a(d.componentWraper).filter(":visible"),c=b.attr("id"),g=b.data("categoryToDisplay"),h=b.data("showFeatured");d.pageLoad=!0;a("#"+c).find("select.pplSortBy").val("");a("#"+c).find(".selectpicker").selectpicker("render");d.processData(d.pplData[c],g,h);b.find(".result-container-nonfeature").find(d.singleResultHeader).addClass("hideContent");b.find(".result-container-nonfeature").find(d.multiResultHeader).addClass("hideContent");b.find(".result-container-nonfeature").find(d.nonFeatureHeader).removeClass("hideContent");
d.pageLoad=!1}});a(this.searchIcon).on("click",function(b){b.preventDefault();a(b.currentTarget).closest(d.searchForm).trigger("submit")});a(this.clearSearchIcon).on("click",function(b){b.preventDefault();a(d.searchInput).val("");var c=a(b.target).closest(d.componentWraper),g=c.data("componentuniqueid"),h=f.updateQueryString("people_q","");a("#"+g).find("select.pplSortBy").val("");a("#"+g).find(".selectpicker").selectpicker("render");h=f.updateQueryString("people_sort","",h);h=f.updateQueryString("people_compId",
g,h);f.updateURL(h);a(b.target).addClass("hideContent");c.find(d.searchIcon).removeClass("hideContent");b=d.getComponentId(a(b.target));g=Object.assign({},d.categoryWiseData[b.categoryToDisplay]);c.find(d.singleResultHeader+", "+d.multiResultHeader).addClass("hideContent");c.find(d.nonFeatureHeader).removeClass("hideContent");g.featureData&&g.nonFeatureData?d.render(b.categoryToDisplay,g):d.processData(d.pplData[b.componentId],b.categoryToDisplay,b.showFeatured);c.find(".ppl-agg-sort-btn").removeClass("border-secondary")});
a(this.searchInput).on("input",function(b){b=a(b.target).closest(d.componentWraper);b.find(d.clearSearchIcon).addClass("hideContent");b.find(d.searchIcon).removeClass("hideContent")});a(this.searchForm).on("submit",function(b,c){void 0===c&&(c=!0);b.preventDefault();var g=a(b.target).closest(d.componentWraper);g.find(d.clearSearchIcon).removeClass("hideContent");g.find(d.searchIcon).addClass("hideContent");g=a(b.target).find(d.searchInput);b=d.getComponentId(g);var h=g.val(),k=new RegExp("(.*)("+
h+")(.*)","i");g={};c&&(c=f.updateQueryString("people_q",a.trim(h)),a.trim(h)||(c=f.updateQueryString("people_sort","",c)),c=f.updateQueryString("people_compId",b.componentId,c),f.updateURL(c));if(a.trim(h))g.nonFeatureData=Array.from(d.pplData[b.componentId]),g.componentuniqueid=b.componentId,g.nonFeatureData=g.nonFeatureData.filter(function(a){return k.test(a.title)||k.test(a.jobTitle)||k.test(a.jobLocation)||k.test(a.peopleTag)||k.test(a.geoLocationTag)||k.test(a.expertiseTag)}),e=g.nonFeatureData.length,
c=a("#"+b.componentId),c.find(d.nonFeatureHeader).addClass("hideContent"),1<e?(c.find(d.multiResultHeader).find(".result-count").html(e).end().removeClass("hideContent"),c.find(d.singleResultHeader).addClass("hideContent")):(c.find(d.singleResultHeader).find(".result-count").html(e).end().removeClass("hideContent"),c.find(d.multiResultHeader).addClass("hideContent")),d.setAnalytics(h,e),d.categoryWiseData[b.categoryToDisplay].searchedData=g,c=a("#"+b.componentId).find("select.pplSortBy").val(),d.alphabeticalSort(g.nonFeatureData,
c),d.render(b.categoryToDisplay,g);else{g=Object.assign({},d.categoryWiseData[b.categoryToDisplay]);var e=0;g.featureData&&g.nonFeatureData?(a("#"+b.componentId).find("select.pplSortBy").val(""),a("#"+b.componentId).find(".selectpicker").selectpicker("render"),d.alphabeticalSort(g.featureData),d.alphabeticalSort(g.nonFeatureData),d.sortByRank(b.categoryToDisplay,"featureData"),d.render(b.categoryToDisplay,g),e=g.featureData.length+g.nonFeatureData.length):(a("#"+b.componentId).find("select.pplSortBy").val(""),
a("#"+b.componentId).find(".selectpicker").selectpicker("render"),d.processData(d.pplData[b.componentId],b.categoryToDisplay,b.showFeatured),e=d.pplData[b.componentId].length);a("#"+b.componentId).find(d.singleResultHeader+", "+d.multiResultHeader).addClass("hideContent").end().find(d.nonFeatureHeader).removeClass("hideContent");d.setAnalytics(h,e);a("#"+b.componentId).find(".ppl-agg-sort-btn").removeClass("border-secondary")}});a(".morePeople").on("click",function(b){b.preventDefault();var c=a(b.target);
b=a(b.target).closest(d.componentWraper).find(d.nonFeatureResultContainer).find(".c-cards-people").children(".c-cards-people__card.hide");b.length&&b.length>=d.loadMoreItems?(b.slice(0,d.loadMoreItems).removeClass("hide"),b.length===d.loadMoreItems&&c.parent(d.showMore).addClass("hide")):(b.removeClass("hide"),c.parent(d.showMore).addClass("hide"))});a(".noResultBtn").on("click",function(b){b.preventDefault();a(b.target).closest(d.componentWraper).find(d.clearSearchIcon).trigger("click")});a("select.pplSortBy").on("change",
function(b,c){void 0===c&&(c=!0);var g=a(b.target).data("categoryToDisplay"),h=a(b.target).data("componentuniqueid"),k=a("#"+h).find(d.searchInput).val();b=a(b.target).val();var e={componentuniqueid:h};c&&(c=f.updateQueryString("people_sort",b),c=f.updateQueryString("people_compId",h,c),f.updateURL(c));a.trim(k)?e.nonFeatureData=d.categoryWiseData[g].searchedData.nonFeatureData:e.nonFeatureData=Array.from(d.pplData[h]);d.alphabeticalSort(e.nonFeatureData,b);d.render(g,e);g=a("#"+h);g.find(d.nonFeatureHeader).addClass("hideContent");
a.trim(k)&&(k=e.nonFeatureData.length,1<k?(g.find(d.multiResultHeader).find(".result-count").html(k).end().removeClass("hideContent"),g.find(d.singleResultHeader).addClass("hideContent")):(g.find(d.singleResultHeader).find(".result-count").html(k).end().removeClass("hideContent"),g.find(d.multiResultHeader).addClass("hideContent")));g.find(".ppl-agg-sort-btn").removeClass("border-secondary");g.find(".ppl-agg-sort-btn[data-value\x3d'"+b+"']").addClass("border-secondary")});a(this.componentWraper).on("click",
".filter-icon-mobile",function(b){b.preventDefault();b=a(b.target).data("componentuniqueid");a("#"+b).find(".c-ppl-agg-filter-popup").show();a("body").addClass("bodyOverflowHidden")});a(this.componentWraper).on("click",".popup-close",function(b){b.preventDefault();b=a(b.target).data("componentuniqueid");a("#"+b).find(".c-ppl-agg-filter-popup").hide();a("body").removeClass("bodyOverflowHidden")});a(this.componentWraper).on("click",".ppl-agg-sort-btn",function(b){b.preventDefault();b=a(b.target);var c=
b.data("componentuniqueid"),g=b.data("value");a("#"+c).find(".ppl-agg-sort-btn").removeClass("border-secondary");b.addClass("border-secondary");a("#"+c).find(".popup-close").trigger("click");a("#"+c).find(".selectpicker").selectpicker("val",g)})};e.prototype.setAnalytics=function(a,b){f.setAnalyticsByPage({event_name:"asset_search",event_action:a?a:"undefined",event_category:b,search_term:a?a:"undefined",search_type:"people",num_search_results:b},!0)};return e}())}($,TNC.Utility);
this.TNC=this.TNC||{};
this.TNC.LocationMenuNavigation=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;a(window).on("scroll",function(){a(".c-location-menu").each(function(d,b){d=a(b);b=d.offset().top;var c=d.find(".c-location-menu__header").outerHeight(),g=d.find(".c-location-menu__locations").outerHeight(),h=a(window).scrollTop(),k=d.find(".c-location-menu__link").attr("data-expand-text");h>=b?(d.find(".c-location-menu__header").addClass("fixed border-primary standard-width-inner"),
d.css({"padding-top":parseInt(c)}),d.offset().top+d.outerHeight()-c<=h&&(d.find(".c-location-menu__link").hasClass("active")?d.css("margin-bottom",parseInt(g)+"px"):d.css({"margin-bottom":0}),d.find(".c-location-menu__locations").hide(),d.find(".c-location-menu__link").removeClass("active").attr("title",k))):(d.find(".c-location-menu__header").removeClass("fixed border-primary standard-width-inner"),d.css({"padding-top":0,"margin-bottom":0}))})});a(".toggleAccordion").on("click",function(a){a.preventDefault();
e.toggleHandler(a)})};f.prototype.toggleHandler=function(e){a(e.target).parents(".c-location-menu__header").hasClass("fixed")&&a(window).scrollTop(a(e.target).parents(".c-location-menu").offset().top);var d=a(e.target).data("toggleContent");d=a("#"+d);var b=a(e.target).attr("data-expand-text"),c=a(e.target).attr("data-collapse-text");a(e.target).hasClass("active")?(d.slideUp({duration:700,easing:"easeInOutQuart"}),a(e.target).attr("title",b)):(d.slideDown({duration:700,easing:"easeInOutQuart"}),a(e.target).attr("title",
c));a(e.target).toggleClass("active")};return f}())}($);this.TNC=this.TNC||{};this.TNC.VisualDownload=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.BiographyOverview=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;a(".accordion_title").on("click",function(a){e.toggleAccordion(a)});a(window).on("resize",function(){window.screen.height<window.screen.width&&1023<window.screen.width&&(a(".contact-wrapper").css("display",""),a(".contact-toggle").removeClass("toggle-on"))})};f.prototype.toggleAccordion=function(e){e=a(e.currentTarget);
e=a(e).find(".contact-toggle");e.toggleClass("toggle-on");var d=a(e).attr("data-componentuniqueid");e.hasClass("toggle-on")?a("#"+d).find(".contact-wrapper").slideDown(700,"easeInOutQuart"):a("#"+d).find(".contact-wrapper").slideUp(700,"easeInOutQuart")};return f}())}($);this.TNC=this.TNC||{};this.TNC.HeroImage=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.Map=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;0<a(".c-map").length&&a(".c-map").each(function(){var d=[],b=a(this).find(".map-canvas"),c=e.getMapType(a(this));a(this).find(".info-window-wrapper").children().each(function(c,b){a(b).hasClass("info-window-template")&&(c=[a(b).data("lat"),a(b).data("lag"),a(b).html()],d.push(c))});e.callMapInit(b,d,c)})};f.prototype.getMapType=
function(a){return a.hasClass("generic")?"generic":a.hasClass("complexGeneric")?"generic":a.hasClass("advanced")?"advanced":a.hasClass("preserve")?"preserve":!1};f.prototype.callMapInit=function(a,d,b){if("generic"===b)this.initMapGeneric(a,d);else if("advanced"===b)this.initMapKmz(a,d);else if("preserve"===b)this.initMapGeneric(a,d);else return!1};f.prototype.initMapGeneric=function(a,d){a=new google.maps.Map(a[0],{zoom:0,maxZoom:11,center:{lat:38.882628,lng:-77.112312}});this.setMarkers(a,d)};f.prototype.initMapKmz=
function(e,d){if(d=a(a(d[0][2])).val())e=new google.maps.Map(e[0],{zoom:0,maxZoom:11,center:{lat:38.882628,lng:-77.112312}}),new google.maps.KmlLayer({url:d,map:e})};f.prototype.setMarkers=function(e,d){for(var b={url:"/etc/designs/clientlibs/tnc/assets/icons/icon-map-marker.png",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,20)},c=new google.maps.InfoWindow({maxWidth:310}),g=new google.maps.LatLngBounds,h=0;h<d.length;h++)(function(a){var d=
new google.maps.Marker({animation:google.maps.Animation.DROP,icon:b,map:e,template:a[2],zIndex:1,position:{lat:Number(a[0]),lng:Number(a[1])}});a=new google.maps.LatLng(Number(a[0]),Number(a[1]));g.extend(a);google.maps.event.addDomListener(d,"click",function(){c.close();c.setContent(d.template);c.open(e,d)})})(d[h]);e.fitBounds(g);e.panToBounds(g);var k=a("input[name\x3d'preservezoom']").val();if(k)var m=google.maps.event.addListener(e,"idle",function(){e.setZoom(Number(k));google.maps.event.removeListener(m)});
else 17<=e.getZoom()&&e.setZoom(11)};return f}())}($);this.TNC=this.TNC||{};
this.TNC.ArticleHero=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){var e=this;setTimeout(function(){e.rerenderComponent()},100);a(window).resize(function(){e.rerenderComponent()})};f.prototype.rerenderComponent=function(){var e=a(".c-article-hero.inline"),d=a(".c-hero-image");e.length&&d.length&&e.each(function(b,c){var g=a(c).find(".c-article-hero__inner");b=a(c).find(".c-hero-image img");c=a(c);
g=g.outerHeight();var d=b.height();g>d?(c.addClass("large-text-block"),c.css("background-image","url("+b.get(0).currentSrc+")")):c.removeClass("large-text-block")})};return f}())}($);this.TNC=this.TNC||{};
this.TNC.AuthorSidebar=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){a(".c-author__more").on("click",function(e){e.preventDefault();e=a(e.currentTarget).attr("href");a("html,body").animate({scrollTop:a(e).offset().top},800)})};return f}())}($);this.TNC=this.TNC||{};this.TNC.AuthorBottom=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();
this.TNC=this.TNC||{};
this.TNC.HeroCarousel=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){0!==a(".carousel.c-hero-carousel").length&&this.initialize()}f.prototype.initialize=function(){var e=a('input[name\x3d"carouselLength"]').val(),d=a(".carousel.c-hero-carousel");d.flickity({draggable:!1,wrapAround:!0,pauseAutoPlayOnHover:!0,pageDots:!0,autoPlay:6E3,prevNextButtons:!0});"1"===e&&a(".carousel.c-hero-carousel").addClass("disableNavIcons");a("body").on("click",function(){d.flickity("playPlayer")});
a(".default-hero-carousel").find(".c-hero-image.c-hero-carousel").on("click",function(b){a(b.target).hasClass("c-cta-carousel")||(b.preventDefault(),b.stopPropagation())});a(".triggerModal").on("click",function(a){a.preventDefault();a.stopPropagation()});d.flickity("resize")};return f}())}($);this.TNC=this.TNC||{};
this.TNC.ScaComponent=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){console.log(a)};return f}())}($);this.TNC=this.TNC||{};
this.TNC.ArticleGallery=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){0!==a(".c-article-gallery .carousel").length&&this.initialize()}f.prototype.initialize=function(){var e=a(".c-article-gallery .carousel");e.flickity({arrowShape:{x0:10,x1:60,y1:50,x2:75,y2:35,x3:40},pageDots:!1,wrapAround:!1});setTimeout(function(){e.flickity("resize")},100);e.attr("tabindex","-1");e.on("keydown",this.galleryKeyPress.bind(this))};f.prototype.focusOnVisibleLink=function(){a(".c-article-gallery__cell.is-selected").find(".c-article-gallery__caption a").focus()};
f.prototype.galleryKeyPress=function(e){e=e.key;"ArrowRight"===e?(e=a(".flickity-prev-next-button.next"),e.focus(),e.click(),this.focusOnVisibleLink()):"ArrowLeft"===e&&(e=a(".flickity-prev-next-button.previous"),e.focus(),e.click(),this.focusOnVisibleLink())};return f}())}($);this.TNC=this.TNC||{};
this.TNC.HomepageHero=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.smallScreenWidth=640;this.initialize();this.applyThemingClasses()}f.prototype.initialize=function(){if(a(".c-hero-carousel").length){var e=a(".carousel.c-hero-carousel");e.flickity({wrapAround:!0,pauseAutoPlayOnHover:!0,autoPlay:!0});e.find("video").each(function(a,b){b.play()});e.on("settle.flickity",function(){e.find("video").each(function(a,b){b.pause()});e.find(".is-selected video").each(function(a,
b){b.play()})});a(window).resize(this.applyThemingClasses.bind(this));e.flickity("resize")}};f.prototype.applyThemingClasses=function(){a(window).width()<this.smallScreenWidth?(a(".c-hero-carousel__title").removeClass("txt-clr-alt").addClass("txt-clr-g1"),a(".c-hero-carousel__sub-title").removeClass("txt-clr-alt").addClass("txt-clr-g2")):(a(".c-hero-carousel__title").removeClass("txt-clr-g1").addClass("txt-clr-alt"),a(".c-hero-carousel__sub-title").removeClass("txt-clr-g2").addClass("txt-clr-alt"))};
return f}())}($);this.TNC=this.TNC||{};
this.TNC.AlertBanner=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){var d=this;if(window.localeInterstitialShown)a(document).on("hide-localeInterstitial",function(){d.initialize()});else this.initialize()}e.prototype.initialize=function(){var d=a(".c-alert-banner").data("componentuniqueid"),b=(new Date(a("#"+d).data("start-date-time"))).getTime(),c=(new Date(a("#"+d).data("end-date-time"))).getTime(),
g=(new Date).getTime(),h=a(".c-button-close"),k="hideAlert-"+d,e=24>Math.round(new Date(c-b)/36E5)?!0:!1;h.on("click",this.hideAlertBanner.bind(this,k));h.on("keypress",function(a,c){"Enter"===a.key&&this.hideAlertBanner.bind(this,c)});a(document).on("show-localeInterstitial",function(){a("#"+d).hide()});window.localeInterstitialShown||(g>b&&g<c&&(0!==a(".edit-mode-alert-banner").length||f.getSession(k)&&"closed"!==f.getSession(k))?a("#"+d).show():e&&g<c?a("#"+d).show():a("#"+d).hide());window.log(f.getSession("Alertbanner"))};
e.prototype.hideAlertBanner=function(d){a(".c-alert-banner").css("display","none");f.setSession(d,"closed")};return e}())}($,TNC.BrowserStorage);this.TNC=this.TNC||{};this.TNC.HeaderMegamenu=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.Header=function(a,f,e,d){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;d=d&&d.hasOwnProperty("default")?d["default"]:d;return new (function(){function b(){this.suggestionQueue=null;this.locationFlag=!0;a(".cd-primary-nav").removeClass("hide");this.initialize()}b.prototype.initialize=function(){this.readBtnsCookies();this.moveNavigation();this.registerEventHandler();this.registerEventHandlerMobile();
this.getGeolocation();this.getBrowserLocale()};b.prototype.is_touch_device=function(){return"ontouchstart"in window||0<navigator.maxTouchPoints};b.prototype.getGeolocation=function(){var c=this;if(!a(".cd-main-header").length)return!1;"yes"!==a(".cd-main-header").data("disableGeoService")&&d.checkGeolocation().then(function(b){c.personalizeMembershipBtns(b);var g=a.trim(a(".cd-main-header").find(".geolocationdatastr").text());g&&(g=JSON.parse(g),c.renderGeoLocationNav(b,g))})};b.prototype.personalizeMembershipBtns=
function(c){var b=c.response["edge-two-letter-country"]?a.trim(c.response["edge-two-letter-country"].toLowerCase()):"";a(".cd-main-header [data-country-blacklist]").each(function(){var c=a(this).data("countryBlacklist");c=c?c.split(","):[];for(var g=!0,d=0;d<c.length;d++)if(a.trim(c[d])===b){g=!1;break}g||a(this).remove()})};b.prototype.renderGeoLocationNav=function(c,b){var g=c.response["edge-country"].toLowerCase(),d=c.response["edge-region"].toLowerCase(),e=a(".geoLocationEnabled-true");a.each(b,
function(a,c){if("usa"===g||"can"===g){if(c.geoLocationStateCode&&-1<c.geoLocationStateCode.indexOf(d))return e.prepend('\x3cli\x3e\x3ca href\x3d"'+c.geoNavLink+'" target\x3d"'+c.geoNavTarget+'" class\x3d"current-location icon-locator txt-clr-g1 txt-clr-p4-hover"\x3eLocal: '+c.geoNavTitle+"\x3c/a\x3e\x3c/li\x3e"),!1}else if(c.geoLocationCountryCode&&-1<c.geoLocationCountryCode.indexOf(g))return e.prepend('\x3cli\x3e\x3ca href\x3d"'+c.geoNavLink+'" target\x3d"'+c.geoNavTarget+'" class\x3d"current-location icon-locator txt-clr-g1 txt-clr-p4-hover"\x3eLocal: '+
c.geoNavTitle+"\x3c/a\x3e\x3c/li\x3e"),!1})};b.prototype.setAnalytics=function(c){var b=a(c.target),h=[];for(c=window.location.hostname;!b.hasClass("cd-primary-nav");){if(b.is("li")){var k=a(b).children("a");h.push(k.text())}b=b.parent()}b=a.trim(h.reverse().join(".")).toString().toLowerCase();b=b.replace(/ /g,"_");d.setAnalyticsByPage({event_name:"top_nav_click",nav_click_location:c+".tnav."+b},!0)};b.prototype.setAnalyticsByLng=function(a){d.setAnalyticsByPage({event_name:"select_language",selected_language:a},
!0)};b.prototype.registerEventHandler=function(){var c=this,b=this;a(".search-form").on("submit",function(c){c.preventDefault();a(".search-button-header").trigger("click")});a(window).on("resize",function(){window.requestAnimationFrame?window.requestAnimationFrame(c.moveNavigation.bind(c)):setTimeout(c.moveNavigation,300);c.setSearchPosition()});a(".cd-search-trigger").on("click",function(a){a.preventDefault();c.toggleSearch();c.closeNav()});a(".cd-overlay").on("click",function(){c.closeNav();c.toggleSearch("close")});
a(".cd-secondary-nav").find("a").on("click",function(a){c.setAnalytics(a)});a(".cd-primary-nav").children(".has-children.mainNav").children("a").on("focus",function(b){b=a(b.currentTarget).parent();!d.checkWindowWidth()||c.is_touch_device()&&b.children(".link-submenu").length||!b.children("ul").hasClass("is-hidden")||(b.children("a").addClass("selected").next("ul").removeClass("is-hidden").end().end().parent("ul").addClass("moves-out"),b.siblings(".has-children").children("ul").addClass("is-hidden").end().children("a").removeClass("selected"),
a(".cd-overlay").addClass("is-visible"))});a(".cd-search-trigger").on("focus",function(){a(".cd-secondary-nav").removeClass("selected").addClass("is-hidden").end().end().parent("ul").removeClass("moves-out");a(".cd-overlay").removeClass("is-visible")});a(".cd-primary-nav").children(".has-children").children("a").on("click",function(b){if(!a(b.target).hasClass("link-submenu")||!d.checkWindowWidth()||c.is_touch_device()){b.preventDefault();var g=a(b.target);a(".has-promo-mobile").hide();d.checkWindowWidth()||
(g.addClass("selected").next("ul").removeClass("is-hidden").end().parent(".has-children").parent("ul").addClass("moves-out"),g.parent(".has-children").siblings(".has-children").children("ul").addClass("is-hidden").end().children("a").removeClass("selected"),a(".cd-overlay").addClass("is-visible"))}c.setAnalytics(b)});a(".cd-nav .cd-primary-nav \x3e .has-children.mainNav").on("touch click",function(b){b=a(b.currentTarget);d.checkWindowWidth()&&(b.children("ul").hasClass("is-hidden")?(b.children("a").addClass("selected").next("ul").removeClass("is-hidden").end().end().parent("ul").addClass("moves-out"),
b.siblings(".has-children").children("ul").addClass("is-hidden").end().children("a").removeClass("selected"),a(".cd-overlay").addClass("is-visible")):(b.children("a").removeClass("selected").next("ul").addClass("is-hidden").end().end().parent("ul").removeClass("moves-out"),a(".cd-overlay").removeClass("is-visible")),c.toggleSearch("close"))});a(".cd-nav .cd-primary-nav \x3e .has-children.mainNav").hover(function(b){b=a(b.currentTarget);!d.checkWindowWidth()||c.is_touch_device()&&b.children(".link-submenu").length||
!b.children("ul").hasClass("is-hidden")||(b.children("a").addClass("selected").next("ul").removeClass("is-hidden").end().end().parent("ul").addClass("moves-out"),b.siblings(".has-children").children("ul").addClass("is-hidden").end().children("a").removeClass("selected"),a(".cd-overlay").addClass("is-visible"))},function(c){d.checkWindowWidth()&&(a(c.currentTarget).children("a").removeClass("selected").next("ul").addClass("is-hidden").end().end().parent("ul").removeClass("moves-out"),a(".cd-overlay").removeClass("is-visible"))});
a(".searchBoxHeader").on("input",function(a){3<=a.target.value.length?c.triggerAutoSuggest(a.target):c.abortAutoSuggestion()});a(".srchSuggestionsHeader").on("click",".suggestionItemsHeader",function(b){var g=a(b.target).text();a(".searchBoxHeader").val(g);a(".search-button-header").trigger("click");c.acceptSuggestion(b)});a(".search-button-header").on("click",function(b){b.preventDefault();var g=a(".searchBoxHeader").val();if(!a.trim(g))return!1;b=a(b.target).data("search-page");c.locationFlag&&
(window.location.href=b+"?q\x3d"+g)});a(".searchBoxHeader").on("keydown",this.searchFieldKeyPress.bind(this));var h=a(".language-selector ul.ls-list-options");a("#js-language-selected").on("click",function(a){a.stopPropagation();h.toggleClass("hide")});h.on("click","a",function(){h.addClass("hide")});a("body").click(function(){h.addClass("hide")});a(".language-selector .ls-list-options a, .language-selector-mobile .cd-secondary-nav a").on("click touchend",function(){var c=a(this).attr("data-code");
b.setAnalyticsByLng(c?c:"undefined")})};b.prototype.acceptSuggestion=function(c){c=a(c.target).text();a(".searchBoxHeader").val(c);a(".srchSuggestionsHeader").hide();a(".search-button-header").trigger("click")};b.prototype.searchFieldKeyPress=function(c){var b=c.key,d=a(".srchSuggestionsHeader li");if(0<d.length&&a(".srchSuggestionsHeader").is(":visible"))for(var k=0;k<d.length;k++)a(d[k]).on("keydown",this.searchSuggestionKeyPress.bind(this));"ArrowDown"===b&&(c.preventDefault(),0<d.length&&a(".srchSuggestionsHeader").is(":visible")&&
d.first().focus())};b.prototype.searchSuggestionKeyPress=function(c){var b=c.key,d=c.target;"ArrowDown"===b?(c.preventDefault(),(c=a(d).next())&&c.focus()):"ArrowUp"===b?(c.preventDefault(),c=a(d).prev(),0<c.length?c.focus():a(".searchBoxHeader").focus()):"Enter"===b&&this.acceptSuggestion(c)};b.prototype.registerEventHandlerMobile=function(){var c=this;a(".cd-nav-trigger").on("click",function(b){b.preventDefault();a(".cd-main-content").hasClass("nav-is-visible")?c.closeNav():(a(".has-promo-mobile").show(),
a(b.currentTarget).addClass("nav-is-visible"),setTimeout(function(){a(".cd-primary-nav").addClass("nav-is-visible");a(".cd-main-header").addClass("nav-is-visible");a("html, body").addClass("overflow-hidden");a(".cd-overlay").addClass("is-visible");a(".cd-main-content").addClass("nav-is-visible");c.toggleSearch("close")},100))});a(".cd-overlay").on("swiperight",function(){a(".cd-primary-nav").hasClass("nav-is-visible")&&c.closeNav()});a(".nav-on-left .cd-overlay").on("swipeleft",function(){a(".cd-primary-nav").hasClass("nav-is-visible")&&
c.closeNav()});a(".go-back").on("click",function(c){a(".has-promo-mobile").show();a(c.currentTarget).parent("ul").addClass("is-hidden").parent(".has-children").parent("ul").removeClass("moves-out")})};b.prototype.readBtnsCookies=function(){"true"===(f?f.getCookie("per_monthlybutton"):!1)?a(".membershipBtns.membershipBtns3").removeClass("membershipBtns3"):a(".membershipBtns.membershipBtns2").removeClass("membershipBtns2")};b.prototype.moveNavigation=function(){var c=a(".cd-nav");d.checkWindowWidth()?
(c.detach(),c.insertBefore(".cd-header-buttons")):(c.detach(),c.insertAfter(".cd-main-content"))};b.prototype.closeNav=function(){a(".cd-nav-trigger").removeClass("nav-is-visible");setTimeout(function(){a(".cd-main-header").removeClass("nav-is-visible");a(".cd-primary-nav").removeClass("nav-is-visible");a(".cd-overlay").removeClass("is-visible");a(".has-children ul").addClass("is-hidden");a(".has-children a").removeClass("selected");a(".moves-out").removeClass("moves-out");a("html, body").removeClass("overflow-hidden");
a(".cd-main-content").removeClass("nav-is-visible");d.checkWindowWidth()||(a(".cd-primary-nav").scrollTop(0),a(".cd-secondary-nav").scrollTop(0))},100)};b.prototype.toggleSearch=function(c){a(".cd-search-trigger").hasClass("search-is-visible")&&this.resetSearch();"close"===c||a(".cd-search").hasClass("is-visible")?(a(".cd-search").removeClass("is-visible").find(".searchBoxHeader").removeClass("border-primary"),a(".cd-search-trigger").removeClass("search-is-visible"),a(".cd-overlay").removeClass("search-is-visible"),
a(".cd-main-header").removeClass("search-visible")):(this.setSearchPosition(),a(".cd-search").addClass("is-visible").show().find(".searchBoxHeader").addClass("border-primary"),a(".cd-search-trigger").addClass("search-is-visible"),a(".cd-overlay").addClass("search-is-visible"),a(".searchBoxHeader").focus(),a(".cd-main-header").addClass("search-visible"))};b.prototype.setSearchPosition=function(){var c=a(".c-alert-banner").css("display");if("none"===c||void 0===c){c=a(".cd-main-header").outerHeight();
var b=a(".cd-main-header").css("margin-top");void 0!==b?(b=b.split("px"),b=parseInt(b[0]),a(".cd-search").css("top",c+b)):a(".cd-search").css("top",c)}else{var d=a(".c-alert-banner").outerHeight();c=a(".cd-main-header").outerHeight();b=a(".cd-main-header").css("margin-top");b=b.split("px");b=parseInt(b[0]);a(".cd-search").css("top",d+c+b)}};b.prototype.resetSearch=function(){a(".search-form .c-field__input").val("");a(".auto-complete").hide()};b.prototype.triggerAutoSuggest=function(c){var b=this;
c={contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",url:a(c).data("sugesstionApi"),data:{q:a(c).val(),suggester:"tnc_suggestor",size:6}};this.abortAutoSuggestion();e.initXHR(c).then(function(a,c,d){return b.renderAutoSuggest(a,d)})};b.prototype.abortAutoSuggestion=function(){null!==this.suggestionQueue&&(this.suggestionQueue.abort(),this.suggestionQueue=null,a(".srchSuggestionsHeader").hide())};b.prototype.renderAutoSuggest=function(c,b){this.suggestionQueue=b;c.suggest.found&&(c=
Handlebars.compile('{{#each suggest.suggestions}}\n            \x3cli class\x3d"c-field__input fz-v6 suggestionItemsHeader"\n                tabindex\x3d"0"\x3e{{this.suggestion}}\x3c/li\x3e\n            {{/each}}')(c),a(".srchSuggestionsHeader").html(c).show())};b.prototype.getBrowserLocale=function(){d.checkBrowserLocale()};return b}())}($,TNC.BrowserStorage,TNC.XHR,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.HomepageFeature=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=this;this.$homeSignup=a(".c-homepage-signup");this.emailInput=this.$homeSignup.find(".c-field__input");this.signupSubmit=this.$homeSignup.find(".signup-submit");this.emailInput.on("keyup",function(a){13===a.keyCode&&d.validateEmail.bind(d)});this.signupSubmit.on("click",this.validateEmail.bind(this));
a(".error__msg").css("display","none");a(".i-error").css("display","none")};e.prototype.validateEmail=function(d){var b=a(d.target).closest("form").attr("data-componentuniqueid"),c=this.$homeSignup.find(".c-field__input").closest('[data-componentuniqueid\x3d"'+b+'"]');/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(c.val())?(d={event_name:"email_signup",event_action:"sign_up_form",email_signup_location:"sign_up_form"},f.setAnalyticsByPage(d,!0),this.$homeSignup.find(".error__msg").closest("[data-componentuniqueid\x3d'"+
b+"']").css("display","none"),this.$homeSignup.find(".i-error").closest("[data-componentuniqueid\x3d'"+b+"']").css("display","none")):(d.preventDefault(),a(".error__msg").closest("[data-componentuniqueid\x3d'"+b+"']").css("display","block"),a(".i-error").closest("[data-componentuniqueid\x3d'"+b+"']").css("display","block"),d={event_name:"submit_error",event_action:"sign_up_form",email_signup_location:"sign_up_form"},f.setAnalyticsByPage(d,!0))};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.Timeline=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){0!==a(".c-timeline__wrapper .carousel-nav").length&&this.initialize()}f.prototype.initialize=function(){a(".c-timeline__wrapper .carousel-nav").flickity({contain:!0,prevNextButtons:!1,pageDots:!1});a(".c-timeline__wrapper .carousel-main").flickity({pageDots:!1,cellAlign:"left",contain:!0,freeScroll:!0,prevNextButtons:!0}).on("select.flickity",function(e){e=a(e.target);var d=e.closest(".c-timeline__wrapper"),
b=e.data("flickity");d=d.find(".carousel-nav").find(".carousel-cell");e=e.find(".carousel-cell").eq(b.selectedIndex).data("navTitle");d.filter(".is-nav-selected").removeClass("is-nav-selected border-secondary");d.filter('[data-nav\x3d"'+e+'"]').addClass("is-nav-selected border-secondary")});a(".carousel-nav").on("click",".carousel-cell",function(e){var d=a(e.target);e=d.data("nav");d=d.closest(".c-timeline__wrapper").find(".carousel-main");e=d.find(".carousel-cell").filter('[data-nav-title\x3d"'+
e+'"]').eq(0).index();d.flickity("select",e)})};return f}())}($);this.TNC=this.TNC||{};this.TNC.FeaturedContentInitiatives=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};this.TNC.FeaturedNumberList=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.PreserveLocator=function(a,f){function e(b,c,d){if(!b)throw Error("Location undefined");var g=this;g.location=b;g.marker=c;g.options=d;c="closed to the public"!==a.trim(b.preserveStatus).toLowerCase();g.template='\x3cdiv class\x3d"map-tooltip"\x3e\n        \x3cdiv class\x3d"map-tooltip__image"\x3e\n            \x3cimg src\x3d"'+b.markerImage.small+'" alt\x3d"'+b.markerImageAlt+'"\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"map-tooltip__content"\x3e\n            \x3cdiv class\x3d"map-tooltip__title"\x3e'+
b.markerTitle+"\x3c/div\x3e\n            "+(b.locationTitle?'\x3cdiv class\x3d"map-tooltip__subtitle"\x3e'+b.locationTitle+"\x3c/div\x3e":"")+'\n            \x3cdiv class\x3d"map-tooltip__desc"\x3e'+(b.markerShortDescription?b.markerShortDescription:"")+'\x3c/div\x3e\n            \x3cdiv class\x3d"map-tooltip__cta"\x3e\n                \x3ca href\x3d"'+b.ctaLink+'"\x3e'+d.ctatitle+"\x3c/a\x3e\n                "+(c?'\x3ca href\x3d"https://www.google.com/maps/dir/'+b.markerLatitude+","+b.markerLongitude+
'" target\x3d"_blank"\x3e'+d.markergetdirectionstitle+"\x3c/a\x3e":"")+'\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cbutton class\x3d"map-tooltip__close-btn"\x3e\x26times;\x3c/button\x3e\n    \x3c/div\x3e';g.$template=a(g.template);g.templateElem=g.$template.get(0);g.$template.find(".map-tooltip__close-btn").click(function(){g.setMap(null)});google.maps.OverlayView.preventMapHitsAndGesturesFrom(g.templateElem);return g}a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?
f["default"]:f;var d=function(){function b(a,b){this.elem=a;this.options=b;this.initialize()}b.prototype.initialize=function(){var c=a.trim(a("#js-json-value").text());this.locationset=c?JSON.parse(c):{};this.isMarkerClicked=!1;this.map;this.geocoder;this.timerMouseOut;this.listenerMouseout;this.searchLatLng;this.markers=[];this.filterMapItems=[];this.tags=[];this.noOfItemsPerPage=Number(this.locationset.paginationCount);this.closestPlacesRadius=this.myGeoLocationRadius=500;this.showWorldMap=this.isFilterApplyEvent=
this.isSearchEvent=!1;this.currentMarker;this.currentLocation;this.pinTypes=this.locationset.pinTypes;this.defaultPin="/etc/designs/clientlibs/tnc/assets/icons/icon-map-marker.svg";this.openInactivePin=this.locationset.openInactivePin?this.locationset.openInactivePin:this.defaultPin;this.openHighlightPin=this.locationset.openHighlightPin?this.locationset.openHighlightPin:this.defaultPin;this.openSelectedPin=this.locationset.openSelectedPin?this.locationset.openSelectedPin:this.defaultPin;this.limitedInactivePin=
this.locationset.limitedInactivePin?this.locationset.limitedInactivePin:this.defaultPin;this.limitedHighlightPin=this.locationset.limitedHighlightPin?this.locationset.limitedHighlightPin:this.defaultPin;this.limitedSelectedPin=this.locationset.limitedSelectedPin?this.locationset.limitedSelectedPin:this.defaultPin;this.closedInactivePin=this.locationset.closedInactivePin?this.locationset.closedInactivePin:this.defaultPin;this.closedHighlightPin=this.locationset.closedHighlightPin?this.locationset.closedHighlightPin:
this.defaultPin;this.closedSelectedPin=this.locationset.closedSelectedPin?this.locationset.closedSelectedPin:this.defaultPin;this.taxonomyList=this.locationset.taxonomyList;this.errorClosestRange=this.locationset.closestRangeError;this.errorNotFoundFilter=this.locationset.notFoundFilterError;this.errorNotFound=this.locationset.notFoundError;this.$el=a(this.elem);this.$mapCanvas=a(this.elem).find(".c-preserve-locator__map-canvas");this.$error=this.$el.find(".c-field__error-text");this.$pagination=
this.$el.find("#js-pagination-wrapper");this.$searchquery=this.$el.find("#js-searchquery");this.$detailModal=this.$el.find(".preserveModal");this.$iconLegend=this.$el.find(".c-preserve-locator-legendWrapper");this.$filterCounter=this.$el.find(".c-preserve-locator__filter-counter");a(document).on("touchstart",function(a){a=(a.touches||a.originalEvent.touches)[0];b=a.clientX;d=a.clientY});a(document).on("touchmove",function(c){if(b&&d){var g=c.touches||c.originalEvent.touches,h=b-g[0].clientX;g=d-g[0].clientY;
Math.abs(h)>Math.abs(g)?0<h?a(c.target).trigger("left.swipe"):a(c.target).trigger("right.swipe"):0<g?a(c.target).trigger("up.swipe"):a(c.target).trigger("down.swipe");d=b=null}});var b=null,d=null;a.isEmptyObject(this.locationset)||(this.initMap(),this.renderIconLegend(),this.renderFilterView(),this.events())};b.prototype.events=function(){var c=this;this.$searchquery.keypress(function(a){13===a.which&&(c.isSearchEvent=!0,c.searchByGeocode(null,null))});this.$el.find("#js-search-preserves").on("click",
function(a){a.preventDefault();c.isSearchEvent=!0;c.searchByGeocode(null,null)});this.$el.find(".c-preserve-locator__results-toggle").on("click",function(){c.$el.find(".c-preserve-locator__results-panel").toggleClass("is-open")});this.$el.find(".c-preserve-locator__results-header").on("up.swipe",function(){c.$el.find(".c-preserve-locator__results-panel").addClass("is-open")}).on("down.swipe",function(){c.$el.find(".c-preserve-locator__results-panel").removeClass("is-open")});this.$el.find("#js-filter-toggle").on("click",
function(a){a.preventDefault();c.$el.find(".c-preserve-locator__filters").hasClass("is-open")?c.closeFilters():c.openFilters()});this.$el.find("#js-apply-filter").on("click",function(a){a.preventDefault();c.closeFilters();c.isFilterApplyEvent=!0;c.getSelectedFilter()});this.$el.find("#js-pl-filter-close").on("click",function(a){a.preventDefault();c.closeFilters()});this.$el.find("#js-clear-filter").on("click",function(b){b.preventDefault();a("#js-filter-list li input:checked").each(function(){a(this).prop("checked",
!1)});a(".filter-list.by-access li input").each(function(){a(this).prop("disabled",!1);a(this).prop("checked",!1)});c.updateURL([],[]);c.getSelectedFilter();c.setFilters(c.tags)});this.$el.find("#js-modal-close").on("click",function(a){a.preventDefault();c.closeModal()});a(document).on("click",function(b){b=a(b.target);b.closest(".c-preserve-locator__filters, #js-filter-toggle").length||b.is(".c-preserve-locator__filters, #js-filter-toggle")||c.closeFilters();b.closest(".preserveModal").length||b.is(".preserveModal")||
b.is(".c-preserve-locator__result-item-title a")||b.is(".map-tooltip__title")||c.isMarkerClicked||c.closeModal();c.isMarkerClicked=!1})};b.prototype.toggleBodyScrollLock=function(){var c=this.$el.find(".preserveModal"),b=this.$el.find(".c-preserve-locator__filters"),d=a("body");!c.hasClass("modal-closed")||b.hasClass("is-open")?d.addClass("pl-lock-scroll"):d.removeClass("pl-lock-scroll")};b.prototype.getDistance=function(a){return("km"===this.locationset.distanceunitlabel?a/1E3:6.21371192E-4*a).toFixed(2)};
b.prototype.getParameterByName=function(a,b){b||(b=window.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(b))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null};b.prototype.clearErrorMsgs=function(){this.$error.html("").hide()};b.prototype.initMap=function(){var a=this,b=a.getParameterByName("s"),d="yes"===a.$el.data("disableGeoService"),k={zoom:8,minZoom:1,center:new google.maps.LatLng(38.882628,-77.112312),mapTypeControl:!1,
streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},fullscreenControl:!1};a.map=new google.maps.Map(a.$mapCanvas.get(0),k);a.geocoder=new google.maps.Geocoder;d||a.createGeolocationControl();b?(a.$searchquery.val(b),a.searchByGeocode(b)):d||a.getGeolocation();a.map.addListener("bounds_changed",a.debounce(function(){a.renderMarkers(a.searchLatLng);a.renderListView(a.filterMapItems);a.setFilters(a.tags);a.getSelectedFilter()},
250));b=new google.maps.places.Autocomplete(this.$searchquery.get(0),{types:["geocode"]});b.bindTo("bounds",a.map);b.setFields(["address_components","geometry","icon","name"]);b.addListener("place_changed",function(){a.isSearchEvent=!0;a.searchByGeocode(null,null)})};b.prototype.createGeolocationControl=function(){var c=this,b=a('\x3cbutton class\x3d"c-preserve-locator__geolocation-control gmnoprint" role\x3d"button" type\x3d"button" draggable\x3d"false" title\x3d"Current Location" aria-label\x3d"Current Location"\x3e\n            \x3csvg width\x3d"51px" height\x3d"49px" viewBox\x3d"0 0 51 49" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\n            \x3cg fill\x3d"none"\x3e\n                \x3ccircle class\x3d"dot" cx\x3d"25.8908328" cy\x3d"24.5" r\x3d"4.5"\x3e\x3c/circle\x3e\n                \x3ccircle class\x3d"crosshair circle" stroke-width\x3d"3" cx\x3d"25.8908328" cy\x3d"24.5" r\x3d"9"\x3e\x3c/circle\x3e\n                \x3cpolygon class\x3d"crosshair tick" points\x3d"35.0757833 23 40.0757833 23 40.0757833 26 35.0757833 26"\x3e\x3c/polygon\x3e\n                \x3cpolygon class\x3d"crosshair tick" points\x3d"11.3908328 23 16.3908328 23 16.3908328 26 11.3908328 26"\x3e\x3c/polygon\x3e\n                \x3cpolygon class\x3d"crosshair tick" transform\x3d"translate(25.890833, 36.500000) rotate(-270.000000) translate(-25.890833, -36.500000) " points\x3d"23.3908328 35 28.3908328 35 28.3908328 38 23.3908328 38"\x3e\x3c/polygon\x3e\n                \x3cpolygon class\x3d"crosshair tick" transform\x3d"translate(25.890833, 12.500000) rotate(-270.000000) translate(-25.890833, -12.500000) " points\x3d"23.3908328 11 28.3908328 11 28.3908328 14 23.3908328 14"\x3e\x3c/polygon\x3e\n            \x3c/g\x3e\n            \x3c/svg\x3e\n        \x3c/button\x3e');
b.on("click",function(){c.getGeolocation()});b.get(0).index=0;c.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(b.get(0))};b.prototype.getGeolocation=function(){var a=this;f.checkGeolocation().then(function(c){return a.renderMapByGeoLocation(c)})};b.prototype.renderMapByGeoLocation=function(a){this.searchByGeocode([a.response["edge-latitude"],a.response["edge-longitude"]])};b.prototype.searchByGeocode=function(a){var c=this,b={types:{zero:0}};if(a=a||c.$searchquery.val()){if(c.clearErrorMsgs(),
c.geocoder.geocode({address:Array.isArray(a)?null:a,location:Array.isArray(a)?new google.maps.LatLng(parseFloat(a[0]),parseFloat(a[1])):null},function(a,d){switch(d){case "OK":c.mapping(a[0],a[0].geometry.location.lat(),a[0].geometry.location.lng());break;default:c.mapping(b,85,180)}}),!Array.isArray(a)){var d=encodeURIComponent(a).toLowerCase();a=decodeURIComponent(a).toLowerCase();decodeURIComponent(c.getParameterByName("s")).toLowerCase()!==a&&window.history.pushState({search:d},"",window.location.pathname+
"?s\x3d"+d)}}else c.$error.html("Enter a valid search location")};b.prototype.getMarkerImage=function(c,b){var d=this,g=d.defaultPin;if("status"===d.pinTypes)g="Closed to the Public"===c.preserveStatus?"load"===b?d.closedInactivePin:"hover"===b?d.closedHighlightPin:d.closedSelectedPin:"Limited Access"===c.preserveStatus?"load"===b?d.limitedInactivePin:"hover"===b?d.limitedHighlightPin:d.limitedSelectedPin:"load"===b?d.openInactivePin:"hover"===b?d.openHighlightPin:d.openSelectedPin,c=g===d.defaultPin?
{url:g,size:new google.maps.Size(20,20),scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)}:{url:g,size:new google.maps.Size(30,40),scaledSize:new google.maps.Size(30,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,40)};else if("taxonomy"===d.pinTypes){var e=0;d.$iconLegend.html("");a.each(c.preserveTags,function(c,h){a.each(d.taxonomyList,function(a,c){if(String(h.tag)===String(c.facet))return e++,g="load"===b?c.inactivePin:
"hover"===b?c.highlightPin:c.selectedPin,!1})});c=0<e?{url:g,size:new google.maps.Size(30,40),scaledSize:new google.maps.Size(30,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,40)}:{url:g,size:new google.maps.Size(20,20),scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)}}else c={url:g,size:new google.maps.Size(20,20),scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,
10)};return c};b.prototype.deselectPin=function(){this.currentLocation&&this.currentMarker&&this.currentMarker.setIcon&&this.currentMarker.setIcon(this.getMarkerImage(this.currentLocation,"load"));this.currentMarker=[];this.currentLocation=[]};b.prototype.addMarker=function(a){var c=this,b=c.getMarkerImage(a,"load");c.currentLocation===a&&(b=c.getMarkerImage(a,"click"));var d=new google.maps.Marker({icon:b,map:c.map,position:{lat:Number(a.markerLatitude),lng:Number(a.markerLongitude)}});c.currentLocation===
a&&(c.currentMarker=d);google.maps.event.addDomListener(d,"click",function(){c.isMarkerClicked=!0;c.openModal(a,d);c._setAnalyticsOverviewModal("Pin",a.markerTitle)});google.maps.event.addDomListener(d,"mouseover",function(){if(c.currentLocation!==a){var b=c.getMarkerImage(a,"hover");d.setIcon(b)}c.tooltip&&c.tooltip.setMap&&(c.tooltip.setMap(null),c.tooltip=null);window.clearTimeout(c.timerMouseOut);google.maps.event.removeListener(c.listenerMouseout);c.listenerMouseout=google.maps.event.addDomListener(d,
"mouseout",function(){c.timerMouseOut=window.setTimeout(function(){c.tooltip&&c.tooltip.setMap&&c.tooltip.setMap(null);google.maps.event.removeListener(c.listenerMouseout);window.clearTimeout(c.timerMouseOut)},600);if(c.currentLocation!==a){var b=c.getMarkerImage(a,"load");d.setIcon(b)}})});c.markers.push(d)};b.prototype.openModal=function(c,b){var d=this,g="closed to the public"!==a.trim(c.preserveStatus).toLowerCase();d.tooltip&&d.tooltip.setMap&&(d.tooltip.setMap(null),d.tooltip=null);var e='\x3cdiv class\x3d"c-preserve-locator__modal-content-section"\x3e\n        \x3cdiv class\x3d"modal-subtitle"\x3e\n          \x3cspan class\x3d"icon icon-hours"\x3e\x3c/span\x3e\n          Hours\n        \x3c/div\x3e\n        \x3cdiv class\x3d"modal-hours"\x3e\n          '+
(c.hoursDesc?c.hoursDesc:"")+"\n        \x3c/div\x3e\n      \x3c/div\x3e";g='\x3cdiv class\x3d"c-preserve-modal-box"\x3e\n        \x3cdiv class\x3d"c-preserve-modal-image"\x3e\n          \x3cimg src\x3d"'+c.markerImage.small2x+'" alt\x3d"'+c.markerImageAlt+'"\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"modal-scroll-wrapper"\x3e\n          \x3cdiv class\x3d"c-preserve-locator__modal-content-section"\x3e\n            \x3cdiv class\x3d"modal-title"\x3e'+c.markerTitle+"\x3c/div\x3e\n            "+
(c.locationTitle?'\x3cdiv class\x3d"modal-location"\x3e'+c.locationTitle+"\x3c/div\x3e":"")+'\n            \x3cdiv class\x3d"modal-info"\x3e'+(c.markerShortDescription?c.markerShortDescription:"")+'\x3c/div\x3e\n            \x3cdiv class\x3d"modal-status"\x3e\n              \x3cimg class\x3d"icon status-icon" src\x3d"'+(c.preserveStatus?d.getMarkerImage(c,"load").url:"")+'" /\x3e\n              '+c.preserveStatus+"\n            \x3c/div\x3e\n          \x3c/div\x3e\n\n          "+(c.hoursDesc?e:"")+
'\n\n          \x3cdiv class\x3d"c-preserve-locator__modal-content-section"\x3e\n            \x3cdiv class\x3d"bs_row"\x3e\n              \x3cdiv class\x3d"bs_col-6"\x3e\n                \x3cdiv class\x3d"modal-subtitle"\x3e\n                  \x3cspan class\x3d"icon icon-location"\x3e\x3c/span\x3e\n                  Distance\n                \x3c/div\x3e\n              \x3c/div\x3e\n\n              \x3cdiv class\x3d"bs_col-6 right-align"\x3e\n                \x3cdiv class\x3d"modal-distance"\x3e'+
c.distance+" "+d.locationset.distanceunitlabel+" away\x3c/div\x3e\n                "+(g?'\x3ca class\x3d"modal-directions-link" href\x3d"https://www.google.com/maps/dir/'+c.markerLatitude+","+c.markerLongitude+'" target\x3d"_blank"\x3e'+d.locationset.markergetdirectionstitle+"\x3c/a\x3e":"")+'\n              \x3c/div\x3e\n            \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"modal-info-cta"\x3e\n          \x3ca href\x3d"'+c.ctaLink+'" class\x3d"c-button btn-primary"\x3e'+
d.locationset.ctatitle+'\x3c/a\x3e\n        \x3c/div\x3e\n\n        \x3cbutton class\x3d"close-modal" aria-label\x3d"Close Modal Box" role\x3d"button"\x3e\x3c/button\x3e\n      \x3c/div\x3e';b||a.each(d.markers,function(a,d){if(parseFloat(d.getPosition().lat())===parseFloat(c.markerLatitude)&&parseFloat(d.getPosition().lng())===parseFloat(c.markerLongitude)&&d.map)return b=d,!1});(function(a){d.deselectPin();a.setIcon(d.getMarkerImage(c,"click"));d.currentMarker=a;d.currentLocation=c})(b);d.$detailModal.html(g).removeClass("modal-closed");
d.toggleBodyScrollLock();d.$detailModal.find(".modal-directions-link").click(function(){d._setAnalyticsOverviewModalGetDirections(c.markerTitle)});d.$detailModal.find(".close-modal").on("click",function(a){a.preventDefault();d.closeModal()})};b.prototype.closeModal=function(){this.$detailModal.addClass("modal-closed").html("");this.deselectPin();this.toggleBodyScrollLock()};b.prototype.setMapOnAllMarkers=function(a){if(this.markers)for(var c=0;c<this.markers.length;c++)this.markers[c].setMap(a)};
b.prototype.clearMarkers=function(){this.setMapOnAllMarkers(null)};b.prototype.mapping=function(a,b,d){if(a&&a.geometry&&a.types&&b&&d){this.searchLatLng=new google.maps.LatLng(b,d);this.map.setCenter(a.geometry.location);switch(a.types[0]){case "administrative_area_level_1":case "country":case "continent":this.map.fitBounds(a.geometry.viewport);break;default:this.map.setZoom(8)}this.$searchquery.val()&&this.isSearchEvent&&this._setAnalyticsSearch()}};b.prototype.renderMarkers=function(c){var b=this;
c=c||b.map.getCenter();b.clearMarkers();b.filterMapItems=[];var d=[];b.markers=[];a.each(b.locationset.mapItems,function(g,h){g=new google.maps.LatLng(h.markerLatitude,h.markerLongitude);b.map.getBounds().contains(g)&&(h.distance=b.getDistance(google.maps.geometry.spherical.computeDistanceBetween(c,g)),b.filterMapItems.push(h),a.each(h.preserveTags,function(a,c){d.push(c.tag)}),b.addMarker(h))});b.tags=[];a.each(d,function(c,d){-1===a.inArray(d,b.tags)&&b.tags.push(d)})};b.prototype.renderIconLegend=
function(){var c=this;"status"===c.pinTypes&&(c.$iconLegend.html('\x3cdiv class\x3d"c-preserve-locator-iconLegend"\x3e\n          \x3cdiv class\x3d"c-preserve-locator-iconLegend-item"\x3e\n            \x3cimg src\x3d"'+c.openInactivePin+'"\x3e\n            \x3cdiv class\x3d"legend-label"\x3e'+c.locationset.labelOpenPublic+"\x3c/div\x3e\n            "+(c.locationset.filterByAccess?'\x3clabel class\x3d"legendIcon-switch"\x3e\x3cinput type\x3d"checkbox" id\x3d"toggle-accessOTP" value\x3d"Open to the Public"\x3e\x3cspan class\x3d"legendIcon-slider legendIcon-round"\x3e\x3c/span\x3e\x3c/label\x3e':
"")+'\n          \x3c/div\x3e\n\n          \x3cdiv class\x3d"c-preserve-locator-iconLegend-item"\x3e\n            \x3cimg src\x3d"'+c.limitedInactivePin+'"\x3e\n            \x3cdiv class\x3d"legend-label"\x3e'+c.locationset.labelLimitedAccess+"\x3c/div\x3e\n            "+(c.locationset.filterByAccess?'\x3clabel class\x3d"legendIcon-switch"\x3e\x3cinput type\x3d"checkbox" id\x3d"toggle-accessLA" value\x3d"Limited Access"\x3e\x3cspan class\x3d"legendIcon-slider legendIcon-round"\x3e\x3c/span\x3e\x3c/label\x3e':
"")+'\n          \x3c/div\x3e\n\n          \x3cdiv class\x3d"c-preserve-locator-iconLegend-item"\x3e\n            \x3cimg src\x3d"'+c.closedInactivePin+'"\x3e\n            \x3cdiv class\x3d"legend-label"\x3e'+c.locationset.labelClosePublic+"\x3c/div\x3e\n            "+(c.locationset.filterByAccess?'\x3clabel class\x3d"legendIcon-switch"\x3e\x3cinput type\x3d"checkbox" id\x3d"toggle-accessCTP" value\x3d"Closed to the Public"\x3e\x3cspan class\x3d"legendIcon-slider legendIcon-round"\x3e\x3c/span\x3e\x3c/label\x3e':
"")+'\n          \x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cbutton class\x3d"legend-button" aria-label\x3d"Toggle legend Box" role\x3d"button"\x3e\x3c/button\x3e'),c.$iconLegend.find(".legend-button").on("click",function(a){a.preventDefault();c.$iconLegend.toggleClass("is-closed")}),c.$iconLegend.find("#toggle-accessOTP").on("change",function(){c.$el.find("#accessOTP").prop("checked",a(this).prop("checked"));c.getSelectedFilter()}),c.$iconLegend.find("#toggle-accessCTP").on("change",function(){c.$el.find("#accessCTP").prop("checked",
a(this).prop("checked"));c.getSelectedFilter()}),c.$iconLegend.find("#toggle-accessLA").on("change",function(){c.$el.find("#accessLA").prop("checked",a(this).prop("checked"));c.getSelectedFilter()}))};b.prototype.renderFilterView=function(){var c="",b=this.$el.find("#js-filter-list"),d=this.getParameterByName("f"),e=this.getParameterByName("fa");d&&(d=d.split(","));this.locationset.filterCategories&&0<this.locationset.filterCategories.length?a.each(this.locationset.filterCategories,function(b,g){c+=
'\x3cdiv class\x3d"filter-title fw-v4"\x3e'+g.categoryLabel+"\x3c/div\x3e";c+='\x3cul class\x3d"filter-list" data-category\x3d"'+g.categoryLabel+'"\x3e';a.each(g.filters,function(g,h){var e="";d&&-1!==a.inArray(h.activity,d)&&(e="checked");c+='\x3cli class\x3d"checkbox" data-val\x3d"'+h.activity+'"\x3e\n                \x3cinput id\x3d"checkbox-'+b+"-"+g+'" type\x3d"checkbox" value\x3d"'+h.activity+'"'+e+('\x3e\n                \x3clabel for\x3d"checkbox-'+b+"-"+g+'"\x3e'+h.activity+"\x3c/label\x3e\n              \x3c/li\x3e")});
c+="\x3c/ul\x3e"}):(c+='\x3cdiv class\x3d"filter-title fw-v4"\x3e'+this.locationset.filterlabel+'\x3c/div\x3e\n          \x3cul class\x3d"filter-list" data-category\x3d"By Activities"\x3e',a.each(this.locationset.activityTags,function(b,g){var h=-1!==a.inArray(g.activity,d)?"checked":"";c+='\x3cli class\x3d"checkbox" data-val\x3d"'+g.activity+'"\x3e\n                \x3cinput id\x3d"checkbox-'+b+'" type\x3d"checkbox" value\x3d"'+g.activity+'" '+h+'\x3e\n                \x3clabel for\x3d"checkbox-'+
b+'"\x3e'+g.activity+"\x3c/label\x3e\n            \x3c/li\x3e"}),c+="\x3c/ul\x3e");b.html(c);e&&(e=e.split(","),-1!==a.inArray("opentothepublic",e)&&a("#accessOTP, #toggle-accessOTP").prop("checked",!0),-1!==a.inArray("limitedaccess",e)&&a("#accessLA, #toggle-accessLA").prop("checked",!0),-1!==a.inArray("closedtothepublic",e)&&a("#accessCTP, #toggle-accessCTP").prop("checked",!0))};b.prototype.openFilters=function(){this.$el.find(".js-filter-toggle--arrow").addClass("is-open");this.$el.find(".c-preserve-locator__filters").addClass("is-open");
this.toggleBodyScrollLock()};b.prototype.closeFilters=function(){this.$el.find(".js-filter-toggle--arrow").removeClass("is-open");this.$el.find(".c-preserve-locator__filters").removeClass("is-open");this.toggleBodyScrollLock()};b.prototype.setFilters=function(c){if(0<c.length){c=a.unique(c);var b=this.$el.find("#js-filter-list li");a.each(b,function(b,d){b=a(d).attr("data-val");-1!==a.inArray(b,c)?(a(d).removeAttr("disabled"),a(d).find("input:checkbox").removeAttr("disabled")):(a(d).attr("disabled",
"disabled"),a(d).find("input:checkbox").prop("checked",!1).attr("disabled","disabled"))})}};b.prototype.getSelectedFilterList=function(){var c={};a("#js-filter-list .filter-list").each(function(b,d){var g=[];a(d).find("input:checked").each(function(){g.push(a(this).val());c.hasItems=!0});c["category"+b]=g});return c};b.prototype.getSelectedFilterByAccessList=function(){var c=[];a(".filter-list.by-access li input:checked").each(function(){c.push(a(this).val())});return c};b.prototype.getSelectedFilter=
function(){var a=this.getSelectedFilterList(),b=this.getSelectedFilterByAccessList();this.$iconLegend.find("#toggle-accessOTP").prop("checked",this.$el.find("#accessOTP").prop("checked"));this.$iconLegend.find("#toggle-accessCTP").prop("checked",this.$el.find("#accessCTP").prop("checked"));this.$iconLegend.find("#toggle-accessLA").prop("checked",this.$el.find("#accessLA").prop("checked"));this.locationset.canFilter&&this.applyFilter(a,b)};b.prototype.getSelectedFilterTypes=function(){var c=[];a("#js-filter-list .filter-list li input:checked").each(function(){var b=
a(this).closest(".filter-list").attr("data-category");c.push(b)});a(".filter-list.by-access li input:checked").each(function(){c.push("By Access")});return a.uniqueSort(c)};b.prototype.applyFilter=function(c,b){var d=[],g=[],e;for(e in c)"hasItems"!==e&&c[e].forEach(function(a){g.push(a)});a.unique(g);a.each(this.filterMapItems,function(g,h){var e=!1;g=!1;if(h.preserveTags&&c){g=function(b){if(c[b].length){if(a.each(h.preserveTags,function(d,g){if(-1!==a.inArray(g.tag,c[b]))return e=!0,!1;e=!1}),
!e)return"break"}else e=!0};for(var k in c)if("break"===g(k))break}else c&&c.keys.length||(e=!0);g=0<b.length?-1!==a.inArray(h.preserveStatus,b):!0;e&&g&&d.push(h)});this.clearErrorMsgs();0<d.length?this.mappingByFilter(d):(this.clearMarkers(),this.$error.html(this.errorNotFoundFilter).show(),this.renderListView(d));g.length||b.length?this.$filterCounter.text(g.length+b.length):this.$filterCounter.html("");this.updateURL(g,b)};b.prototype.updateURL=function(c,b){var d=this,g="",e="",f="";a.each(c,
function(a,b){e+=""+b+(a<c.length-1?",":"")});a.each(b,function(a,c){c=d.shortFilterName(c);f+=""+c+(a<b.length-1?",":"")});g=d.getParameterByName("s");g=(g?"s\x3d"+g+(e||f?"\x26":""):"")+(e?"f\x3d"+e+(f?"\x26":""):"")+(f?"fa\x3d"+f:"");window.history.pushState({url:window.location.pathname,search:g},"map-locator",""+window.location.pathname+(g?"?"+g:""))};b.prototype.shortFilterName=function(a){a=a.replace(/\s/g,"");return a=a.toLowerCase()};b.prototype.mappingByFilter=function(c){var b=this,d=new google.maps.LatLngBounds,
e=[];b.clearMarkers();a.each(c,function(a,c){e.push(c);b.addMarker(c);a=new google.maps.LatLng(Number(c.markerLatitude),Number(c.markerLongitude));d.extend(a)});this.renderListView(e);this.isFilterApplyEvent&&this._setAnalyticsFilter()};b.prototype.fitMapToWorldView=function(){if(this.showWorldMap){this.showWorldMap=!1;var a=new google.maps.LatLngBounds(new google.maps.LatLng(85,-180),new google.maps.LatLng(-85,180));this.map.fitBounds(a,0);a=this.map.getBounds();-180===a.b.b&&180===a.b.f&&this.map.setZoom(this.map.getZoom()+
1)}};b.prototype.renderListView=function(c){var b=this,d=this.$el.find(".c-preserve-locator__results-list");d.html("");c.sort(function(a,c){return a.distance-c.distance});a.each(c,function(c,g){c=a(b.listViewTemplate(g));c.find(".c-preserve-locator__result-item-title a").click(function(a){a.preventDefault();b.openModal(g);b._setAnalyticsOverviewModal("List",g.markerTitle)});d.append(c)});c=c.length;b.$searchquery.val()&&0===c&&(b.disableAllFilters(),b.disableAllAccessFilters());document.getElementById("listResultsNumber").innerHTML=
"SHOWING "+c+" RESULTS"};b.prototype.listViewTemplate=function(a){return'\x3cli class\x3d"c-preserve-locator__result-item"\x3e\n            \x3cdiv class\x3d"c-preserve-locator__result-item-title"\x3e\x3ca href\x3d"#" title\x3d"View more information about '+a.title+'"\x3e'+a.title+"\x3c/a\x3e\x3c/div\x3e\n            "+(a.locationTitle?'\x3cdiv class\x3d"c-preserve-locator__result-item-location"\x3e'+a.locationTitle+"\x3c/div\x3e":"")+'\n            \x3cdiv class\x3d"c-preserve-locator__result-item-distance"\x3e'+
a.distance+" "+this.locationset.distanceunitlabel+" away\x3c/div\x3e\n        \x3c/li\x3e"};b.prototype.renderStateView=function(c){var b=[],d=this,e;d.geocoder.geocode({address:c},function(g,h){"OK"===h?(e=new google.maps.LatLng(g[0].geometry.location.lat(),g[0].geometry.location.lng()),a.each(d.locationset.mapItems,function(a,g){g.location&&(a=g.location.state,a=a.toLowerCase(),a===c&&(a=new google.maps.LatLng(g.markerLatitude,g.markerLongitude),a=google.maps.geometry.spherical.computeDistanceBetween(e,
a),g.distance=d.getDistance(a),b.push(g)))}),d.mappingByFilter(b)):d.$error.html("Error: "+h).show()})};b.prototype.pagingButtons=function(a){for(var c="",b=1;b<=a;b++)c+='\x3ca class\x3d"c-pagination__page family-sans fw-v5 fz-v6 txt-clr-g4 '+(1===b?"is-active":"")+'" data-page\x3d"'+b+'" href\x3d"#/'+b+'" role\x3d"button"\x3e'+b+"\x3c/a\x3e";return c};b.prototype.paginationView=function(){var c=this.noOfItemsPerPage,b=c,d=1;this.$pagination.html("");var e=this.$el.find(".c-preserve-locator__results-list \x3e li"),
f=Math.ceil(e.length/c);e&&e.length>c&&(a.each(e,function(g,h){a(h).attr("data-paging",d);g+1===b&&(d++,b+=c)}),e=this.pagingButtons(f),this.$pagination.html('\x3cdiv class\x3d"c-pagination"\x3e\n                \x3ca class\x3d"c-pagination__previous icon-caret-right-primary" href\x3d"#"\x3e\x3c/a\x3e\n                \x3cspan class\x3d"c-pagination__inner"\x3e\n                    '+e+'\n                \x3c/span\x3e\n                \x3ca class\x3d"c-pagination__next icon-caret-right-primary" href\x3d"#"\x3e\x3c/a\x3e\n            \x3c/div\x3e'),
this.pagingNavigation(),this.$el.find('li.c-preserve-locator__result-item[data-paging\x3d"1"]').addClass("is-visible"))};b.prototype.pagingNavigation=function(){var c=this,b=function(b){c.$el.find(".c-pagination__inner \x3e a").removeClass("is-active");c.$el.find('.c-pagination__inner .c-pagination__page[data-page\x3d"'+b+'"]').addClass("is-active");c.$el.find("li.c-preserve-locator__result-item[data-paging]").removeClass("is-visible");c.$el.find('li.c-preserve-locator__result-item[data-paging\x3d"'+
b+'"]').addClass("is-visible");b=c.$el.find(".c-preserve-locator__results-list").offset().top;a(window).scrollTop(b)},d=function(b){var d=c.$el.find('.c-pagination__inner .c-pagination__page[data-page\x3d"'+(b-1)+'"]');b=c.$el.find('.c-pagination__inner .c-pagination__page[data-page\x3d"'+(b+1)+'"]');d&&d.length?a(c.$el.find(".c-pagination__previous")).removeAttr("disabled").css("pointer-events","auto"):a(c.$el.find(".c-pagination__previous")).attr("disabled","disabled").css("pointer-events","none");
b&&b.length?a(c.$el.find(".c-pagination__next")).removeAttr("disabled").css("pointer-events","auto"):a(c.$el.find(".c-pagination__next")).attr("disabled","disabled").css("pointer-events","none")};this.$el.find(".c-pagination__inner").on("click","a",function(g){g.preventDefault();g=a(this).attr("data-page");c.$el.find(".c-pagination__inner \x3e a").removeClass("is-active");a(this).addClass("is-active");b(g);d(Number(g))});this.$el.find(".c-pagination__previous").on("click",function(g){g.preventDefault();
g=a(c.$el.find(".c-pagination__inner a.is-active")).attr("data-page");g=Number(g)-1;0<g&&(b(g),d(g))});this.$el.find(".c-pagination__next").on("click",function(g){g.preventDefault();g=a(c.$el.find(".c-pagination__inner a.is-active")).attr("data-page");g=Number(g)+1;0<g&&(b(g),d(g))});d(1)};b.prototype.disableAllFilters=function(){var c=a("#js-filter-list .checkbox");a.each(c,function(c,b){a(b).attr("disabled","disabled");a(b).find('input[type\x3d"checkbox"]').attr("disabled","disabled")})};b.prototype.disableAllAccessFilters=
function(){var c=a(".filter-list.by-access li input");a.each(c,function(c,b){a(b).attr("disabled","disabled");a(b).find('input[type\x3d"checkbox"]').attr("disabled","disabled")})};b.prototype._setAnalyticsSearch=function(){var a=this.$searchquery.val(),b=this.$el.find(".c-preserve-locator__results-list \x3e li");b=b?b.length:0;f.setAnalyticsByPage({event_name:"asset_search",event_action:a?a:"undefined",event_category:b,search_term:a?a:"undefined",num_search_results:b,search_type:"map"},!0);this.isSearchEvent=
!1};b.prototype._setAnalyticsFilter=function(){var a=[],b=this.getSelectedFilterTypes();if(0<b.length)for(var d=0;d<b.length;d++)a.push(b[d]);0<a.length&&(b=this.$searchquery.val(),a={event_name:"filter_applied",filter_type:a.join("|"),search_term:b?b:"undefined"},console.log("filterTags:",a),f.setAnalyticsByPage(a,!0));this.isFilterApplyEvent=!1};b.prototype._setAnalyticsOverviewModal=function(a,b){f.setAnalyticsByPage({event_name:"location_preview",location_name:b,preview_type:a},!0)};b.prototype._setAnalyticsOverviewModalGetDirections=
function(a){f.setAnalyticsByPage({event_name:"click_directions",location_name:a},!0)};b.prototype.debounce=function(a,b,d){var c;return function(){var g=this,h=arguments,e=d&&!c;clearTimeout(c);c=setTimeout(function(){c=null;d||a.apply(g,h)},b);e&&a.apply(g,h)}};return b}();e.prototype=Object.create(google.maps.OverlayView.prototype);e.prototype.onAdd=function(){this.getPanes().floatPane.appendChild(this.templateElem)};e.prototype.onRemove=function(){this.templateElem.parentElement&&this.templateElem.parentElement.removeChild(this.templateElem)};
e.prototype.draw=function(){var a=new google.maps.LatLng(this.location.markerLatitude,this.location.markerLongitude);a=this.getProjection().fromLatLngToDivPixel(a);var c=this.templateElem.getBoundingClientRect(),d=this.marker.getIcon();d=a.y-(c.height+7+d.anchor.y+10);this.templateElem.style.left=a.x-c.width/2+"px";this.templateElem.style.top=d+"px"};e.prototype.getElement=function(){return this.templateElem};a.fn.preserveLocator=function(a){return this.each(function(c,b){return new d(b,a)})};a(".c-preserve-locator").preserveLocator();
return a.fn.preserveLocator}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.FindLocalChapter=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){this.target="";this.locationFlag=!0;var d=a(".c-find-chapter");if(d.length){this.submitBtn=a(".submit-btn");this.submitBtn.attr("disabled",!0);var b=d.find(".region-dd"),c=d.find(".state-dd");c.attr({disabled:!0,"data-disabled":!0});c.addClass("disabled txt-clr-g7");this.chapterUrl=
this.submitBtn.data("url");this.helptextOther=d.find(".state-class").data("helptext-other");this.helptextUsa=d.find(".state-class").data("helptext-usa");this.helptextCanada=d.find(".state-class").data("helptext-canada");b.on("keydown",this.regionKeyPress.bind(this));b.on("click",this.activateDropdown);c.on("keydown",this.stateKeyPress.bind(this));c.on("click",this.activateDropdownState);c.on("focus",this.fixStateListDisplay);d.find(".dropdown li a").on("keydown",this.menuItemKeyPress);d.find(".submit-btn").on("click",
this.goToLocalChapter.bind(this));this.getGeolocation();this.initializeEvents()}};e.prototype.goToLocalChapter=function(d){var b=a(d.currentTarget).closest(".c-find-chapter").find(".region-class").text(),c=a(d.currentTarget).closest(".c-find-chapter").find(".state-class").text(),g=a(d.currentTarget).closest(".c-find-chapter").find(".state-class").data("helptextUsa"),h=a(d.currentTarget).closest(".c-find-chapter").find(".state-class").data("helptextCanada"),e=a(d.currentTarget).closest(".c-find-chapter").find(".state-class").data("helptextOther"),
m=c;if(c===g||c===h||c===e)m=void 0;b={event_name:"find_local_opps",event_action:b+" | "+m,local_opp_search:b+" | "+m};"one-dropdown"===a(".c-find-chapter").data("chooseVariation")&&(a(d.currentTarget).closest(".c-find-chapter").find(".state-class").data("helptxt")===c&&(m=void 0),b={event_name:"find_local_opps",event_action:m+" | undefined",local_opp_search:m+" | undefined"});f.setAnalyticsByPage(b,!0);m=a(d.currentTarget).closest(".c-find-chapter").find(".region-class").attr("data-path");d=a(d.currentTarget).closest(".c-find-chapter").find(".state-class").attr("data-path");
this.target=m;c!==g&&c!==h&&c!==e&&(this.target=d);this.locationFlag&&(window.location.href=this.target)};e.prototype.initializeEvents=function(){var d=this;a(".c-find-chapter").find(".region-dd a").on("click",function(b){b.stopPropagation();var c=a(b.target).text(),g=a(b.target).data("region"),h=a(b.target).data("target");a(b.target).closest(".c-find-chapter").find(".region-class").html(c);a(b.target).closest(".region-dd").removeClass("is-active icon-drop-down-active");setTimeout(function(){a("body").removeClass("cover-footer")},
4);"unitedstates"===c.toLowerCase().replace(/ /g,"")?a(b.target).closest(".c-find-chapter").find(".state-class").text(d.helptextUsa):"canada"===c.toLowerCase().replace(/ /g,"")?a(b.target).closest(".c-find-chapter").find(".state-class").text(d.helptextCanada):a(b.target).closest(".c-find-chapter").find(".state-class").text(d.helptextOther);a(b.target).closest(".c-find-chapter").find(".region-class").attr("data-path",h);a(b.target).closest(".c-find-chapter").find(".state").css("display","none");c=
a(b.target).closest(".c-find-chapter").find(".state#"+g);c.children().length?(c.css("display","block"),c.closest(".state-dd").removeAttr("disabled data-disabled"),c.closest(".state-dd").removeClass("disabled txt-clr-g7")):(c.closest(".state-dd").attr({disabled:!0,"data-disabled":!0}),c.closest(".state-dd").addClass("disabled txt-clr-g7"));a(b.target).closest(".c-find-chapter").find(".submit-btn").removeAttr("disabled")});a(".c-find-chapter").find(".state-dd a").on("click",function(b){b.stopPropagation();
var c=a(b.target).text(),d=a(b.target).data("target");a(b.target).closest(".c-find-chapter").find(".state-class").html(c);a(b.target).closest(".c-find-chapter").find(".state-class").attr("data-path",d);a(b.target).closest(".state-dd").removeClass("is-active icon-drop-down-active");setTimeout(function(){a("body").removeClass("cover-footer")},4);a(b.target).closest(".c-find-chapter").find(".submit-btn").removeAttr("disabled")});a(document).on("click",function(){a(".c-find-chapter").find(".list-item").removeClass("is-active icon-drop-down-active");
setTimeout(function(){a("body").removeClass("cover-footer")},4)})};e.prototype.regionKeyPress=function(d){var b=d.key,c=d.target;"Enter"===b?this.activateDropdown(d):"Escape"===b&&(d=a(c).closest(".list-item"),d.click(),d.focus())};e.prototype.stateKeyPress=function(d){var b=d.key,c=d.target;"Enter"===b?this.activateDropdownState(d):"Escape"===b&&(d=a(c).closest(".list-item"),d.click(),d.focus())};e.prototype.menuItemKeyPress=function(d){var b=d.target;"Enter"===d.key&&(b.click(),d=a(b).closest(".list-item"),
d.click(),d.focus())};e.prototype.activateDropdown=function(d){a(".c-find-chapter").find(".state-dd").removeClass("is-active icon-drop-down-active");a(d.currentTarget).toggleClass("is-active icon-drop-down-active");d.stopPropagation();var b=d.currentTarget.querySelectorAll(".dropdown li a");a(d.currentTarget).hasClass("is-active icon-drop-down-active")?(b.forEach(function(a){a.setAttribute("tabindex","0")}),a("body").addClass("cover-footer")):(b.forEach(function(a){a.setAttribute("tabindex","-1")}),
setTimeout(function(){a("body").removeClass("cover-footer")},4));d.currentTarget.focus()};e.prototype.activateDropdownState=function(d){var b=a(".c-find-chapter");"one-dropdown"===b.data("chooseVariation")&&a(d.currentTarget).closest(".c-find-chapter").find(".state").css("display","block");b.find(".region-dd").removeClass("is-active icon-drop-down-active");a(d.currentTarget).toggleClass("is-active icon-drop-down-active");b=d.currentTarget.querySelectorAll(".dropdown li a");a(d.currentTarget).hasClass("is-active icon-drop-down-active")?
(b.forEach(function(a){a.setAttribute("tabindex","0")}),a("body").addClass("cover-footer")):(b.forEach(function(a){a.setAttribute("tabindex","-1")}),setTimeout(function(){a("body").removeClass("cover-footer")},4));d.stopPropagation()};e.prototype.fixStateListDisplay=function(d){if("United States"===a(d.currentTarget).closest(".c-find-chapter").find(".region-class").text()){d=a(d.currentTarget).closest(".c-find-chapter").find(".state-dd ul");for(var b=0;b<d.length;b++){var c=a(d[b]);"UnitedStates"!==
c.attr("id")&&c.css("display","none")}}};e.prototype.getGeolocation=function(){var d=this,b=a(".c-find-chapter"),c=b.data("geolocationdatastr"),g=b.data("disableGeoService"),h=b.data("chooseVariation");"one-dropdown"===h&&(b.find(".state-dd").attr({disabled:!1,"data-disabled":!1}),b.find(".state-dd").removeClass("disabled txt-clr-g7"));"no"===g&&("one-dropdown"===h?f.checkGeolocation().then(function(a){return d.renderGeoLocationNavForOneDD(a,c)}):f.checkGeolocation().then(function(a){return d.renderGeoLocationNav(a,
c)}))};e.prototype.renderGeoLocationNavForOneDD=function(d,b){d=d.response["edge-region"].toLowerCase();for(var c=0;c<b.length;c++)if(-1<b[c].stateCode.indexOf(d)){a(".c-find-chapter").find(".state-class").text(b[c].stateTitle);a(".c-find-chapter").find(".state-class").attr("data-path",b[c].statePath);a(".c-find-chapter").find(".state-dd").removeAttr("disabled data-disabled");a(".c-find-chapter").find(".state-dd").removeClass("disabled txt-clr-g7");this.submitBtn.removeAttr("disabled");break}};e.prototype.renderGeoLocationNav=
function(d,b){var c=d.response["edge-country"].toLowerCase(),g=d.response["edge-city"].toLowerCase();d=d.response["edge-region"].toLowerCase();"usa"===c?a(".c-find-chapter").find(".state-class").text(this.helptextUsa):"canada"===c?a(".c-find-chapter").find(".state-class").text(this.helpTxtCanada):a(".c-find-chapter").find(".state-class").text(this.helptextOther);for(var h=!1,e=0;e<b.length;e++){if(-1<b[e].regionCode.indexOf(c)){a(".c-find-chapter").find(".region-class").text(b[e].regionTitle);a(".c-find-chapter").find(".region-class").attr("data-path",
b[e].regionPath);var f=b[e].regionId;a(".c-find-chapter").find("ul#"+f).css("display","block");this.submitBtn.removeAttr("disabled")}for(var l=0;l<b[e].statesList.length;l++)if("usa"===c||"can"===c){if(-1<b[e].statesList[l].regionCode.indexOf(c)&&(a(".c-find-chapter").find(".region-class").text(b[e].regionTitle),a(".c-find-chapter").find(".region-class").attr("data-path",b[e].regionPath),f=b[e].regionId,a(".c-find-chapter").find("ul#"+f).css("display","block"),a(".c-find-chapter").find(".state-dd").removeAttr("disabled data-disabled"),
a(".c-find-chapter").find(".state-dd").removeClass("disabled txt-clr-g7"),-1<b[e].statesList[l].stateCode.indexOf(d))){a(".c-find-chapter").find(".state-class").text(b[e].statesList[l].stateTitle);a(".c-find-chapter").find(".state-class").attr("data-path",b[e].statesList[l].statePath);a(".c-find-chapter").find(".state-dd").removeAttr("disabled data-disabled");a(".c-find-chapter").find(".state-dd").removeClass("disabled txt-clr-g7");this.submitBtn.removeAttr("disabled");h=!0;break}}else if(-1<b[e].statesList[l].regionCode.indexOf(c)||
b[e].statesList[l].stateId.toLowerCase()===g){a(".c-find-chapter").find(".state-class").text(b[e].statesList[l].stateTitle);a(".c-find-chapter").find(".state-class").attr("data-path",b[e].statesList[l].statePath);a(".c-find-chapter").find(".region-class").text(b[e].regionTitle);a(".c-find-chapter").find(".region-class").attr("data-path",b[e].regionPath);a(".c-find-chapter").find(".state-dd").removeAttr("disabled data-disabled");a(".c-find-chapter").find(".state-dd").removeClass("disabled txt-clr-g7");
f=b[e].regionId;a(".c-find-chapter").find("ul#"+f).css("display","block");this.submitBtn.removeAttr("disabled");h=!0;break}if(h)break}};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.FindALocalEvent=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){this.target="";this.locationFlag=!0;var d=a(".c-find-events");this.submitBtn=a(".submit-btn");this.submitBtn.attr("disabled",!0);d.find(".state-dd").attr({disabled:!0,"data-disabled":!0});this.eventsUrl=this.submitBtn.data("url");this.helptextOther=d.find(".state-class").data("helptext-other");
this.helptextUsa=d.find(".state-class").data("helptext-usa");d.find(".region-dd").on("click",this.activateDropdownRegion);d.find(".state-dd").on("click",this.activateDropdownState);d.find(".submit-btn").on("click",this.goToLocalEvents.bind(this));this.getGeolocation();this.initializeEvents()};e.prototype.goToLocalEvents=function(d){var b=a(d.currentTarget).closest(".c-find-events").find(".region-class").text(),c=a(d.currentTarget).closest(".c-find-events").find(".state-class").text(),g=a(d.currentTarget).closest(".c-find-events").find(".state-class").data("helptextUsa"),
e=a(d.currentTarget).closest(".c-find-events").find(".state-class").data("helptextOther"),k="",m=c;if(c===g||c===e)m=void 0;var l={event_name:"find_local_opps",event_action:b+" | "+m,local_opp_search:b+" | "+m},p=a(".c-find-events").data("chooseVariation");"one-dropdown"===p&&(k=a(d.currentTarget).closest(".c-find-events").find(".state-class").data("helptxt"),k===c&&(m=void 0),l={event_name:"find_local_opps",event_action:m+" | undefined",local_opp_search:m+" | undefined"});f.setAnalyticsByPage(l,
!0);"one-dropdown"===p?c!==k&&(this.target=this.eventsUrl+"?s\x3d"+c):(this.target=this.eventsUrl+"?r\x3d"+b,c!==g&&c!==e&&(this.target+="\x26s\x3d"+c));this.locationFlag&&(window.location.href=this.target)};e.prototype.initializeEvents=function(){var d=this;a(".c-find-events").find(".region-dd a").on("click",function(b){b.stopPropagation();var c=a(b.target).text(),g=a(b.target).data("region");a(b.target).closest(".c-find-events").find(".region-class").html(c);a(b.target).closest(".region-dd").removeClass("is-active icon-drop-down-active txt-clr-p4");
setTimeout(function(){a("body").removeClass("cover-footer")},4);a(b.target).closest(".c-find-events").find(".state-class").text(d.helptextOther);"unitedstates"!==c.toLowerCase().replace(/ /g,"")&&"canada"!==c.toLowerCase().replace(/ /g,"")||a(b.target).closest(".c-find-events").find(".state-class").text(d.helptextUsa);a(b.target).closest(".c-find-events").find(".state").css("display","none");c=a(b.target).closest(".c-find-events").find(".state#"+g);c.children().length?(c.css("display","block"),c.closest(".state-dd").removeAttr("disabled data-disabled"),
c.closest(".state-dd").removeClass("disabled txt-clr-g7")):(c.closest(".state-dd").attr({disabled:!0,"data-disabled":!0}),c.closest(".state-dd").addClass("disabled txt-clr-g7"));a(b.target).closest(".c-find-events").find(".submit-btn").removeAttr("disabled")});a(".c-find-events").find(".state-dd a").on("click",function(b){b.stopPropagation();var c=a(b.target).text();a(b.target).closest(".c-find-events").find(".state-class").html(c);a(b.target).closest(".state-dd").removeClass("is-active txt-clr-p4 icon-drop-down-active");
setTimeout(function(){a("body").removeClass("cover-footer")},4);a(b.target).closest(".c-find-events").find(".submit-btn").removeAttr("disabled")});a(document).on("click",function(){a(".c-find-events").find(".list-item").removeClass("is-active txt-clr-p4 icon-drop-down-active");setTimeout(function(){a("body").removeClass("cover-footer")},4)})};e.prototype.activateDropdownRegion=function(d){a(".c-find-events").find(".state-dd").removeClass("is-active txt-clr-p4 icon-drop-down-active");a(d.currentTarget).toggleClass("is-active txt-clr-p4 icon-drop-down-active");
a(d.currentTarget).hasClass("is-active txt-clr-p4 icon-drop-down-active")?a("body").addClass("cover-footer"):setTimeout(function(){a("body").removeClass("cover-footer")},4);d.stopPropagation()};e.prototype.activateDropdownState=function(d){var b=a(".c-find-events");"one-dropdown"===b.data("chooseVariation")&&a(d.currentTarget).closest(".c-find-events").find(".state").css("display","block");b.find(".region-dd").removeClass("is-active txt-clr-p4 icon-drop-down-active");a(d.currentTarget).toggleClass("is-active txt-clr-p4 icon-drop-down-active");
a(d.currentTarget).hasClass("is-active txt-clr-p4 icon-drop-down-active")?a("body").addClass("cover-footer"):setTimeout(function(){a("body").removeClass("cover-footer")},4);d.stopPropagation()};e.prototype.getGeolocation=function(){var d=this,b=a(".c-find-events"),c=b.data("geolocationdatastr"),g=b.data("disableGeoService"),e=b.data("chooseVariation");"one-dropdown"===e&&(b.find(".state-dd").attr({disabled:!1,"data-disabled":!1}),b.find(".state-dd").removeClass("disabled txt-clr-g7"));c&&"no"===g&&
("one-dropdown"===e?f.checkGeolocation().then(function(a){return d.renderGeoLocationNavForOneDD(a,c)}):f.checkGeolocation().then(function(a){return d.renderGeoLocationNav(a,c)}))};e.prototype.renderGeoLocationNavForOneDD=function(d,b){d=d.response["edge-region"].toLowerCase();for(var c=0;c<b.length;c++)if(-1<b[c].stateCode.indexOf(d)){a(".c-find-events").find(".state-class").text(b[c].stateTitle);a(".c-find-events").find(".state-class").attr("data-path",b[c].statePath);a(".c-find-events").find(".state-dd").removeAttr("disabled data-disabled");
a(".c-find-events").find(".state-dd").removeClass("disabled txt-clr-g7");this.submitBtn.removeAttr("disabled");break}};e.prototype.renderGeoLocationNav=function(d,b){var c=d.response["edge-country"].toLowerCase(),g=d.response["edge-city"].toLowerCase();d=d.response["edge-region"].toLowerCase();a(".c-find-events").find(".state-class").text(this.helptextUsa);for(var e=!1,k=0;k<b.length;k++){if(-1<b[k].regionCode.indexOf(c)){a(".c-find-events").find(".region-class").text(b[k].regionTitle);var f=b[k].regionId;
a(".c-find-events").find("ul#"+f).css("display","block");this.submitBtn.removeAttr("disabled")}for(var l=0;l<b[k].statesList.length;l++)if("usa"===c||"can"===c){if(-1<b[k].statesList[l].regionCode.indexOf(c)&&(a(".c-find-events").find(".region-class").text(b[k].regionTitle),f=b[k].regionId,a(".c-find-events").find("ul#"+f).css("display","block"),a(".c-find-events").find(".state-dd").removeAttr("disabled data-disabled"),a(".c-find-events").find(".state-dd").removeClass("disabled txt-clr-g7"),-1<b[k].statesList[l].stateCode.indexOf(d))){a(".c-find-events").find(".state-class").text(b[k].statesList[l].stateTitle);
a(".c-find-events").find(".state-dd").removeAttr("disabled data-disabled");a(".c-find-events").find(".state-dd").removeClass("disabled txt-clr-g7");this.submitBtn.removeAttr("disabled");e=!0;break}}else if(-1<b[k].statesList[l].regionCode.indexOf(c)||b[k].statesList[l].stateId.toLowerCase()===g){a(".c-find-events").find(".state-class").text(b[k].statesList[l].stateTitle);a(".c-find-events").find(".region-class").text(b[k].regionTitle);f=b[k].regionId;a(".c-find-events").find("ul#"+f).css("display",
"block");a(".c-find-events").find(".state-dd").removeAttr("disabled data-disabled");a(".c-find-events").find(".state-dd").removeClass("disabled txt-clr-g7");this.submitBtn.removeAttr("disabled");e=!0;break}if(e)break}};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.ArticleAggregation=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){a(".articleAggrigationDetailsStr").length&&(this.byAuthorStr=a(".byAuthorStr").length?JSON.parse(a.trim(a(".byAuthorStr").text())):"",this.byPlacesWeProtectStr=a(".byPlacesWeProtectStr").length?JSON.parse(a.trim(a(".byPlacesWeProtectStr").text())):"",this.byTopicStr=a(".byTopicStr").length?
JSON.parse(a.trim(a(".byTopicStr").text())):"",this.byLocationStr=a(".byLocationStr").length?JSON.parse(a.trim(a(".byLocationStr").text())):"",this.byBusinessGroupStr=a(".byBusinessGroupStr").length?JSON.parse(a.trim(a(".byBusinessGroupStr").text())):"",this.articleAggrigationDetailsStr=a(".articleAggrigationDetailsStr").length?JSON.parse(a.trim(a(".articleAggrigationDetailsStr").text())):"",this.loadMoreItems=9,this.requiredArticleData=this.requiredArticleDataBackup=null,this.$mobileFilterPopup=
a(".c-cards-article-agg-filter-popup"),this.currentTageget=!1,this.pageLoad=!0,this.registerHbsHelper(),this.pageLoadFiltering(),this.initializeHandler(),this.getQueryString())};e.prototype.registerHbsHelper=function(){Handlebars.registerHelper("article_equals",function(a,b,c){a=Handlebars.Utils.escapeExpression(a);b=Handlebars.Utils.escapeExpression(b);return a!==b?c.inverse(this):c.fn(this)});Handlebars.registerHelper("ifPresent",function(a,b,c){return a&&b?c.fn(this):c.inverse(this)})};e.prototype.initializeHandler=
function(){function d(c){var b=a(c).data("closefilter"),d=a(c).data("openfilter"),e=a(c).find(".js-filter-toggle--arrow");e.toggleClass("is-open");c=a(c).data("componentid");a(".articleAgg-"+c).find(".c-articleagg-filter").toggleClass("is-open");e.hasClass("is-open")?(a(".artaggFilterLbl").html(d),a("body").addClass("filters-opened")):(a(".artaggFilterLbl").html(b),a("body").removeClass("filters-opened"))}var b=this;window.addEventListener("popstate",function(){b.getQueryString()});a(".filterChkBox").on("click",
function(c){var b=a(c.target).data("chkid");c=a(c.target).prop("checked");a(".filterChkBox").filter('[data-chkid\x3d"'+b+'"]').prop("checked",c)});a(".checkboxLabel").on("click",function(c){c.preventDefault();a(c.currentTarget).prev(".filterChkBox").trigger("click")});a(".articleAgg .filter-icon-mobile").on("click",function(){a(".c-cards-article-agg-filter-popup").show();a(".popup-scroller").scrollTop(0);a("body").addClass("bodyOverflowHidden")});a(".articleAgg .popup-close").on("click",function(){a(".c-cards-article-agg-filter-popup").hide();
a("body").removeClass("bodyOverflowHidden")});this.$mobileFilterPopup.on("click",".mobileSort",function(c){c.preventDefault();b.currentTageget=!1;a(".mobileSort").removeClass("mobileSelectedSort border-secondary");a(c.target).addClass("mobileSelectedSort border-secondary");a(".articleAgg .popup-close").trigger("click");var d=a(c.target).data("value"),e=f.updateQueryString("article_sortOrder",d);f.updateURL(e);c=a(c.target).data("componentid");a(".selectedSort-"+c).val(d);a(".selectedSort-"+c).selectpicker("render");
b.applyFilter()});this.$mobileFilterPopup.on("click",".applyFilter",function(){b.currentTageget=!1;var c=b.getAllFilterChkBox();c=f.updateQueryString("article_filters",c.join(","));f.updateURL(c);a(".articleAgg .popup-close").trigger("click");b.applyFilter()});this.$mobileFilterPopup.on("click",".clearFilter",function(c,d){void 0===d&&(d=!0);c.preventDefault();b.currentTageget=!1;a(".filterChkBox").prop("checked",!1);d&&(c=f.updateQueryString("article_filters",""),f.updateURL(c));a(".articleAgg .popup-close").trigger("click");
b.applyFilter();b.setFilterAnalytics("")});a(document).on("click",function(c){a(c.target).closest(".js-filter-toggle").length&&(a(".sortAggDropdown").addClass("hideContent"),a(".article-agg-sort-by .js-filter-toggle--arrow").removeClass("is-open"));if(a(c.target).closest(".article-agg-sort-by").length&&a(".js-filter-toggle").find(".js-filter-toggle--arrow").hasClass("is-open")){var b=a(".js-filter-toggle").data("closefilter");a("span.artaggFilterLbl").html(b);a("svg.js-filter-toggle--arrow, div.c-articleagg-filter").removeClass("is-open")}a(c.target).closest(".c-articleagg-filter.is-open").length||
a(c.target).closest(".js-filter-toggle").length||(b=a(".js-filter-toggle").data("closefilter"),a("span.artaggFilterLbl").html(b),a("svg.js-filter-toggle--arrow, div.c-articleagg-filter").removeClass("is-open"));a(c.target).closest(".article-agg-filter-sort").length||!a(".sortAggDropdown").length||a(".sortAggDropdown").hasClass("hideContent")||(a(".sortAggDropdown").addClass("hideContent"),a(".sortAggDropdown").closest("label").find(".js-filter-toggle--arrow").removeClass("is-open"))});a(".js-filter-toggle").on("click",
function(a){a.preventDefault();d(a.currentTarget)});a(".c-articleagg-filter .clearFilter").on("click",function(c,d){void 0===d&&(d=!0);b.currentTageget=!1;c.preventDefault();a(".filterChkBox").prop("checked",!1);d&&(c=f.updateQueryString("article_filters",""),f.updateURL(c));c=a(".js-filter-toggle").data("closefilter");a("span.artaggFilterLbl").html(c);a("svg.js-filter-toggle--arrow, div.c-articleagg-filter").removeClass("is-open");b.applyFilter();b.setFilterAnalytics("")});a(".c-articleagg-filter .applyFilter").on("click",
function(){b.currentTageget=!1;var c=b.getAllFilterChkBox();c=f.updateQueryString("article_filters",c.join(","));f.updateURL(c);c=a(".js-filter-toggle").data("closefilter");a("span.artaggFilterLbl").html(c);a("svg.js-filter-toggle--arrow, div.c-articleagg-filter").removeClass("is-open");b.applyFilter()});a(".siteSearch").on("submit",function(c){c.preventDefault();a(".usrSearchSubmit").trigger("click")});a(".usrSearchSubmit").on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();b.currentTageget=
!0;c=a.trim(a(".usrInput").val());a(".clearSearch").hide();a(".usrSearchSubmit").show();c&&(a(".clearSearch").show(),a(".usrSearchSubmit").hide());d&&(d=f.updateQueryString("article_q",c),f.updateURL(d));b.applyFilter()});a(".usrInput").on("input",function(){a(".clearSearch").hide();a(".usrSearchSubmit").show()});a(".clearSearch").on("click",function(c,d){void 0===d&&(d=!0);b.currentTageget=!1;a(".usrInput").val("");a(c.target).hide();a(".usrSearchSubmit").show();d&&(c=f.updateQueryString("article_q",
a.trim(a(".usrInput").val())),f.updateURL(c));b.applyFilter(!1)});a(".article-agg-sort-by").on("click",function(c){c=a(c.currentTarget).data("componentid");a(".sortAggDropdown").toggleClass("hideContent");a(".article-agg-sort-by-parent-"+c).find(".js-filter-toggle--arrow").toggleClass("is-open")});a(".sortAggDropdown a").on("click",function(c){c.preventDefault();b.currentTageget=!1;var d=a(c.target).data("componentid"),e=a(c.target).data("value");c=a(c.target).text();a(".selectedSort-"+d).data("value",
e).html(c);a(".article-agg-sort-by").trigger("click");d=f.updateQueryString("article_sortOrder",e);f.updateURL(d);a(".mobileSort").removeClass("mobileSelectedSort border-secondary");a('.mobileSort[data-value\x3d"'+e+'"]').addClass("mobileSelectedSort border-secondary");b.applyFilter()});a("#sort-agg-dd").off("changed.bs.select").on("changed.bs.select",function(c){c=a(c.target).val();var d=f.updateQueryString("article_sortOrder",c);f.updateURL(d);a(".mobileSort").removeClass("mobileSelectedSort border-secondary");
a('.mobileSort[data-value\x3d"'+c+'"]').addClass("mobileSelectedSort border-secondary");b.applyFilter()});a("#sort-agg-dd").off("show.bs.select").on("show.bs.select",function(){a(".js-filter-toggle").find(".js-filter-toggle--arrow").hasClass("is-open")&&d(a(".js-filter-toggle").get(0))});a(".moreArticle").on("click",function(c){c.preventDefault();c=a(".resultsContainer").children(".hideContent");c.length&&c.length>=b.loadMoreItems?(c.slice(0,b.loadMoreItems).removeClass("hideContent"),c.length===
b.loadMoreItems&&a(".articleAggLoadMore").addClass("hideContent")):(c.removeClass("hideContent"),a(".articleAggLoadMore").addClass("hideContent"))});a(".article-clear-btn").on("click",function(c){c.preventDefault();a(".clearSearch").trigger("click",[!1]);a(".clearFilter").trigger("click",[!1]);c=a(c.target).data("componentid");var b=a(".selectedSort-"+c).data("defaultValue"),d=a(".selectedSort-"+c).data("defaultDisplayLabel");a(".selectedSort-"+c).html(d);a(".mobileSort").removeClass("mobileSelectedSort border-secondary");
a('.mobileSort[data-value\x3d"'+b+'"]').addClass("mobileSelectedSort border-secondary");c=f.updateQueryString("article_filters","");c=f.updateQueryString("article_q",a.trim(a(".usrInput").val()),c);c=f.updateQueryString("article_sortOrder","",c);f.updateURL(c)})};e.prototype.pageLoadFiltering=function(){var d=this;this.requiredArticleDataBackup=this.articleAggrigationDetailsStr.filter(function(a){var c=!0;if(d.byAuthorStr&&d.byAuthorStr.length){if(!a.articleAuthor)return!1;c=a.articleAuthor.some(function(a){return d.byAuthorStr.find(function(c){return c.tagTitle===
a})});if(!c)return!1}if(d.byPlacesWeProtectStr.length){if(!a.placesWeProtectTag)return!1;c=a.placesWeProtectTag.some(function(a){return d.byPlacesWeProtectStr.find(function(c){return c.tagTitle===a})});if(!c)return!1}if(d.byTopicStr.length){if(!a.topicTag)return!1;c=a.topicTag.some(function(a){return d.byTopicStr.find(function(c){return c.tagTitle===a})});if(!c)return!1}if(d.byLocationStr.length){if(!a.geoLocationTag)return!1;c=a.geoLocationTag.some(function(a){return d.byLocationStr.find(function(c){return c.tagTitle===
a})});if(!c)return!1}if(d.byBusinessGroupStr.length){if(!a.businesstags)return!1;c=a.businesstags.some(function(a){return d.byBusinessGroupStr.find(function(c){return c.tagTitle===a})});if(!c)return!1}return c});delete this.byAuthorStr;delete this.byPlacesWeProtectStr;delete this.byTopicStr;delete this.byLocationStr;delete this.byBusinessGroupStr;delete this.articleAggrigationDetailsStr;a(".hiddenVars").remove()};e.prototype.getQueryString=function(){var d=f.getParameterByName("article_q"),b=f.getParameterByName("article_filters");
a(".usrInput").val(d);a(".filterChkBox").prop("checked",!1);b&&b.split(",").forEach(function(c){a(".filterChkBox[value\x3d'"+c+"']").prop("checked",!0)});d=f.getParameterByName("article_sortOrder");b="";d?b=a("#sort-agg-dd").val():(d=a(".articleAgg").find(".selectedSort").data("defaultValue"),a("#sort-agg-dd").selectpicker("val",d));a(".selectedSort").html(b);this.$mobileFilterPopup.find(".mobileSort").removeClass("mobileSelectedSort border-secondary");this.$mobileFilterPopup.find('.mobileSort[data-value\x3d"'+
d+'"]').addClass("mobileSelectedSort border-secondary");this.applyFilter()};e.prototype.getAllFilterChkBox=function(){var d=[],b=null;b=f.checkWindowWidth()?a(".c-articleagg-filter"):this.$mobileFilterPopup;b.find(".filterChkBox:checked").each(function(a,b){d.push(b.value)});return d};e.prototype.applyFilter=function(d){void 0===d&&(d=!0);this.requiredArticleData=JSON.parse(JSON.stringify(this.requiredArticleDataBackup));if(this.requiredArticleData.length){var b=this.getAllFilterChkBox(),c=a.trim(a(".usrInput").val());
this.requiredArticleData=this.requiredArticleData.filter(function(a){var d=!1;if(b.length){if(!a.topicTag)return!1;d=a.topicTag.some(function(a){return b.find(function(c){return c===a})});if(!d)return!1}if(c){var g=new RegExp(c,"gi");return g.test(a.title)||g.test(a.description)||g.test(a.contentTypeTag)||a.topicTag&&(d=a.topicTag.some(function(a){return g.test(a)}))||a.articleAuthor&&(d=a.articleAuthor.some(function(a){return g.test(a)}))||a.placesWeProtectTag&&(d=a.placesWeProtectTag.some(function(a){return g.test(a)}))||
a.geoLocationTag&&(d=a.geoLocationTag.some(function(a){return g.test(a)}))||a.businesstags&&(d=a.businesstags.some(function(a){return g.test(a)}))?!0:d}return!0});var g=null;(g=f.checkWindowWidth()?a("#sort-agg-dd").val():this.$mobileFilterPopup.find(".mobileSort.mobileSelectedSort").data("value"))&&"newest"!==g.toLowerCase()&&(this.requiredArticleData=this.requiredArticleData.reverse());d&&(c&&this.currentTageget?this.setSearchAnalytics(c,this.requiredArticleData.length):!this.pageLoad&&this.currentTageget&&
this.setSearchAnalytics("undefined",this.requiredArticleData.length));b.length&&(d=b.join(",").toString(),this.setFilterAnalytics(d));this.renderArticleCards();this.pageLoad=!1}else this.renderArticleCards()};e.prototype.handlebarCardsTemplate=function(){return'{{#each this}}\n            \x3cdiv class\x3d"bs_col-12 bs_col-md-6 bs_col-sm-6 bs_col-lg-4 bs_d-flex bs_align-items-stretch"\x3e\n                \x3ca href\x3d"{{this.link}}" target\x3d"{{this.target}}" class\x3d"c-cards-articles__card tertiary-link-v1 txt-clr-g1"\x3e\n                    \x3cdiv class\x3d"c-cards-articles__card-container border-primary"\x3e\n                    {{#if this.pageImage.default}}\n                        \x3cpicture\x3e\n                        \x3csource srcset\x3d"{{this.pageImage.large}} 1x, {{this.pageImage.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n                        \x3csource srcset\x3d"{{this.pageImage.medium}} 1x, {{this.pageImage.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n                        \x3csource srcset\x3d"{{this.pageImage.small}} 1x, {{this.pageImage.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n\n                        \x3cimg class\x3d"c-cards-articles__image image-position-desktop__{{this.desktopImageCrop}} image-position-mobile__{{this.mobileImageCrop}}" src\x3d"{{this.pageImage.default}}" alt\x3d"{{this.pageImageAlt}}"/\x3e\n                        \x3c/picture\x3e\n                    {{else}}\n                        \x3cimg class\x3d"c-cards-articles__image image-position-desktop__{{this.desktopImageCrop}} image-position-mobile__{{this.mobileImageCrop}}" src\x3d"{{this.pageImage}}" alt\x3d"{{this.pageImageAlt}}"/\x3e\n                    {{/if}}\n\n                    \x3cdiv class\x3d"c-cards-articles__content"\x3e\n                        \x3cp class\x3d"fz-v6 lhr-v3 family-sans fw-v4 c-cards-articles__label txt-clr-p3"\x3e\n                        {{this.contentTypeTag}}\n                        \x3c/p\x3e\n\n                        \x3ch4 class\x3d"fz-v12 lh-v15 c-cards-articles__title family-serif"\x3e\n                        {{this.title}}\n                        \x3c/h4\x3e\n\n                        \x3cp class\x3d"family-sans fz-v7 lh-v9 c-cards-articles__excerpt txt-clr-g2"\x3e\n                        {{this.description}}\n                        \x3c/p\x3e\n                        {{#article_equals ../hide-article-author-and-date "no"}}\n                            \x3cp class\x3d"family-sans fw-v4 fz-v4 lh-v2 c-cards-articles__byline txt-clr-g2"\x3e\n                            {{#if this.articleAuthor.[0]}}By {{ this.articleAuthor.[0] }} {{/if}}\n                            {{#if this.hideArticleDate.[0]}}\n                              {{else}}\n                              {{#ifPresent this.articleAuthor.[0] this.articleDate}} | {{/ifPresent}} {{this.articleDate}}\n                            {{/if}}\n                            \x3c/p\x3e\n                        {{/article_equals}}\n                    \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/a\x3e\n            \x3c/div\x3e\n            {{/each}}'};
e.prototype.renderArticleCards=function(d){void 0===d&&(d=this.requiredArticleData);a(".articleAggLoadMore").addClass("hideContent");if(d.length){d["hide-article-author-and-date"]=a(".articleAgg").data("hideArticleAuthorAndDate");var b=Handlebars.compile(this.handlebarCardsTemplate())(d);a(".resultsContainer").html(b);a(".dataResultContainer").removeClass("hideContent");a(".resultContainerId-noResult").addClass("hideContent");a(".resultsContainer").children().slice(this.loadMoreItems).addClass("hideContent");
d.length>this.loadMoreItems&&a(".articleAggLoadMore").removeClass("hideContent")}else a(".dataResultContainer").addClass("hideContent"),a(".resultContainerId-noResult").removeClass("hideContent")};e.prototype.setSearchAnalytics=function(a,b){f.setAnalyticsByPage({event_name:"asset_search",event_action:a,event_category:b,search_term:a,search_type:"article",num_search_results:b},!0)};e.prototype.setFilterAnalytics=function(){};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.PressReleaseAggregation=function(a,f,e){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;return new (function(){function d(){a(".pressreleasedatastr").length&&this.initialize()}d.prototype.initialize=function(){this.pressCardsData=JSON.parse(a(".pressreleasedatastr").text());this.loadMoreItems=9;this.$filterPopup=a(".c-cards-press-release-filter-popup");this.hideLabel=a(".filter-btn").attr("data-hideFilter");
this.showLabel=a(".filter-btn").attr("data-showFilter");this.currentTargetAnalytics=!1;this.config={property:["title","description","location","topicTag","geoLocationTag"],value:"",filter:!1,filterProperty:"topicTag",filterValue:[]};this.eventHandler();this.renderPressReleaseCards();var b=a(".c-cards-press-release-container");b.find("#press-filter-toggle").on("click",this.activateFilterDropdown.bind(this));b.find(".filter-icon-mobile").on("click",this.activateFilterPopup.bind(this));this.getQueryString()};
d.prototype.eventHandler=function(){var b=this;window.addEventListener("popstate",function(){b.getQueryString()});a(".pressSearch").on("submit",function(c){c.preventDefault();a(".search-toggle").addClass("hide-content");a(".close-toggle").removeClass("hide-content");a(".search-toggle").trigger("click")});a(".search-toggle").on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();a(".search-toggle").addClass("hide-content");a(".close-toggle").removeClass("hide-content");d&&(c=e.updateQueryString("press_q",
a.trim(a(".usrInput").val())),e.updateURL(c));b.searchKey=a(".usrInput").val();b.searchKey||(b.config.emptyVal="undefined");b.currentTargetAnalytics=!0;b.callSearchFunction()});a(".press-search").on("input",function(){a(".close-toggle").addClass("hide-content");a(".search-toggle").removeClass("hide-content")});a(".close-toggle").on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();d&&(c=e.updateQueryString("press_q",""),e.updateURL(c));a(".c-field__input").val("");a(".search-toggle").trigger("click");
a(".close-toggle").addClass("hide-content");a(".search-toggle").removeClass("hide-content");b.config.value="";b.currentTargetAnalytics=!1;b.callSearchFunction()});a(".filter-apply-btn").on("click",function(){b.currentTargetAnalytics=!1;b.applyFilters();a("#press-filter-toggle").trigger("click")});a(".filter-clear-btn").on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();a(".filter-chkbox").prop("checked",!1);d&&(c=e.updateQueryString("press_filters",""),e.updateURL(c));b.config.filter=
!1;b.currentTargetAnalytics=!1;b.applyFilters();a("#press-filter-toggle").trigger("click")});a("#sort-dd").on("show.bs.select",function(){a(".c-press-release-filter").removeClass("is-open");a(".press-filter-label").text(b.showLabel);a(".filter-btn").find(".toggle--arrow").removeClass("menu-active");a("body").removeClass("filters-opened")});a(".selectpicker").on("change",function(c,d){void 0===d&&(d=!0);b.order=a(c.target).val();d&&(c=e.updateQueryString("press_sortOrder",b.order),e.updateURL(c));
b.currentTargetAnalytics=!1;b.callSearchFunction();a(".popup-sort-btn").removeClass("popup-sort-selected border-secondary");a('.popup-sort-btn[data-value\x3d"'+b.order+'"]').addClass("popup-sort-selected border-secondary")});a(".press-load-more").on("click",function(c){c.preventDefault();c=a(".cards-container").children(".hide-content");c.length&&c.length>=b.loadMoreItems?(c.slice(0,b.loadMoreItems).removeClass("hide-content"),c.length===b.loadMoreItems&&a(".press-load-more").addClass("hide-content")):
(c.removeClass("hide-content"),a(".press-load-more").addClass("hide-content"))});a(".press-clear-btn").on("click",function(){a(".close-toggle").trigger("click");a(".filter-clear-btn").trigger("click")});this.$filterPopup.find(".popup-close").on("click",function(){b.$filterPopup.hide();a("body").removeClass("bodyOverflowHidden");a(".cards-container").removeClass("hide-content")});this.$filterPopup.find(".popup-apply-btn").on("click",function(){b.$filterPopup.hide();a("body").removeClass("bodyOverflowHidden");
b.currentTargetAnalytics=!1;b.applyFilters();a(".cards-container").removeClass("hide-content")});this.$filterPopup.find(".popup-clear-btn").on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();b.$filterPopup.hide();a("body").removeClass("bodyOverflowHidden");a(".filter-chkbox").prop("checked",!1);d&&(c=e.updateQueryString("press_filters",""),e.updateURL(c));b.config.filter=!1;b.currentTargetAnalytics=!1;b.applyFilters();a(".cards-container").removeClass("hide-content")});a("body").on("click",
".filter-chkbox",function(c){var b=a(c.target).val();c=a(c.target).prop("checked");a('.filter-chkbox[value\x3d"'+b+'"]').prop("checked",c)});this.$filterPopup.find(".popup-sort-btn").on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();b.$filterPopup.hide();a("body").removeClass("bodyOverflowHidden");b.order=a(c.target).attr("data-value");a(".popup-sort-btn").removeClass("popup-sort-selected border-secondary");a(c.target).addClass("popup-sort-selected border-secondary");a(".pressAggregation").find("select.selectpicker").val(b.order);
a(".pressAggregation").find("select.selectpicker").selectpicker("render");d&&(c=e.updateQueryString("press_sortOrder",b.order),e.updateURL(c));b.currentTargetAnalytics=!1;b.callSearchFunction();a(".cards-container").removeClass("hide-content")});a(document).on("click",function(c){0===a(c.target).closest(".sort-btn").length&&(a(".pressAggDropdown").addClass("hide-content"),a(".sort-btn").find(".sort-toggle--arrow").removeClass("menu-active"));0===a(c.target).closest(".c-press-release-filter").length&&
(a(".c-press-release-filter").hasClass("is-open")&&a("#press-filter-toggle").trigger("click"),a(".c-press-release-filter").removeClass("is-open"),a("body").removeClass("filters-opened"))})};d.prototype.applyFilters=function(a,c){void 0===a&&(a=!1);void 0===c&&(c=!0);this.appliedFilter=this.getAllFilterChkBox();!a&&c&&(a=e.updateQueryString("press_filters",this.appliedFilter.join(",")),e.updateURL(a));this.config.filterValue=this.appliedFilter;this.currentTargetAnalytics=!1;this.callSearchFunction()};
d.prototype.getAllFilterChkBox=function(){var b=this;this.appliedFilter=[];a(".filter-chkbox:checked").not(".popup-chkbox").each(function(a,d){b.appliedFilter.push(d.value)});return this.appliedFilter};d.prototype.activateFilterPopup=function(){this.$filterPopup.show();a("body").addClass("bodyOverflowHidden");a(".cards-container").addClass("hide-content")};d.prototype.activateFilterDropdown=function(b){a(".selectpicker").closest(".dropdown").hasClass("show")&&a(".selectpicker").selectpicker("toggle");
a(".c-press-release-filter").toggleClass("is-open");a(".c-press-release-filter").hasClass("is-open")?(a(".press-filter-label").text(this.hideLabel),a(".filter-btn").find(".toggle--arrow").addClass("menu-active"),a("body").addClass("filters-opened")):(a(".press-filter-label").text(this.showLabel),a(".filter-btn").find(".toggle--arrow").removeClass("menu-active"),a("body").removeClass("filters-opened"));a(".list-item").removeClass("is-active");b.preventDefault();b.stopPropagation()};d.prototype.callSearchFunction=
function(){this.config.value=this.searchKey?this.searchKey:"";this.appliedFilter&&this.appliedFilter.length?(this.config.filter=!0,this.config.filterValue=this.appliedFilter):(this.config.filter=!1,this.config.filterValue="");this.config.currentTargetAnalytics=this.currentTargetAnalytics;var b=f.find(this.pressCardsData,this.config);b&&b.length?this.renderPressReleaseCards(b):(a(".cards-container").addClass("hide-content"),a(".press-load-more").addClass("hide-content"),a(".resultContainerId-noResult").removeClass("hide-content"))};
d.prototype.getQueryString=function(){var b=this;this.searchKey=e.getParameterByName("press_q");this.checkedFilter=e.getParameterByName("press_filters");a(".usrInput").val(this.searchKey);this.searchKey?(a(".search-toggle").addClass("hide-content"),a(".close-toggle").removeClass("hide-content")):(a(".search-toggle").removeClass("hide-content"),a(".close-toggle").addClass("hide-content"));this.appliedFilter=[];this.checkedFilter?(a(".filter-chkbox").prop("checked",!1),this.checkedFilter.split(",").forEach(function(c){a(".filter-chkbox[value\x3d'"+
c+"']").prop("checked",!0);b.appliedFilter.push(c)})):(a(".filter-chkbox").prop("checked",!1),this.appliedFilter.push());(this.order=e.getParameterByName("press_sortOrder"))?(a(".pressAggregation").find("select.selectpicker").val(this.order),a(".pressAggregation").find("select.selectpicker").selectpicker("render"),this.$filterPopup.find(".popup-sort-btn").removeClass("popup-sort-selected border-secondary"),this.$filterPopup.find('.popup-sort-btn[data-value\x3d"'+this.order+'"]').addClass("popup-sort-selected border-secondary")):
(a(".pressAggregation").find("select.selectpicker").val(this.order),a(".pressAggregation").find("select.selectpicker").selectpicker("render"),this.$filterPopup.find(".popup-sort-btn").removeClass("popup-sort-selected border-secondary"),this.$filterPopup.find(".popup-sort-newest").addClass("popup-sort-selected border-secondary"));this.callSearchFunction()};d.prototype.pressReleaseCardsTemplate=function(){return'{{#each this}}\n    \x3cdiv class\x3d"bs_col-12 bs_col-md-4 bs_col-sm-6 bs_d-flex bs_align-items-stretch"\x3e\n      \x3ca href\x3d"{{this.link}}" class\x3d"c-cards-press-release__card tertiary-link-v1 txt-clr-g1"\x3e\n        \x3cdiv class\x3d"c-cards-press-release__card-container border-primary"\x3e\n          \x3cpicture\x3e\n            \x3csource srcset\x3d"{{this.pageImage.large}} 1x, {{this.pageImage.large2x}} 2x" media\x3d"(min-width: 1280px)"\x3e\n            \x3csource srcset\x3d"{{this.pageImage.medium}} 1x, {{this.pageImage.medium2x}} 2x" media\x3d"(min-width: 768px)"\x3e\n            \x3csource srcset\x3d"{{this.pageImage.small}} 1x, {{this.pageImage.small2x}} 2x" media\x3d"(min-width: 0)"\x3e\n            \x3cimg class\x3d"c-cards-press-release__image image-position-desktop__{{this.deskTopImageCrop}} image-position-mobile__{{this.mobileImageCrop}}" src\x3d"{{this.pageImage.default}}" alt\x3d"{{this.pageImageAlt}}"/\x3e\n          \x3c/picture\x3e\n          \x3cdiv class\x3d"c-cards-press-release__content"\x3e\n            \x3ch4 class\x3d"fz-v12 lh-v15 c-cards-press-release__title"\x3e{{this.title}}\x3c/h4\x3e\n            \x3cp class\x3d"family-sans fz-v7 lh-v9 c-cards-press-release__excerpt txt-clr-g2"\x3e{{this.description}}\x3c/p\x3e\n            \x3cp class\x3d"family-sans fw-v4 fz-v4 lh-v2 c-cards-press-release__byline txt-clr-g2"\x3e{{this.location}}{{#if this.location}}{{#if this.pressRealeaseDate}} | {{/if}}{{/if}}{{this.pressRealeaseDate}}\x3c/p\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/a\x3e\n      \x3c/div\x3e\n    {{/each}}'};
d.prototype.renderPressReleaseCards=function(b){void 0===b&&(b=this.pressCardsData);a(".cards-container").removeClass("hide-content");a(".press-load-more").addClass("hide-content");if(b&&b.length){"OLDEST"===this.order&&(b=b.reverse());var c=Handlebars.compile(this.pressReleaseCardsTemplate())(b);a(".cards-container").html(c);a(".resultContainerId-noResult").addClass("hide-content");a(".cards-container").removeClass("hide-content")}else a(".cards-container").addClass("hide-content"),a(".press-load-more").addClass("hide-content"),
a(".resultContainerId-noResult").removeClass("hide-content");a(".cards-container").children().slice(this.loadMoreItems).addClass("hide-content");b&&b.length>this.loadMoreItems&&a(".press-load-more").removeClass("hide-content")};return d}())}($,TNC.SEARCH,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.SearchResults=function(a,f,e){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;return new (function(){function d(){a(".c-search-results-list__container").length&&(this.searchPageMainContainer=a(".c-search-results-list__container"),this.$searchForm=a(".siteSearch"),this.$searchBox=a(".searchBox"),this.$facetsPanelDesktop=a(".facetsPanel"),this.$facetsPanelMobile=a(".mobileFacetsPanel"),this.$searchIcon=
a(".searchIconBtn"),this.$clearBtn=a(".c-search-results__filter-clear, .mobileFacetsPanel .clearFilter"),this.$facetApplyBtn=a(".c-search-results__filter-apply, .mobileFacetsPanel .applyFilter"),this.$filterChkBox=a(".custom_check_box"),this.$facetsToggler=a(".toggler"),this.$srchResPanel=a(".searchResultPanel ul.c-search-results"),this.pagingConatiner=this.searchPageMainContainer.find(".paginationContainer"),this.resultData=null,this.itemPerPageDesktop=parseInt(this.searchPageMainContainer.data("pageSizeDesktop"),
10),this.itemPerPageMobile=parseInt(this.searchPageMainContainer.data("pageSizeMobile"),10),this.desktopPaginationLimit=7,this.moilePaginationLimit=3,this.currentPage=1,this.selectedFacetQueryString="",this.suggestionQueue=null,this.analyticsOnPageLoad=this.pageLoad1=this.pageLoad=!0,this.facetsApplied=!1,this.searchByDomain=a(".srchResultAgg").data("searchByDomain"),this.isRecommended=!1,this.num_search_results=this.recommendedSearchResultData=null,this.searchString="",this.searchResultState=!1,
this.$facetsPanel=a(".facetsPanel, .mobileFacetsPanel"),this.activeFilters="",this.initialize())}d.prototype.initialize=function(){this.initializeHandlers();this.getQueryString()};d.prototype.initializeHandlers=function(){var b=this;window.addEventListener("popstate",function(){b.getQueryString(!1);b.setAnalytics()});a(".srchResultAgg .filter-icon-mobile").on("click",function(){a(".c-cards-srchResult-agg-filter-popup").show();a(".popup-scroller").scrollTop(0);a("body").addClass("bodyOverflowHidden")});
a(".srchResultAgg .popup-close, .srchResultAgg .mobileFacetsPanel .applyFilter, .srchResultAgg .mobileFacetsPanel .clearFilter").on("click",function(){a(".c-cards-srchResult-agg-filter-popup").hide();a("body").removeClass("bodyOverflowHidden")});a(".popup-sort-options").on("click",".sortOptions",function(c){c.preventDefault();a(".sortOptions").removeClass("fw-bold selectedSort border-secondary");a(c.target).addClass("fw-bold selectedSort border-secondary");a(".srchResultAgg .popup-close").trigger("click");
var d=a(c.target).data("value");c=a(c.target).text();a(".selectedSort.c-large-view").html(c).data("value",d);b.currentPage=1;b.submitSearch()});a(".srch-result-sort-by").on("click",function(c){c=a(c.currentTarget).data("componentid");a(".sortSrchDropdown").toggleClass("hideContent");a(".srch-result-sort-by-parent-"+c).find(".js-filter-toggle--arrow").toggleClass("is-open")});a(document).on("click",function(c){a(c.target).closest(".srch-result-sort-by").length||(a(".sortSrchDropdown").addClass("hideContent"),
b.searchPageMainContainer.find(".js-filter-toggle--arrow").removeClass("is-open"));a(c.target).closest(".srch-result-sort-by").length||a(".srchSuggestions").hide()});a(".sortSrchDropdown a").on("click",function(c){c.preventDefault();var d=a(c.target).data("componentid"),e=a(c.target).data("value");c=a(c.target).text();a(".selectedSort-"+d).html(c).data("value",e);a(".srch-result-sort-by").trigger("click");a(".popup-sort-options").find(".sortOptions").removeClass("fw-bold selectedSort border-secondary").filter('[data-value\x3d"'+
e+'"]').addClass("fw-bold selectedSort border-secondary");b.currentPage=1;b.submitSearch()});a("#srch-result-sort-by").on("changed.bs.select",function(){b.currentPage=1;b.submitSearch()});this.$facetApplyBtn.on("click",function(c,d){void 0===d&&(d=!0);c.preventDefault();var g=[];c=null;c=e.checkWindowWidth()?a(".facetsPanel"):a(".mobileFacetsPanel");c.find(".facetMainCategoryContainer").not(".hideContent").each(function(c,b){var d=[];a(b).find(".custom_check_box").not(".off").parent().find(".check_input").each(function(c,
b){d.push(a(b).val())});1<d.length?g.push("(or "+d.join(" ")+")"):1===d.length&&g.push(d[0])});b.selectedFacetQueryString=1<g.length?"(and "+g.join(" ")+")":g.join(" ");b.facetsApplied=!0;d&&(b.currentPage=1,b.submitSearch())});this.$clearBtn.on("click",function(c){c=a(c.target).siblings(".c-accordian").length?a(c.target).siblings(".c-accordian"):a(c.target).closest(".mobileFacetsPanel").find(".c-accordian");c.find(".c-accordian__item input:checkbox").prop("checked",!1);c.find(".custom_check_box").addClass("off");
c.find(".c-accordian__item .toggler").removeClass("toggle-on");c.find(".c-accordian__item .toggler-content").hide();b.selectedFacetQueryString="";b.currentPage=1;b.submitSearch()});this.$facetsToggler.on("click",function(c){c.preventDefault();a(this).toggleClass("toggle-on");a(this).siblings(".toggler-content").toggle()});this.$filterChkBox.on("click",function(c){var b=a(c.target).parent().find(".check_input");c=b.val();b=b.prop("checked");a(".custom_check_box").parent().find(".check_input").filter('[value\x3d"'+
c+'"]').prop("checked",!b).parents(".facetSubCategory").find(".custom_check_box").toggleClass("off")});a(".c-facet-inp-label").on("click",function(c){c.preventDefault();a(c.currentTarget).closest(".facetSubCategory").find(".custom_check_box").trigger("click")});this.$searchForm.on("submit",function(c){c.preventDefault();b.currentPage=1;b.selectedFacetQueryString="";b.facetsApplied=!1;c=a(".selectedSort").data("defaultTitle");var d=a(".selectedSort").data("defaultValue");e.checkWindowWidth()?(a(".selectedSort").data("value",
d),a(".selectedSort").html(c)):(a(".popup-sort-options").find(".sortOptions.selectedSort").data("value",d),a(".popup-sort-options").find(".sortOptions.selectedSort").html(c));a.trim(b.$searchBox.val()).length?(a(".clearSearch").show(),a(".searchIconBtn").hide()):(a(".clearSearch").hide(),a(".searchIconBtn").show());b.submitSearch(!0);a(".srchSuggestions").hide()});this.$searchIcon.on("click",function(a){a.preventDefault();b.$searchForm.trigger("submit")});a(".srchSuggestions").on("click",".suggestionItems",
function(c){c=a(c.target).text();b.$searchBox.val(c);b.$searchIcon.trigger("click")});this.$searchBox.on("input",function(c){a(".clearSearch").hide();a(".searchIconBtn").show();a.trim(c.target.value)&&3<=c.target.value.length?b.triggerAutoSuggest(c.target):setTimeout(function(){b.abortAutoSuggestion()},10)});a(".clearSearch").on("click",function(c){b.$searchBox.val("");a(c.target).hide();a(".searchIconBtn").show();b.facetsApplied=!1;b.selectedFacetQueryString=""});this.pagingConatiner.on("click",
".c-pagination__page",function(c){c.preventDefault();b.currentPage=a(c.target).data("page");b.submitSearch()});this.pagingConatiner.on("click",".c-pagination__previous, .c-pagination__next",function(c){c.preventDefault();b.currentPage+=parseInt(a(c.target).data("page"),10);b.submitSearch()})};d.prototype.getQueryString=function(b){void 0===b&&(b=!0);var c=e.getParameterByName("start"),d=e.checkWindowWidth()?this.itemPerPageDesktop:this.itemPerPageMobile;parseInt(c,10)?this.currentPage=c/d+1:this.currentPage=
1;if(c=e.getParameterByName("fq")){d=c.split(" ");for(var h=/[(|)]/gi,k=0;k<d.length;k++){var f=d[k].replace(h,"");this.$facetsPanel.find('.check_input[value\x3d"'+f+'"]').prop("checked",!0).parents(".facetSubCategory").find(".custom_check_box").removeClass("off")}this.selectedFacetQueryString=c;this.facetsApplied=!0}else this.$facetsPanel.find(".check_input").prop("checked",!1).parents(".facetSubCategory").find(".custom_check_box").addClass("off"),this.selectedFacetQueryString="",this.facetsApplied=
!1;if(c=e.getParameterByName("sort"))d=a(".sortSrchDropdown").find(".ddSort[data-value\x3d'"+c+"']"),a(".selectedSort.c-large-view").text(d.text()).data("value",c),a("select.selectedSort").selectpicker("val",c),a(".popup-sort-options .sortOptions").removeClass("fw-bold selectedSort border-secondary").filter('[data-value\x3d"'+c+'"]').addClass("fw-bold selectedSort border-secondary");c=e.getParameterByName("q");this.updateSearchValue(c,b)};d.prototype.updateSearchValue=function(b,c){void 0===c&&(c=
!0);this.$searchBox.val(b);a.trim(this.$searchBox.val()).length?(a(".clearSearch").show(),a(".searchIconBtn").hide()):(a(".clearSearch").hide(),a(".searchIconBtn").show());this.submitSearch(!0,c)};d.prototype.getFacetsForQueryString=function(){var b={},c=null;c=e.checkWindowWidth()?a(".facetsPanel"):a(".mobileFacetsPanel");c.find(".facetMainCategory").each(function(c,d){b[a(d).data("categoryId")]="{}"});return b};d.prototype.filterSearchKeyWord=function(b){return a.trim(b.replace(/\//g," "))};d.prototype.submitSearch=
function(b,c){var d=this;void 0===b&&(b=!1);void 0===c&&(c=!0);var h=this.$searchBox.val(),k=this.filterSearchKeyWord(h),m=e.checkWindowWidth()?this.itemPerPageDesktop:this.itemPerPageMobile,l=this.getFacetsForQueryString(),p=a(".srchResultAgg").data("searchOptions").split("\x3d");k={url:this.$searchForm.attr("action"),contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",data:{q:k,start:(this.currentPage-1)*m,size:m}};k.data[p[0]]=p[1];l.fq=this.selectedFacetQueryString?"(and search_by_domain:'"+
this.searchByDomain+"'"+this.selectedFacetQueryString+")":"search_by_domain:'"+this.searchByDomain+"'";p=e.checkWindowWidth()?a("select.selectedSort").val():a(".popup-sort-options").find(".sortOptions.selectedSort").data("value");l.sort=p;a.extend(k.data,l);this.pageLoad?this.pageLoad=!1:c&&(l=e.updateQueryString("q",encodeURIComponent(h)),l=e.updateQueryString("fq",this.selectedFacetQueryString,l),l=e.updateQueryString("start",(this.currentPage-1)*m,l),l=e.updateQueryString("size",m,l),l=e.updateQueryString("sort",
p,l),e.updateURL(l));this.$srchResPanel.empty();m=a(".search-results-recommendedSearchList").data("formAction");f.initXHR({url:m,data:{searchTerm:a.trim(h).toLowerCase()}}).then(function(a){d.processRecommendedSearchData(a)});f.initXHR(k).then(function(a){return d.processData(a,b,c)})};d.prototype.processRecommendedSearchData=function(a){this.setVisibilityNoResultTemplate();(this.recommendedSearchResultData=a)&&this.renderRecommended()};d.prototype.processData=function(b,c,d){void 0===d&&(d=!0);b&&
b.hits&&b.hits.found&&parseInt(b.hits.found,10)?(this.setVisibilityNoResultTemplate(),this.resultData=b,this.showHideFacets(c,d),this.renderSearchResults()):!this.analyticsOnPageLoad&&this.facetsApplied&&this.selectedFacetQueryString?(this.facetsApplied=!1,this.renderNoResultsFacets(),this.num_search_results=0,this.searchResultState=!1,this.pagingConatiner.html(""),a(".c-search-results-list__search-results").addClass("removeBoderBottom")):(this.renderNoResults(),this.num_search_results=0,this.searchResultState=
!1);this.$searchBox.val()&&(e.getParameterByName("fq")?this.activeFilters=this.setFilterParam():this.activeFilters="");this.setAnalytics()};d.prototype.setAnalytics=function(){var b=a.trim(e.getParameterByName("q"));this.activeFilters?(b={event_name:"filter_applied",event_action:this.$searchBox.val(),filter_type:this.activeFilters},e.setAnalyticsByPage(b,!0)):b?(b={page_name:!0===this.searchResultState?"search results successful":"search results unsuccessful",event_name:"header_search",event_action:this.$searchBox.val(),
event_category:this.num_search_results,search_term:this.$searchBox.val(),num_search_results:this.num_search_results},e.setAnalyticsByPage(b,!0)):this.analyticsOnPageLoad||(b={page_name:!0===this.searchResultState?"search results successful":"search results unsuccessful",event_name:"header_search",event_action:this.$searchBox.val()?this.$searchBox.val():"undefined",event_category:this.num_search_results,search_term:this.$searchBox.val()?this.$searchBox.val():"undefined",num_search_results:this.num_search_results},
e.setAnalyticsByPage(b,!0));this.analyticsOnPageLoad=!1};d.prototype.setFilterParam=function(){var b={};a(".custom_check_box").not(".off").each(function(c,d){c=a(d).closest(".facetMainCategoryContainer").find(".facetMainCategory").text();b[c]=!0});return Object.keys(b).join("|")};d.prototype.renderNoResultsFacets=function(){a(".c-no-result-facets").removeClass("hideContent");a(".c-search-results").addClass("hideContent")};d.prototype.renderNoResults=function(){a(".filter-icon-mobile").addClass("hideContent").parent().addClass("hideContent");
a(".srchResultAgg").find(".resultContainerId-noResult").removeClass("hideContent");a(".srchResultAgg").find(".c-search-results-list__search-items, .c-search-results-list__search-results, .paginationContainer").addClass("hideContent");a(".srchResultAgg").find(".c-search-results-list").addClass("removeBoderBottom")};d.prototype.setVisibilityNoResultTemplate=function(){a(".filter-icon-mobile").removeClass("hideContent").parent().removeClass("hideContent");a(".c-no-result-facets").addClass("hideContent");
a(".c-search-results").removeClass("hideContent");a(".srchResultAgg").find(".c-search-results-list__search-items").removeClass("hideContent");a(".srchResultAgg").find(".resultContainerId-noResult").addClass("hideContent");a(".srchResultAgg").find(".c-search-results-list__search-results, .paginationContainer").removeClass("hideContent");a(".srchResultAgg").find(".c-search-results-list").removeClass("removeBoderBottom")};d.prototype.showHideFacets=function(b,c){void 0===c&&(c=!0);if(!b)return!1;this.resetFacets(c);
if(this.resultData.facets){b=this.resultData.facets;c=Object.keys(b);for(var d=0;d<c.length;d++)for(var e=c[d],k=0;k<b[e].buckets.length;k++)this.$facetsPanel.find('.check_input[value\x3d"'+(e+":'"+b[e].buckets[k].value+"'")+'"]').closest(".facetSubCategory").removeClass("hideContent").closest(".facetMainCategoryContainer").removeClass("hideContent");this.$facetsPanel.removeClass("hideContent");this.$facetsPanel.has("mobileFacetsPanel")||this.$facetsPanel.find(".facetMainCategoryContainer:visible").length||
this.$facetsPanel.addClass("hideContent");a(".facetsPanel").find(".facetSubCategory").not(".hideContent").length?(this.$facetsPanel.removeClass("hideContent"),a(".searchResultPanel").removeClass("searchFullWidth")):(this.$facetsPanel.addClass("hideContent"),a(".searchResultPanel").addClass("searchFullWidth"))}else a(".searchResultPanel").addClass("searchFullWidth")};d.prototype.searchResultHbsTpl=function(){return'{{#each this.hits.hit}}\n               \x3cli class\x3d"c-search-result-item"\x3e\n                 \x3ca href\x3d"{{this.fields.link}}" target\x3d"{{this.fields.target}}" title\x3d"{{this.fields.title}}"\x3e\n                   \x3ch2 class\x3d"family-serif fw-v2 fz-v14 fz-v16-sm lh-v19 c-search-result-item__title"\x3e{{this.fields.title}}\x3c/h2\x3e\n                   \x3cspan class\x3d"family-sans fw-v4 fz-v7 c-search-result-item__date txt-clr-g2"\x3e{{this.fields.publish_date_label}}\x3c/span\x3e\n                   \x3cp class\x3d"family-serif fw-v2 fz-v8 lh-v11 c-search-result-item__content txt-clr-g1"\x3e\n                     {{{this.fields.description}}}\n                   \x3c/p\x3e\n                 \x3c/a\x3e\n               \x3c/li\x3e\n             {{/each}}'};
d.prototype.recommendedSearchResultTpl=function(){return'{{#if this.title}}\n                \x3cli class\x3d"c-search-result-item recommendedItem"\x3e\n                  \x3cdiv class\x3d"recommended-tag"\x3e\x3cspan class\x3d"icon icon-star"\x3e\x3c/span\x3eRecommended\x3c/div\x3e\n                  \x3ca href\x3d"{{this.link}}" title\x3d"{{this.title}}"\x3e\n                    \x3ch2 class\x3d"family-serif fw-v2 fz-v14 fz-v16-sm lh-v19 c-search-result-item__title"\x3e{{this.title}}\x3c/h2\x3e\n                    \x3cp class\x3d"family-serif fw-v2 fz-v8 lh-v11 c-search-result-item__content txt-clr-g1"\x3e{{{this.description}}}\x3c/p\x3e\n                  \x3c/a\x3e\n                \x3c/li\x3e\n              {{/if}}'};
d.prototype.renderRecommended=function(){var a=Handlebars.compile(this.recommendedSearchResultTpl("recommendedResult"))(this.recommendedSearchResultData);this.$srchResPanel.prepend(a)};d.prototype.renderSearchResults=function(){var b=Handlebars.compile(this.searchResultHbsTpl("results")),c=a(".resultCount"),d=c.data("singleResult"),e=c.data("multipleResult");b=b(this.resultData);this.$srchResPanel.append(b);this.abortAutoSuggestion();this.num_search_results=this.resultData.hits.found;this.searchResultState=
!0;1<this.resultData.hits.found?c.html(e+" "+this.resultData.hits.found):c.html(d+" "+this.resultData.hits.found);this.pagination()};d.prototype.triggerAutoSuggest=function(b){var c=this,d={contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",url:a(b).data("sugesstionApi"),data:{q:a.trim(a(b).val()),suggester:"tnc_suggestor",size:6}};setTimeout(function(){c.abortAutoSuggestion();f.initXHR(d).then(function(a,b,d){return c.renderAutoSuggest(a,d)})},2)};d.prototype.abortAutoSuggestion=function(){null!==
this.suggestionQueue&&(this.suggestionQueue.abort(),this.suggestionQueue=null,a(".srchSuggestions").hide())};d.prototype.renderAutoSuggest=function(b,c){this.suggestionQueue=c;b.suggest.found&&(b=Handlebars.compile('{{#each suggest.suggestions}}\n                                \x3cli class\x3d"bg-clr-g11 c-field__input suggestionItems txt-clr-g1 txt-clr-p4-hover"\x3e{{this.suggestion}}\x3c/li\x3e\n                              {{/each}}')(b),a(".srchSuggestions").html(b).show())};d.prototype.resetFacets=
function(b){void 0===b&&(b=!0);b&&(this.pageLoad1?this.pageLoad1=!1:(this.$facetsPanel.find(".check_input").closest(".facetSubCategory").addClass("hideContent").closest(".facetMainCategoryContainer").addClass("hideContent"),this.$facetsPanel.addClass("hideContent"),this.$filterChkBox.not(".off").each(function(c,b){a(b).trigger("click")})))};d.prototype.pagination=function(){var b=this,c="";var d=function(c,d){var g=parseInt(b.resultData.hits.found,10);g=Math.ceil(g/c);g<d&&(d=g);if(1>=g)return a(".c-search-results-list__search-results").addClass("removeBoderBottom"),
!1;a(".c-search-results-list__search-results").removeClass("removeBoderBottom");c=b.currentPage+Math.floor(d/2);c>g&&(c=g);c<d&&(c=d);(d=c-d+1)||(d=1);return{start:d,end:c,totalPages:g}};if(d=e.checkWindowWidth()?d(this.itemPerPageDesktop,this.desktopPaginationLimit):d(this.itemPerPageMobile,this.moilePaginationLimit)){c='\x3cdiv class\x3d"c-pagination"\x3e\n                        \x3ca class\x3d"c-pagination__previous icon-caret-right-primary icon-chevron-right-secondary border-primary" href\x3d"#" data-page\x3d"-1"\x3e\x3cspan\x3eprev\x3c/span\x3e\x3c/a\x3e\n                        \x3cspan class\x3d"c-pagination__inner"\x3e';
for(var h=d.start;h<=d.end;h++){var k="";h===this.currentPage&&(k="is-active border-secondary");c+='\x3ca class\x3d"family-sans fw-v5 fz-v6 c-pagination__page '+k+' txt-clr-g4 border-secondary" href\x3d"#" data-page\x3d"'+h+'"\x3e'+h+"\x3c/a\x3e"}c+='\x3c/span\x3e\n                        \x3ca class\x3d"c-pagination__next icon-caret-right-primary icon-chevron-right-secondary border-primary" href\x3d"#" data-page\x3d"1"\x3e\x3cspan\x3enext\x3c/span\x3e\x3c/a\x3e\n                      \x3c/div\x3e '}this.pagingConatiner.html(c);
1===this.currentPage&&this.pagingConatiner.find(".c-pagination__previous").prop("disabled",!0).css("pointer-events","none");this.currentPage===d.totalPages&&this.pagingConatiner.find(".c-pagination__next").prop("disabled",!0).css("pointer-events","none")};return d}())}($,TNC.XHR,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.PopUp=function(a,f,e){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;return new (function(){function d(){var b=this;if(window.localeInterstitialShown)a(document).on("hide-localeInterstitial",function(){b.initialize()});else this.initialize(),a(document).on("show-localeInterstitial",function(){a(".c-pop-up[data-componentuniqueid\x3d"+b.componentuniqueid+"]").addClass("isGhostInTheShell")});this.registerHbsHelper()}
d.prototype.initialize=function(){var b=this;a(function(){var c=a(".c-pop-up.isGhostInTheShell"),d=0;c&&c.length&&a(c).each(function(){d++;1<d?a(this).remove():b.init(""+this.id)})})};d.prototype.popUpKeyPress=function(a){"Escape"===a.key&&this.closePopUp()};d.prototype.closeButtonKeyPress=function(a){"Enter"===a.key&&this.closePopUp()};d.prototype.init=function(b){var c=this;this.componentuniqueid=a("#"+b).data("componentuniqueid");this.$el=a("#"+this.componentuniqueid);this.variation=this.$el.find(".c-pop-up__container").attr("data-type");
this.setCookieName="fantastic-"+this.componentuniqueid+"-cookie";this.reOpenOnCloseCookie=this.$el.find(".c-pop-up__container").attr("data-close")?Number(this.$el.find(".c-pop-up__container").attr("data-close")):0;this.reOpenOnSubmitCookie=this.$el.find(".c-pop-up__container").attr("data-submit")?Number(this.$el.find(".c-pop-up__container").attr("data-submit")):0;this.isAuthorView="EDIT"===this.$el.find("input[name\x3disEditMode]").val()?!0:!1;this.popupTitle=(b=this.$el.find("h2.c-pop-up__title"))&&
b.length?a.trim(b.text())+"__"+this.componentuniqueid:this.componentuniqueid;this.cookieParam="s_lookup";this.urlParam01="src";this.urlParam02="lu";var d=this;a(".c-pop-up__close-button[data-id\x3d"+this.componentuniqueid+"]").on("click",function(a){a.stopPropagation();d.closePopUp()});a("body").on("click touchstart",function(b){a(b.target).closest(".c-pop-up__container").length||a(".c-pop-up__close-button[data-id\x3d"+c.componentuniqueid+"]").is(":visible")&&a(".c-pop-up__close-button[data-id\x3d"+
c.componentuniqueid+"]").trigger("click")});this.$el.find("input[name\x3dcons_email]").on("keyup",function(a){13===a.keyCode&&c.validateEmail.bind(c)});a("body").on("keydown",this.popUpKeyPress.bind(this));a(".c-pop-up__close-button[data-id\x3d"+this.componentuniqueid+"]").on("keydown",this.closeButtonKeyPress.bind(this));this.$el.find(".c-pop-up__container[data-type\x3d'ctaLink']").on("click","a, button",function(){var c=a(this).text()?a.trim(a(this).text()):a(this).text(),b=d.popupTitle,g=a(this).closest("form").attr("action");
g&&-1<g.indexOf("https://support.nature.org")?e.setAnalyticsByPage({event_name:"lightbox_member_cta",event_action:""+c,link_name:""+c,lightbox_name:""+b,member_cta_name:""+b},!0):e.setAnalyticsByPage({event_name:"lightbox_click",lightbox_name:""+b,link_name:""+c},!0)});this.$el.find("form").on("submit",this.validateForm.bind(this));this.hasPopUp2Show();a(window).on("resize",function(){d.isMobile()&&d.mobileFix()});d.isMobile()&&d.mobileFix();this.renderQueryparams(this.componentuniqueid)};d.prototype.isMobile=
function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,
4))?!0:!1};d.prototype.isVisible=function(a){return 0<a.length&&"hidden"!==a.css("visibility")&&"none"!==a.css("display")?!0:!1};d.prototype.addDays=function(a,c){return new Date(a.getTime()+864E5*c)};d.prototype.mobileFix=function(){};d.prototype.isValidateCookie=function(){f.getCookie(this.cookieParam);e.getParameterByName(this.urlParam01);e.getParameterByName(this.urlParam02);var b=(new Date).getTime(),c=(new Date(a("#"+this.componentuniqueid).data("start"))).getTime(),d=(new Date(a("#"+this.componentuniqueid).data("end"))).getTime(),
h=f.getCookie("popupRebornOnClose-"+this.componentuniqueid);h=h?(new Date(h)).getTime():h;var k=f.getCookie("popupRebornOnSubmit-"+this.componentuniqueid);k=k?(new Date(k)).getTime():k;return h?h<b?(this.deleteCookieClose(),!0):!1:k?k<b?(this.deleteCookieSubmit(),!0):!1:b>c&&b<d?!0:!1};d.prototype.hasPopUp2Show=function(){this.isAuthorView||(this.isValidateCookie()&&!this.isMobile()?(this.showPopUp(),e.setAnalyticsByPage({event_name:"lightbox_impression",lightbox_name:""+this.popupTitle},!0)):this.hidePopUp())};
d.prototype.validateForm=function(b){switch(this.variation){case "email":this.validateEmail(b);break;case "donation":this.validateDonation(b);break;case "ctaLink":this.onSubmitSetCookie()}b=a("[name\x3d'donationAmount']:checked");0<b.length&&(a("[name\x3d'set.DonationLevel']").val(b.data("donation-level")),a("[name\x3d'donationAmount']").remove())};d.prototype.validateEmail=function(a){var c=this.$el.find("form"),b=this.$el.find("input[name\x3dcons_email]");/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(b.val())?
(a={event_name:"lightbox_email_signup",event_action:""+this.popupTitle,email_signup_location:""+this.popupTitle,lightbox_name:""+this.popupTitle},e.setAnalyticsByPage(a,!0),c.removeClass("is-invalid"),this.onSubmitSetCookie()):(c.addClass("is-invalid"),a.preventDefault(),a={event_name:"submit_error",event_action:""+this.popupTitle,email_signup_location:""+this.popupTitle,lightbox_name:""+this.popupTitle},e.setAnalyticsByPage(a,!0))};d.prototype.validateDonation=function(b){var c=this.$el.find("form");
this.$el.find("input[name\x3ddonationAmount]").is(":checked")?(c.removeClass("is-invalid"),b=c.find("button[type\x3d'submit']").text(),(c=c.attr("action"))&&-1<c.indexOf("https://support.nature.org")?e.setAnalyticsByPage({event_name:"lightbox_member_cta",event_action:b,link_name:b,lightbox_name:""+this.popupTitle,member_cta_name:""+this.popupTitle},!0):"donation"!==a(".c-pop-up__container").data("type")&&e.setAnalyticsByPage({event_name:"lightbox_click",link_name:b,lightbox_name:""+this.popupTitle},
!0),this.onSubmitSetCookie()):(c.addClass("is-invalid"),b.preventDefault())};d.prototype.setCookieClose=function(){var a=this.addDays(new Date,this.reOpenOnCloseCookie);f.deleteCookie(""+this.setCookieName);f.deleteCookie("popupRebornOnSubmit-"+this.componentuniqueid);f.setCookie("popupRebornOnClose-"+this.componentuniqueid,a,this.reOpenOnCloseCookie)};d.prototype.deleteCookieClose=function(){f.deleteCookie(""+this.setCookieName);f.deleteCookie("popupRebornOnClose-"+this.componentuniqueid)};d.prototype.onSubmitSetCookie=
function(){var b=this.addDays(new Date,this.reOpenOnSubmitCookie);f.deleteCookie(""+this.setCookieName);f.deleteCookie("popupRebornOnClose-"+this.componentuniqueid);f.setCookie("popupRebornOnSubmit-"+this.componentuniqueid,b,this.reOpenOnSubmitCookie);a("body").removeClass("modal-open")};d.prototype.deleteCookieSubmit=function(){f.deleteCookie(""+this.setCookieName);f.deleteCookie("popupRebornOnSubmit-"+this.componentuniqueid)};d.prototype.showPopUp=function(){if(!f.getCookie(""+this.setCookieName)){var b=
new Date(a("#"+this.componentuniqueid).data("start")),c=new Date(a("#"+this.componentuniqueid).data("end"));f.setCookie(""+this.setCookieName,b,c)}a("body").addClass("modal-open");a(".c-pop-up[data-componentuniqueid\x3d"+this.componentuniqueid+"]").removeClass("isGhostInTheShell")};d.prototype.hidePopUp=function(){a("body").removeClass("modal-open");a(".c-pop-up[data-componentuniqueid\x3d"+this.componentuniqueid+"]").addClass("isGhostInTheShell")};d.prototype.closePopUp=function(){this.setCookieClose();
this.hidePopUp();a("body").unbind("keydown",this.popupKeyPress)};d.prototype.registerHbsHelper=function(){Handlebars.registerHelper("queryparams",function(b){var c="";b&&(b=b.split("?")[1],(b?b.split("\x26"):[]).forEach(function(a){a=a.split("\x3d");c+="\x3cinput type\x3d'hidden' name\x3d'"+a[0]+"' value\x3d'"+a[1]+"'\x3e"}));a("[name\x3d'donationAmount']:checked")&&(c+="\x3cinput type\x3d'hidden' name\x3d'set.DonationLevel' value\x3d''\x3e");return c})};d.prototype.getQueryparamsTemplate=function(){return"{{{queryparams url}}}"};
d.prototype.renderQueryparams=function(b){var c=Handlebars.compile(this.getQueryparamsTemplate());b=a("[name\x3d'frm-"+b+"']");var d={url:b.attr("action")};d.url&&(c=c(d),b.append(c),b.attr("action",d.url.split("?")[0]))};return d}())}($,TNC.BrowserStorage,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.EventAggregation=function(a,f,e){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;return new (function(){function d(){var b=this;a(function(){b.$el=a(".c-event-aggregation");b.$el.length&&(b.initialize(),b.windowResizeReInit())})}d.prototype.initialize=function(){var b=this;this.$results=this.$el.find(".c-cards-events");this.startDateClass="js-start-day";this.startDateRangeClass="js-start-day-range";
this.endtDateRangeClass="js-end-day-range";var c=this.$el.find("input[name\x3dcalenderlabels]");this.startDateTxt=c.data("start");this.endDateTxt=c.data("end");this.applyBtnTxt=c.data("apply");this.cancelBtnTxt=c.data("calcel");this.resultLabel=c.data("results");this.invalidDate=c.data("error");this.noResultFound=this.$el.find("input[name\x3derrormsg]").val();this.noResultButtonText=this.$el.find("input[name\x3dnoresultbutton]").val();this.dropdownType=this.$el.find("input[name\x3dstateDropdownType]").val();
this.eventStore=null;this.isPageLoad=!0;this.serviceUrl=this.$el.find("input[name\x3dserviceurl]").val();this.pagination=12;this.cachedWidth=this.currentPaging=this.noOfPaging=0;this.searchClicked=this.buttonClicked="";this.initDatePicker();this.getGeolocation();this.routerEvents();a(function(){b.eventHandler()})};d.prototype.eventHandler=function(){var b=this;this.$el.find("#regionList").on("click",b,b.regionDropDown);this.$el.find("#StateList").on("click",b.stateDropDown);this.$el.find("input[name\x3dsearch-event]").keypress(function(c){13===
c.which&&b.searchEvents(c);a(".clearSearch").show();a(".js-event-search-btn").hide()});a(".c-input").on("input",function(){a(".clearSearch").hide();a(".js-event-search-btn").show()});this.$el.find(".js-event-search-btn").on("click",function(c){b.searchEvents(c);a(".clearSearch").show();a(".js-event-search-btn").hide()});this.$el.find(".clearSearch").on("click",function(){a(".c-input").val("");a(".js-event-search-btn").show();a(".clearSearch").hide();this.isClearSearch=!0;var c=f.updateQueryString("q",
"");b.updateURL(c);c=b.getSearchUrl();b.getEventService(c,!1)});this.$el.find(".js-regionState-btn").on("click",function(a){a.preventDefault();a=b.$el.find("input[name\x3dregionName]").val();var c=b.$el.find("input[name\x3dstateName]").val();if(a){var d=b.updateQueryString("r",a);b.updateURL(d)}d=c?b.updateQueryString("s",c):b.removeURLParameter("s","");b.updateURL(d);c=c?c:"undefined";f.setAnalyticsByPage({event_name:"find_local_opps",event_action:a+" | "+c,local_opp_search:a+" | "+c},!0);b.buttonClicked=
!0;b.searchClicked=!1;a=b.getSearchUrl();b.getEventService(a)});this.$el.find(".c-cards-events__more-events").on("click","a",function(a){a.preventDefault();b.currentPaging+=1;b.eventCardsView(b.currentPaging,a)});this.$el.find("input[name\x3dsearch-event]").val()&&(a(".clearSearch").show(),a(".js-event-search-btn").hide());a(document).click(function(){a(".list-item").removeClass("is-active txt-clr-p4")})};d.prototype.windowResizeReInit=function(){var b=this;this.cachedWidth=a(window).width();a(window).on("resize",
function(){var c=a(window).width();if(c!==b.cachedWidth){b.cachedWidth=c;c=a(".tnc-daterangepicker").is(":visible");var d=a("#selectDateFilter").daterangepicker("getRange");a("#selectDateFilter").daterangepicker("destroy");a(".ui-front.tnc-daterangepicker-mask").remove();b.initDatePicker();a("#selectDateFilter").daterangepicker("setRange",d);a("#selectDateFilter").next().addClass("dateSelectedWidth");c&&(a("#selectDateFilter").daterangepicker("close"),a("#selectDateFilter").daterangepicker("open"))}})};
d.prototype.isValidDate=function(a){return a.match(/^(?:(0[1-9]|1[012])[\- \/.](0[1-9]|[12][0-9]|3[01])[\- \/.](19|20)[0-9]{2})$/)?!0:!1};d.prototype.isPastDate=function(a,c){return a&&c&&new Date(c)<a?!0:!1};d.prototype.formateDate=function(a,c){a=new Date(a);return c?a.toLocaleDateString("en-US",{month:"short",day:"2-digit"}):a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})};d.prototype.formatTime=function(a){return(new Date(a)).toLocaleString("en-US",{hour:"numeric",minute:"numeric",
hour12:!0})};d.prototype.getTodayDate=function(){var a=new Date,c=a.getDate(),d=a.getMonth()+1;a=a.getFullYear();10>c&&(c="0"+c);10>d&&(d="0"+d);return a+"-"+d+"-"+c};d.prototype.updateQueryString=function(a,c,d){d||(d=window.location.href);var b=new RegExp("([?\x26])"+a+"\x3d.*?(\x26|#|$)(.*)","gi");if(b.test(d)){if("undefined"!==typeof c&&null!==c)return d.replace(b,"$1"+a+"\x3d"+c+"$2$3");var g=d.split("#");d=g[0].replace(b,"$1$3").replace(/(&|\?)$/,"");"undefined"!==typeof g[1]&&null!==g[1]&&
(d+="#"+g[1]);return d}"undefined"!==typeof c&&null!==c&&(b=-1!==d.indexOf("?")?"\x26":"?",g=d.split("#"),d=g[0]+b+a+"\x3d"+c,"undefined"!==typeof g[1]&&null!==g[1]&&(d+="#"+g[1]));return d};d.prototype.removeURLParameter=function(a,c){c||(c=window.location.href);var b=c.split("?");if(2<=b.length){a=encodeURIComponent(a)+"\x3d";c=b[1].split(/[&;]/g);for(var d=c.length;0<d--;)-1!==c[d].lastIndexOf(a,0)&&c.splice(d,1);c=b[0]+(0<c.length?"?"+c.join("\x26"):"")}return c};d.prototype.getParameterByName=
function(a,c){c||(c=window.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(c))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null};d.prototype.updateURL=function(a){return history.pushState(null,null,a)};d.prototype.showErrorMsg=function(){alert(this.invalidDate)};d.prototype.isMobile=function(){return/Android|webOS|iPhone|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||640>=a(window).width()?!0:!1};d.prototype.getGeolocation=
function(){var b=this;"no"===a(".c-event-aggregation").data("disableGeoService")&&f.checkGeolocation().then(function(a){return b.renderEventsByGeoLocation(a)})};d.prototype.getStateByCode=function(a,c){return a.filter(function(a){return a.code===c})};d.prototype.renderEventsByGeoLocation=function(b){var c=b.response["edge-country"].toLowerCase(),d=b.response["edge-region"].toLowerCase(),e=a(".geolocationdatastr").html();e&&(e=JSON.parse(e));a("button.js-regionState-btn").prop("disabled",!1);var k=
a("#regionList [data-code\x3d'"+c+"']"),f=a("#StateList [data-code\x3d'"+c+"']"),l=this.getParameterByName("r"),p=this.getParameterByName("s");c=this.getParameterByName("q");var q=k&&k.length?"region":f&&f.length?"state":!1;b=this.getParameterByName("start");var n=this.getParameterByName("end");if(l||p)this.renderPageByDeepLink();else{if("region"===q){f=k.data("id");if(k=k.text())a("input[name\x3dregionName]").val(k),a("#regionList").find("label").html(k);k=a("#StateList");k.find(".show-me").removeClass("show-me");
k.find("#"+f).addClass("show-me");if(e){var v={};e.forEach(function(a){v[a.geoLocationStateCode]=a.geoNavTitle});d=v[d];d=d.replace(/\s/g,"");if(d=a("#StateList [data-id\x3d'"+d+"']").text())k.find("label").html(d),a("input[name\x3dstateName]").val(d)}}else"state"===q&&(k=a("#StateList"),d=f.text(),f=f.parents("ul.dropdown").attr("id"),d&&(k.find("label").html(d),k.find(".show-me").removeClass("show-me"),k.find("#"+f).addClass("show-me"),a("input[name\x3dstateName]").val(d)),d=a("#regionList li a[data-id\x3d'"+
f+"']").text())&&(a("#regionList").find("label").html(d),a("input[name\x3dregionName]").val(d));c?(c="*"===c?"":c,this.$el.find("input[name\x3dsearch-event]").val(c)):this.$el.find("input[name\x3dsearch-event]").val("");b&&n&&(b=new Date(b),n=new Date(n),a("#selectDateFilter").daterangepicker("setRange",{start:b,end:n}),a("#selectDateFilter").next().addClass("dateSelectedWidth"));c=this.getSearchUrl();this.getEventService(c,!1)}};d.prototype.renderPageByDeepLink=function(){var b=this.getParameterByName("r"),
c=this.getParameterByName("s"),d=this.getParameterByName("q"),e=this.getParameterByName("start"),k=this.getParameterByName("end");a("button.js-regionState-btn").prop("disabled",!1);if(b||c){b&&(a("input[name\x3dregionName]").val(b),a("#regionList").find("label").html(b));if(b){b=a("#regionList [data-value\x3d'"+b+"']").data("id");var f=a("#StateList");f.find(".show-me").removeClass("show-me");f.find("#"+b).addClass("show-me");c&&(f.find("label").html(c),a("input[name\x3dstateName]").val(c))}else!b&&
c&&(f=a("#StateList"),f.find("label").html(c),a("input[name\x3dstateName]").val(c));d?(d="*"===d?"":d,this.$el.find("input[name\x3dsearch-event]").val(d)):this.$el.find("input[name\x3dsearch-event]").val("");e&&k&&(e=new Date(e),k=new Date(k),a("#selectDateFilter").daterangepicker("setRange",{start:e,end:k}),a("#selectDateFilter").next().addClass("dateSelectedWidth"));c=this.getSearchUrl();this.getEventService(c,!1)}else this.getGeolocation()};d.prototype.routerEvents=function(){var a=this;window.addEventListener("popstate",
function(){a.renderPageByDeepLink()},!1)};d.prototype.regionDropDown=function(b){b.preventDefault();b.stopPropagation();a("body").toggleClass("cover-footer");a("#StateList").removeClass("is-active txt-clr-p4");a(this).toggleClass("is-active txt-clr-p4");a(this).find("li \x3e a").on("click",function(c){c.preventDefault();a("button.js-regionState-btn").prop("disabled",!1);c=a(this).attr("data-id");var b=a(this).text(),d=a("#StateList");a("input[name\x3dregionName]").val(b);a("#regionList").find("label").html(b);
"unitedstates"===b.toLowerCase().replace(/ /g,"")||"canada"===b.toLowerCase().replace(/ /g,"")?d.find("label").html(a(".c-event-aggregation input[name\x3dStateDropDown2]").val()):d.find("label").html(a(".c-event-aggregation input[name\x3dStateDropDown]").val());d.find(".show-me").removeClass("show-me");d.find("#"+c).addClass("show-me");a("input[name\x3dstateName]").val("");a("#StateList").find("#"+c).children().length?d.removeAttr("disabled data-disabled"):d.attr({disabled:!0,"data-disabled":!0})})};
d.prototype.stateDropDown=function(b){b.preventDefault();b.stopPropagation();a("body").toggleClass("cover-footer");a("#regionList").removeClass("is-active txt-clr-p4");a(this).toggleClass("is-active txt-clr-p4");a(this).find("li \x3e a").on("click",function(c){c.preventDefault();a("button.js-regionState-btn").prop("disabled",!1);c=a(this).text();a("input[name\x3dstateName]").val(c);a("#StateList").find("label").html(c)})};d.prototype.searchEvents=function(b){b.preventDefault();b.stopPropagation();
if(b=a("input[name\x3dsearch-event]").val()?a("input[name\x3dsearch-event]").val():"*")b=this.updateQueryString("q",b),this.updateURL(b),this.buttonClicked=!1,this.searchClicked=!0,b=this.getSearchUrl(),this.getEventService(b)};d.prototype.initDatePicker=function(){var b=this;this.calender_i18n();b.initialText=a("input[name\x3dcalendardropdowntitle]").val();b.numberOfMonths=2;b.autoFitCalendars=!1;b.maxDate="+24m +1w";b.inputBoxHtml='\x3cdiv class\x3d"tnc-startEnd-input family-sans fz-v9 fw-normal lhr-v1 txt-clr-g2"\x3e\n                \x3cinput type\x3d"text" class\x3d"tnc-startDate family-sans fz-v9 fw-v2" placeholder\x3d"'+
b.startDateTxt+'" title\x3d"mm/dd/yyyy"\x3e  \x3cspan class\x3d"txt-clr-g4"\x3e_\x3c/span\x3e\n                \x3cinput type\x3d"text" class\x3d"tnc-endDate family-sans fz-v9 fw-v2" placeholder\x3d"'+b.endDateTxt+'" title\x3d"mm/dd/yyyy" disabled\x3d"disabled"\x3e\x3c/div\x3e';b.isMobile()&&(b.numberOfMonths=24,b.inputBoxHtml+='\x3ctable class\x3d"daterangepicker-custom-header family-sans fz-v6 fw-normal lh-v5 txt-clr-g2"\x3e\x3ctr class\x3d"custom-daynames"\x3e\x3c/tr\x3e\x3c/table\x3e',setTimeout(function(){var c=
a("table.ui-datepicker-calendar thead tr").html();a(".custom-daynames").html(c)},100));b.options={autoFitCalendars:!1,customInputBoxes:b.inputBoxHtml,initialText:b.initialText,presetRanges:null,cancelButtonText:"",applyButtonText:b.applyBtnTxt,clearButtonText:b.cancelBtnTxt,dateFormat:"mm/dd/yy",clear:function(){a(".tnc-startDate").val()?(a(this).daterangepicker("destroy"),a(this).daterangepicker(b.options),a(this).daterangepicker("open"),b.datePickerEvents(),b.resetQueryString(),b.renderPageByDeepLink()):
a(this).daterangepicker("close");a("#selectDateFilter").next().removeClass("dateSelectedWidth")},open:function(){if(b.isMobile()){var c=a(window).height();a("body").addClass("stop-scrolling");a(".mobile-daterangepicker .ui-datepicker-inline.ui-datepicker-multi-24").css({"max-height":c-250})}c=a(".tnc-startDate").val();a(".tnc-startDate").addClass("tnc-DateActive");var d=a(".tnc-endDate").val();c&&d?c===d?b.setClass2DateElement(c,b.startDateClass):(b.setClass2DateElement(c,b.startDateRangeClass),b.setClass2DateElement(d,
b.endtDateRangeClass)):c&&!d&&b.setClass2DateElement(c,b.startDateClass)},close:function(){var c=a(this);a("body").removeClass("stop-scrolling");setTimeout(function(){var a=c.val();if(a){a=JSON.parse(a);var d=b.updateQueryString("start",a.start);b.updateURL(d);a=b.updateQueryString("end",a.end);b.updateURL(a)}else b.resetQueryString()},0)},datepickerOptions:{firstDay:0,numberOfMonths:b.numberOfMonths,minDate:0,maxDate:b.maxDate,dateFormat:"mm/dd/yy",showMonthAfterYear:!1,countSelect:1,beforeShowDay:function(a){var c=
a.getFullYear(),b=("0"+(a.getMonth()+1)).slice(-2);return[!0,"cell-"+("0"+a.getDate()).slice(-2)+"-"+b+"-"+c,""]},onSelect:function(c){if(0!==this.countSelect%2){this.countSelect++;var d=a.extend({},this,{minDate:a.datepicker.parseDate("mm/dd/yy",c)});a("#selectDateFilter").daterangepicker({datepickerOptions:d});b.setClass2DateElement(c,b.startDateClass);a(".tnc-startDate").val(c);a(".tnc-startDate").removeClass("tnc-DateActive");a(".tnc-endDate").removeAttr("disabled");a(".tnc-endDate").addClass("tnc-DateActive")}else d=
a.datepicker.parseDate("mm/dd/yy",a(".tnc-startDate").val()),a(".tnc-endDate").val(c),b.setClass2DateElement(d,b.startDateRangeClass),b.setClass2DateElement(c,b.endtDateRangeClass),this.countSelect++;b.datePickerEvents();c=a.datepicker.parseDate("mm/dd/yy",a(".tnc-startDate").val());d=a.datepicker.parseDate("mm/dd/yy",a(".tnc-endDate").val());a("#selectDateFilter").daterangepicker("setRange",{start:c,end:d});a(".tnc-startDate").val()?a("#selectDateFilter").next().addClass("dateSelectedWidth"):a("#selectDateFilter").next().removeClass("dateSelectedWidth")}}};
a("#selectDateFilter").daterangepicker(b.options);this.datePickerEvents()};d.prototype.calender_i18n=function(){var b=a("html")[0].lang||"en-US";a.datepicker.setDefaults(a.datepicker.regional[b])};d.prototype.datePickerEvents=function(){var b=this;a(".tnc-daterangepicker .tnc-startDate").off("focus").on("focus",function(){a(this).data("placeholder",a(this).attr("placeholder"));a(this).attr("placeholder",a(this).attr("title"))}).on("blur",function(){a(this).attr("placeholder",a(this).data("placeholder"));
var c=a(this).val();b.setStartDateInCalendar(c)});a(".tnc-daterangepicker .tnc-startDate").keydown(function(c){13===c.keyCode&&(c=a(this).val(),b.setStartDateInCalendar(c))});a(".tnc-daterangepicker .tnc-endDate").off("focus.datepickerfs").on("focus.datepickerfs",function(){a(this).data("placeholder",a(this).attr("placeholder"));a(this).attr("placeholder",a(this).attr("title"))}).off("blur.datepickerbr").on("blur.datepickerbr",function(c){c.stopImmediatePropagation();a(this).attr("placeholder",a(this).data("placeholder"));
c=a(this).val();b.setEndDateInCalendar(c)});a(".tnc-daterangepicker .tnc-endDate").off("keydown").on("keydown",function(c){13===c.keyCode&&(c.preventDefault(),c.stopImmediatePropagation(),a(this).off("blur"),c=a(this).val(),b.setEndDateInCalendar(c))});a(".tnc-daterangepicker-buttonpanel .ui-priority-primary.ui-button").on("click",function(c){c.stopImmediatePropagation();c.preventDefault();setTimeout(function(){var c=a("#selectDateFilter").val()?JSON.parse(a("#selectDateFilter").val()):null,d=c?c.start:
null;c=c?c.end:d;d&&c&&(d=b.getSearchUrl(),b.getEventService(d,!1))},0)});a(".tnc-daterangepicker-icon-close").on("click",function(c){c.preventDefault();a("#selectDateFilter").daterangepicker("close")})};d.prototype.setClass2DateElement=function(b,c){b=new Date(b);var d=b.getFullYear(),e=("0"+(b.getMonth()+1)).slice(-2),k="td.cell-"+("0"+b.getDate()).slice(-2)+"-"+e+"-"+d;setTimeout(function(){a(".ui-datepicker-calendar td \x3e a").removeClass(c);a(".ui-datepicker-calendar").find(k).addClass(c)},
0)};d.prototype.setStartDateInCalendar=function(b){if(b)if(this.isValidDate(b))if(this.isPastDate((new Date).setHours(0,0,0,0),b))a(".tnc-startDate").val(""),a("#selectDateFilter").next().removeClass("dateSelectedWidth");else{var c=new Date(b);a("#selectDateFilter").daterangepicker("setRange",{start:c,end:c});this.setClass2DateElement(b,this.startDateClass);a(".tnc-endDate").removeAttr("disabled");this.isValidDate(a(".tnc-endDate").val())&&(this.setClass2DateElement(b,this.startDateRangeClass),this.setEndDateInCalendar(a(".tnc-endDate").val()))}else a(".tnc-startDate").val(""),
a("#selectDateFilter").next().removeClass("dateSelectedWidth"),this.showErrorMsg()};d.prototype.setEndDateInCalendar=function(b){var c=new Date(b),d=a(".tnc-startDate").val();if(d&&c&&b){var e=new Date(d);this.isValidDate(b)?this.isPastDate(e,b)?(a(".tnc-endDate").val(""),this.showErrorMsg()):(a("#selectDateFilter").daterangepicker("setRange",{start:e,end:c}),this.setClass2DateElement(d,this.startDateRangeClass),this.setClass2DateElement(b,this.endtDateRangeClass)):this.showErrorMsg()}};d.prototype.resetQueryString=
function(){var a=this.removeURLParameter("start");this.updateURL(a);a=this.removeURLParameter("end");this.updateURL(a)};d.prototype.calcTotalPaging=function(a){this.currentPaging=0;this.noOfPaging=Math.ceil(a.found/this.pagination)-1};d.prototype.getEventService=function(a,c){void 0===c&&(c=!0);var b=this;if(!a)return!1;e.initXHR({url:b.serviceUrl,type:"GET",data:a,dataType:"json"}).then(function(a){a&&a.hits&&a.hits.found&&a.hits.hit?(b.calcTotalPaging(a.hits),b.showNoOfResults(a.hits.found),b.eventCardsModel(a.hits.hit)):
(b.calcTotalPaging(a.hits),b.showNoOfResults(a.hits.found),a=b.noResultFoundTemplate(),b.$results.html(a),b.registerEventForClearCTA());!c||b.buttonClicked&&!b.searchClicked||b._setAnalytics();b.isPageLoad=!1})};d.prototype.getSearchUrl=function(){var b=a("input[name\x3dregionName]").val(),c=a("input[name\x3dstateName]").val(),d=a("input[name\x3dsearch-event]").val()?a("input[name\x3dsearch-event]").val():"*",e=a("#selectDateFilter").val(),k=a("input[name\x3ddomain]").val(),f=this.getTodayDate(),
l="",p="",q="",n="";d&&(n+="q\x3d"+d,"*"===d&&(n+="\x26q.parser\x3dlucene"));b&&"undefined"!==b&&(p="event_region_title:'"+b+"'");c&&(l="event_locale_title:'"+c+"'");k&&(q="search_by_domain:'"+k+"'");e?(e=JSON.parse(e),b=e.start,e=e.end,n+="\x26fq\x3d(and template_name:'eventdetailpage'"+q+"(or geographic_location:'all_locations'(and "+p+l+"))event_start_date: ['"+b+"T00:00:00Z','"+e+"T23:59:59Z'})"):n+="\x26fq\x3d(and template_name:'eventdetailpage'"+q+"(or geographic_location:'all_locations'(and "+
p+l+"))event_start_date: ['"+f+"T00:00:00Z',})";n+="\x26sort\x3devent_start_date_sort asc";this.pagination&&(n+="\x26size\x3d200");return encodeURI(n)};d.prototype.getClosestDate=function(a,c){var b=Infinity;c.forEach(function(c){var d=new Date(c);d>=a&&d<b&&(b=c)});return b};d.prototype.sortByDate=function(a,c){a=(new Date(a.sortDate)).getTime();c=(new Date(c.sortDate)).getTime();return a>c?1:-1};d.prototype.sortEventsByDate=function(b){var c=this,d=a("#selectDateFilter").val()?JSON.parse(a("#selectDateFilter").val()):
null,e=d?d.start:null;null===e?e=new Date((new Date).setHours(0,0,0,0)):(e=new Date(""+e),e.setHours(0,0,0,0));a.each(b,function(a,b){"yes"===b.fields.event_recurring?a=c.getClosestDate(e,b.fields.event_start_date):(a=c.getClosestDate(e,b.fields.event_end_date))&&Infinity!==a&&(a=b.fields.event_start_date[0]);a&&Infinity!==a&&(b.sortDate=a)});b.sort(this.sortByDate);this.eventStore=b};d.prototype.eventCardsModel=function(b){this.eventStore=a.extend(!0,{},b);this.sortEventsByDate(b);this.eventCardsView(0)};
d.prototype.eventCardsView=function(a,c){var b=this.eventStore;a*=this.pagination;a=b.slice(a,a+this.pagination);console.log("eventCardsView data log:  "+JSON.stringify(b));c?this.renderEventCards(a,!0):this.renderEventCards(a,!1)};d.prototype.isOneDayEvent=function(a,c){a=(new Date(a)).toDateString();c=(new Date(c)).toDateString();return(new Date(a)).getTime()===(new Date(c)).getTime()?!0:!1};d.prototype.renderEventCards=function(b,c){var d=this,e="";a.each(b,function(a,c){e+=d.templateForEventCards(c)});
c?this.$results.append(e):this.$results.html(e);this.enableLoadMoreEvents(b)};d.prototype.registerEventForClearCTA=function(){a(".clear-button-container").find(".noResultBtn").on("click",function(b){b.preventDefault();a("#selectDateFilter").daterangepicker("clearRange");a("#selectDateFilter").daterangepicker("close");a(".clearSearch").trigger("click");a("#selectDateFilter").next().removeClass("dateSelectedWidth")})};d.prototype.templateForEventCards=function(a){console.log("event cards data: "+a);
var c='\x3cdiv class\x3d"bs_col-12 bs_col-md-4 bs_col-sm-6 bs_d-flex bs_align-items-stretch"\x3e'+('\x3ca href\x3d"'+a.fields.link+'" class\x3d"c-cards-events__card txt-p2-hover" id\x3d"'+a.id+'"\x3e\n            \x3cdiv class\x3d"c-cards-events__content"\x3e\n            \x3cp class\x3d"c-cards-events__date family-sans fz-v6 fw-v4 lhr-v3 txt-clr-p2 border-primary-sudo __date"\x3e'+a.fields.event_dates+"\x3c/p\x3e");a.fields.event_site&&(c+='\x3cdiv class\x3d"c-cards-events__date family-sans fz-v5 fw-v3 txt-clr-p2 border-primary-sudo c-cards-event__site"\x3e\n                \x3cdiv class\x3d"c-cards-events__loc-icon"\x3e\n                  \x3csvg width\x3d"14px" height\x3d"17px" viewBox\x3d"0 0 14 17" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3ctitle\x3eIcon / Location\x3c/title\x3e \x3cdesc\x3eCreated with Sketch.\x3c/desc\x3e \x3cg id\x3d"_Optimized-Components" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e \x3cg id\x3d"C25-Related-Events-Feed---Location" transform\x3d"translate(-184.000000, -244.000000)" stroke\x3d"#3C3C3C"\x3e \x3cg id\x3d"Event-Card-1" transform\x3d"translate(155.000000, 192.000000)"\x3e \x3cg id\x3d"Icon-/-Location" transform\x3d"translate(30.000000, 53.000000)"\x3e \x3cg\x3e \x3cpath d\x3d"M8.14348007,6.09375 C8.14348007,7.3880654 7.12402932,8.4375 5.86669435,8.4375 C4.60935939,8.4375 3.58990864,7.3880654 3.58990864,6.09375 C3.58990864,4.7994346 4.60935939,3.75 5.86669435,3.75 C7.12402932,3.75 8.14348007,4.7994346 8.14348007,6.09375 Z" id\x3d"Stroke-1" stroke-width\x3d"1.5"\x3e\x3c/path\x3e \x3cpath d\x3d"M2.19489146,10.7266681 C1.62329017,10.0398146 1.1091844,9.30479458 0.687550587,8.51582815 C0.419238163,8.01297042 0.179673498,7.47302453 0.100617159,7.03230152 C0.0910345725,7.01303494 0.0910345725,6.98895172 0.0862432792,6.96968514 C0.0287477597,6.64215329 0,6.3001715 0,5.95337307 C0,2.66360462 2.64958519,0 5.91724721,0 C9.18970053,0 11.8392857,2.66360462 11.8392857,5.95337307 C11.8392857,6.3001715 11.810538,6.64215329 11.7530424,6.96968514 C11.7482511,6.98895172 11.7482511,7.01303494 11.7434598,7.03230152 C11.5072491,8.32942399 9.92037275,10.3374832 9.92037275,10.3374832 L5.97665925,14.9359341 C5.90287333,15.0221521 5.76967538,15.0211887 5.69732685,14.9340074 L2.19489146,10.7266681 Z" id\x3d"Stroke-3" stroke-width\x3d"1.5"\x3e\x3c/path\x3e \x3c/g\x3e \x3c/g\x3e \x3c/g\x3e \x3c/g\x3e \x3c/g\x3e \x3c/svg\x3e\n                \x3c/div\x3e\n                 '+
a.fields.event_site+"\n                \x3c/div\x3e");c+='\x3ch2 class\x3d"c-cards-events__title fz-v12 lh-v15"\x3e'+(a.fields.event_title?a.fields.event_title:a.fields.title)+"\x3c/h2\x3e";c="yes"===a.fields.event_all_day?c+'\x3cp class\x3d"c-cards-events__time family-sans fw-v2 fz-v7 txt-clr-g2"\x3eAll day\x3c/p\x3e':c+('\x3cp class\x3d"c-cards-events__time family-sans fw-v2 fz-v7 txt-clr-g2"\x3e'+a.fields.event_timings+"\x3c/p\x3e");c+='\x3cp class\x3d"c-cards-events__description family-sans fz-v7 lh-v10 txt-clr-g2"\x3e'+
a.fields.description+'\x3c/p\x3e\n                        \x3cp class\x3d"c-cards-events__eventdetails"\x3eSEE EVENT DETAILS \x3csvg width\x3d"6px" height\x3d"11px" viewBox\x3d"0 0 6 11" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\n                        \x3cg id\x3d"UI-Element-/-Forward-Arrow-/-Green" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\n                            \x3cpolyline id\x3d"Stroke-1-Copy-2" stroke\x3d"#007931" stroke-width\x3d"2" transform\x3d"translate(3.000000, 5.500000) rotate(-90.000000) translate(-3.000000, -5.500000) " points\x3d"8 3 3 8 -2 3"\x3e\x3c/polyline\x3e\n                        \x3c/g\x3e\n                    \x3c/svg\x3e\n                \x3c/p\x3e\n            \x3c/div\x3e\x3c/a\x3e';
return c+"\x3c/div\x3e"};d.prototype.noResultFoundTemplate=function(){this.enableLoadMoreEvents();this.$el.find(".c-result-count").html(0);return'\x3cdiv class\x3d"container__inner-narrow mx-auto eg-no-result-found"\x3e\n        \x3ch2 class\x3d"c-feature-one-column__heading family-sans fw-v2 fz-v21 lh-v21 fz-v14-md lh-v16-md"\x3e\n            '+this.noResultFound+'\n        \x3c/h2\x3e\x3cdiv class\x3d"clear-button-container"\x3e\x3ca href\x3d"#" class\x3d"c-button noResultBtn c-feature-one-column__button txt-clr-alt"\x3e\n       '+
this.noResultButtonText+"\n      \x3c/a\x3e\x3c/div\x3e\x3cdiv\x3e"};d.prototype.showNoOfResults=function(a){0<a?(this.$el.find(".c-result-label").show(),this.$el.find(".c-result-count").html(a)):this.$el.find(".c-result-label").hide()};d.prototype.enableLoadMoreEvents=function(){1<=this.noOfPaging&&this.noOfPaging>this.currentPaging?this.$el.find(".c-cards-events__more-events").addClass("show-me"):this.$el.find(".c-cards-events__more-events").removeClass("show-me")};d.prototype._setAnalytics=function(){var a=
this.$el.find("input[name\x3dsearch-event]").val(),c=this.$el.find(".c-result-count").text();c=c?c:0;this.isPageLoad||f.setAnalyticsByPage({event_name:"asset_search",event_action:a?a:"undefined",event_category:c,search_term:a?a:"undefined",search_type:"event",num_search_results:c},!0)};return d}())}($,TNC.Utility,TNC.XHR);this.ALTRIA=this.ALTRIA||{};this.ALTRIA.PartnerBrandLogo=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();
this.TNC=this.TNC||{};
this.TNC.Forms=function(a,f,e,d){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;d=d&&d.hasOwnProperty("default")?d["default"]:d;return new (function(){function b(){this.passedValidation=!0;this.minAgeOfPerson=0;this.initialize();this.events()}b.prototype.initialize=function(){0!==a("form.start-form").length&&(this.initFormLoadAnalytics(),a("#btn-reset").on("click",this.resetForm),this.initializeDefaultCountry(),
this.submitForm())};b.prototype.events=function(){var c=this;a("select.form-control-country").off("changed.bs.select").on("changed.bs.select",function(){a(this).val()&&c.populateStateDropdown(a(this),!1)});a("select.form-control-month").off("changed.bs.select").on("changed.bs.select",function(){a(this).val()&&c.populateDates(a(this))})};b.prototype.initializeDefaultCountry=function(){var c=this;a(".form-control-state").each(function(b,d){b=d.getAttribute("id");if(0<a(".form-control-country[data-stateid\x3d'"+
b+"']").length)c.populateCountryDropdown();else{b=d.getAttribute("data-def-countryId");var g=d.getAttribute("data-def-name");"undefined"!==typeof b&&"false"!==b&&"undefined"!==typeof g&&"false"!==g&&c.populateStateDropdown(d,b)}})};b.prototype.validateFormElements=function(){var c=this;a(".form-control-input, .form-control-textarea").each(function(b,d){b=a(d).attr("data-required");var g=a(d).attr("data-pattern"),e=new RegExp(g),h=a(d).val();"true"===b?""===h||void 0===h||null===h?(a(d).parent().find(".error-msg").addClass("has-error txt-clr-err"),
a(d).addClass("border-error icon-error-forms"),c.passedValidation=!1):c.regExpTest(a(d),e,h):""!==h&&void 0!==h&&null!==h&&""!==g&&void 0!==g&&null!==g&&c.regExpTest(a(d),e,h)});a(".form-control-radio, .form-control-checkbox").each(function(b,d){"true"===a(d).attr("data-required")&&(b=a(d).parent().find(".error-msg"),0===b.length&&(b=a(d).parents(".form-check").find(".error-msg")),!1===a(d).prop("checked")?(b.addClass("has-error txt-clr-err"),c.passedValidation=!1):b.removeClass("has-error txt-clr-err"))});
a("select.form-control-select").each(function(a,b){c.validateDropDowns(b)})};b.prototype.validateDropDowns=function(c){var b=a(c).attr("data-required"),d=a(c).closest(".form-group-select");"true"===b&&(c=a(c).val(),""===c||void 0===c||null===c?(d.find(".error-msg").addClass("has-error txt-clr-err"),d.find("button.dropdown-toggle").addClass("border-error"),this.passedValidation=!1):(d.find(".error-msg").removeClass("has-error txt-clr-err"),d.find("button.dropdown-toggle").removeClass("border-error")))};
b.prototype.validateDateElement=function(){var c=this,b=[];0!==a(".form-control-month").length&&a("select.form-control-month, select.form-control-date, select.form-control-year").each(function(d,g){c.validateDropDowns(g);var e=a(g).val();void 0!==e&&""!==e&&(isNaN(parseInt(e))?b.push(c.getMonthFromString(e)):b.push(parseInt(e)));0===(d+1)%3&&(3===b.length?c.validateFullDate(b,g):0<b.length&&3>b.length&&(c.passedValidation=!1,a(g).parents(".form-group-select").find(".error-msg").addClass("has-error txt-clr-err"),
a(g).parents(".form-group-select").find(".list-item").addClass("border-error")),b=[])})};b.prototype.validateGroupElements=function(c,b){var d=this;a(c).each(function(c,g){var e=0;"true"===a(g).attr("data-required")&&(a(g).children().each(function(c,d){a(d).find(b).prop("checked")&&(e+=1)}),0<e?(a(g).parent().find(".error-msg").removeClass("has-error txt-clr-err"),a(g).removeClass("border-error")):(d.passedValidation=!1,a(g).parent().find(".error-msg").addClass("has-error txt-clr-err"),a(g).addClass("border-error")))})};
b.prototype.validateFullDate=function(c,b){var d=new Date(c[2],c[0]-1,c[1]),g=new Date,e=a(b).parents(".form-group-select").find(".form-control-month").attr("data-variation"),f=!1;!isNaN(d.getFullYear())&&0<d.getFullYear()?(c=d.getMonth()===c[0]-1?!0:!1,"date"===e?c?f=!1:(f=!0,this.passedValidation=!1):"date_of_birth"===e&&(d.getTime()>g.getTime()||g.getFullYear()-d.getFullYear()<this.minAgeOfPerson||!c?(this.passedValidation=!1,f=!0):f=!1)):(this.passedValidation=!1,f=!0);f?(a(b).parents(".form-group-select").find(".error-msg").addClass("has-error txt-clr-err error-msg-date"),
a(b).parents(".form-group-select").find(".list-item").addClass("border-error")):(a(b).parents(".form-group-select").find(".error-msg").removeClass("has-error txt-clr-err error-msg-date"),a(b).parents(".form-group-select").find(".list-item").removeClass("border-error"))};b.prototype.submitForm=function(){var c=this;a("form.start-form").submit(function(b){c.passedValidation=!0;c.validateFormElements();c.validateReCaptcha();c.validateDateElement();c.validateGroupElements(".form-control-radioGroup-container",
".form-control-radio");c.validateGroupElements(".form-control-checkboxGroup-container",".form-control-checkbox");if(c.passedValidation){var d=a("form.start-form").attr("action"),g=a("input:hidden[name\x3du]").val(),e=a("input:hidden[name\x3did]").val();d={url:d+"?u\x3d"+g+"\x26id\x3d"+e+"\x26c\x3d?",data:c.constructFormData(),type:"GET",dataType:"json"};f.initXHR(d).then(function(b){"success"===b.result?(c.formSuccessAnalytics(),b=a("form.start-form").attr("data-success-url"),window.location.href=
b):(c.addFormFailedAnalytics("service"),b=a("form.start-form").attr("data-error-url"),window.location.href=b)},function(){c.addFormFailedAnalytics("service");var b=a("form.start-form").attr("data-error-url");window.location.href=b})}else c.scrollToError(),c.addFormFailedAnalytics("validation");b.preventDefault()})};b.prototype.scrollToError=function(){var c=a(".has-error").first().parent();a("html, body").animate({scrollTop:parseInt(c.offset().top)},200);0<c.find("input").length?c.find("input").focus():
0<c.find("textarea").length&&c.find("textarea").focus()};b.prototype.validateReCaptcha=function(){var c=this;if(a("#g-recaptcha-response").length){var b=a("#g-recaptcha-response").val(),d=a(".start-form").attr("data-google-recaptcha-url");""===b&&(this.passedValidation=!1,a("#g-recaptcha-response").parents(".form-group").find(".error-msg").addClass("has-error txt-clr-err"));f.initXHR({url:d,data:{"g-recaptcha-response":b},type:"GET",dataType:"json",cache:!1,async:!1}).then(function(b){b.success?a("#g-recaptcha-response").parents(".form-group").find(".error-msg").removeClass("has-error txt-clr-err"):
(c.passedValidation=!1,a("#g-recaptcha-response").parents(".form-group").find(".error-msg").addClass("has-error txt-clr-err"))},function(){c.passedValidation=!1;a("#g-recaptcha-response").parents(".form-group").find(".error-msg").addClass("has-error txt-clr-err")})}};b.prototype.regExpTest=function(a,b,d){b.test(d)?(a.parent().find(".error-msg").removeClass("has-error txt-clr-err"),a.removeClass("border-error icon-error-forms")):(a.parent().find(".error-msg").addClass("has-error txt-clr-err"),a.addClass("border-error icon-error-forms"),
this.passedValidation=!1)};b.prototype.populateDates=function(c){var b=c.parents(".form-group-select").find("select.form-control-date"),d=c.val();if(void 0===d)c.selectpicker("val","");else{switch(d){case "February":c=29;break;case "January":case "March":case "May":case "July":case "August":case "October":case "December":c=31;break;default:c=30}d="";b.empty();for(var e=1;e<=c;e++)d+="\x3coption value\x3d'"+e+"'\x3e"+(10>e?"0"+e:e)+"\x3c/option\x3e";b.append(d);b.selectpicker("refresh");b.prop("disabled",
!1);var f=this;b.off("changed.bs.select").on("changed.bs.select",function(){f.populateYears(a(this))})}};b.prototype.populateYears=function(a){var c=a.val(),b=a.parents(".form-group-select"),d=b.find("select.form-control-month");b=b.find("select.form-control-year");if(void 0===c)a.selectpicker("val","");else{this.minAgeOfPerson=parseInt(d.attr("data-minage"));a=parseInt(d.attr("data-startyear"));d=parseInt(d.attr("data-endyear"));c="";b.empty();for(var e=0;e<=d-a;e++)c+="\x3coption value\x3d'"+(d-
e)+"'\x3e"+(d-e)+"\x3c/option\x3e";b.append(c);b.selectpicker("refresh");b.removeClass("disabled")}};b.prototype.getMonthFromString=function(a){a=Date.parse(a+"1, 2012");return isNaN(a)?-1:(new Date(a)).getMonth()+1};b.prototype.resetForm=function(){this.passedValidation=!0;a("form.start-form").trigger("reset");a(".error-msg").removeClass("has-error");a(".border-error").removeClass("border-error");a(".icon-error-forms").removeClass("icon-error-forms");a("select.form-control-select").each(function(){a(this).selectpicker("val",
"");if(a(this).hasClass("form-control-state")){var c=a(this).attr("id");0<a(".form-control-country[data-stateid\x3d'"+c+"']").length&&(a(this).prop("disabled",!0),a(this).selectpicker("refresh"))}});a("#g-recaptcha-response").length&&grecaptcha.reset();this.initializeDefaultCountry()};b.prototype.constructFormData=function(){var c={};a("form.start-form").serializeArray().forEach(function(a){"u"!==a.name&&"id"!==a.name&&"g-recaptcha-response"!==a.name&&"subscribe"!==a.name&&(c[a.name]=a.value)});return c};
b.prototype.populateCountryDropdown=function(){var c=this,b={url:a(".start-form").attr("data-country-mapping-url"),type:"GET",dataType:"json",cache:!1,async:!1};f.initXHR(b).then(function(a){a.success&&c.generateCountryDropdown(a)})};b.prototype.generateCountryDropdown=function(c){var b=this;a("select.form-control-country").each(function(d,g){var e="";a(g).empty();c.CountriesAndStates.forEach(function(a){e+='\x3coption value\x3d"'+a.countryValue+'"\x3e'+a.countryName+"\x3c/option\x3e"});a(g).append(e);
b.selectDefaultCountry(g);b.events()});d.setSession("CountryStateData",JSON.stringify(c))};b.prototype.selectDefaultCountry=function(c){var b=this,d=a(c).attr("data-stateid"),e=a('select[id\x3d"'+d+'"]').attr("data-def-countryId");"undefined"!==typeof e&&"false"!==e&&(a(c).off("loaded.bs.select").on("loaded.bs.select",function(){a(this).val(e).selectpicker("refresh")}),a(c).off("refreshed.bs.select").on("refreshed.bs.select",function(){a(this).val()&&b.populateStateDropdown(c,!1)}))};b.prototype.populateStateDropdown=
function(c,b){void 0===b&&(b=!1);var g=JSON.parse(d.getSessionStorageData("CountryStateData")),e="";if(null!==g&&void 0!==g){if(b){var f=b;c=a(c)}else f=a(c).val(),c=a(c).attr("data-stateid"),c=a("select[name\x3d'"+c+"'");a(c).empty();g=g.CountriesAndStates.find(function(a){return a.countryValue===f});if(null!==g&&void 0!==g)for(var l in g.States)e+="\x3coption value\x3d"+l+"\x3e"+g.States[l]+"\x3c/option\x3e ";a(c).append(e);a(c).prop("disabled",!1);a(c).selectpicker("refresh")}};b.prototype.initFormLoadAnalytics=
function(){if("undefined"!==typeof utag_data&&utag_data&&"undefined"!==utag_data.page_category&&"form_embed"===utag_data.page_category)var c=a("form.start-form").attr("data-formType"),b=a("form.start-form").attr("data-formName"),d={event_name:"form_embed",form_type:c,form_name:b},f=setInterval(function(){"undefined"!==typeof utag&&(e.setAnalyticsByPage(d,!0),clearInterval(f),f=0)},100)};b.prototype.addFormFailedAnalytics=function(c){var b=a("form.start-form").attr("data-formType"),d=a("form.start-form").attr("data-formName");
b={form_type:b,form_name:d,event_name:"form_error"};if("service"===c)b.form_field_error_field="mail chimp field",b.form_field_error_value="mail chimp field error";else{var f="",m="";c=a(".has-error").parent().find(".form-control");d=a(".has-error");a(c).each(function(c,b){a(b).parent().hasClass("form-control-radioGroup-container")||a(b).parent().hasClass("form-control-checkboxGroup-container")?(c=a(b).parent().attr("data-group-name"),-1===m.indexOf(c)&&(m+=c+"|")):m=void 0===a(b).prop("name")&&void 0===
a(b).attr("name")?m+(a(b).attr("data-name")+"|"):void 0!==a(b).prop("name")?m+(a(b).prop("name")+"|"):m+(a(b).attr("name")+"|")});a(d).each(function(c,b){f+=a(b).text().trim()+"|"});b.form_field_error_field=m.slice(0,-1);b.form_field_error_value=f.slice(0,-1)}e.setAnalyticsByPage(b,!0)};b.prototype.formSuccessAnalytics=function(){var c=a("form.start-form"),b=c.attr("data-formType"),d=c.attr("data-formName"),f=c.find('input.form-control-terms[data-condition-type\x3d"email-optin"]').prop("checked");
c=c.find('input.form-control-terms[data-condition-type\x3d"text-optin"]').prop("checked");var m="undefined"!==typeof utag_data&&utag_data.page_name?utag_data.page_name:"undefined";e.setAnalyticsByPage(f&&c?{event_name:"form_email_text_submit",form_type:b,form_name:d,email_signup_location:m,text_signup_location:m}:f&&!c?{form_type:b,form_name:d,event_name:"form_email_submit",email_signup_location:m}:c&&!f?{form_type:b,form_name:d,event_name:"form_text_submit",text_signup_location:m}:{form_type:b,form_name:d,
event_name:"form_submit"},!0)};b.prototype.hideDropdown=function(c){var b=a(".is-active.icon-drop-down-active");0>=b.length||a.each(b,function(b,d){b=a(d);b.is(c.target)||0!==b.has(c.target).length||b.removeClass("is-active icon-drop-down-active")})};return b}())}($,TNC.XHR,TNC.Utility,TNC.BrowserStorage);this.TNC=this.TNC||{};
this.TNC.RelatedPeopleFeed=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;return new (function(){function f(){this.initialize()}f.prototype.initialize=function(){console.log(a)};return f}())}($);this.TNC=this.TNC||{};
this.TNC.ImageSlider=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){this.initComparisons()};e.prototype.initComparisons=function(){var d=this;a(".ba-slider").each(function(b,c){c=a(c);var g=c.parents(".c-image-slider").attr("data-orientation"),e="horizontal"===g?"resize-horizontal":"resize-vertical";b=c.width()+"px";c.find(".resize").addClass(e);c.find("."+
e+" img").css("width",b);d.drags(c.find(".c-image-slider_slider-handle"),c.find("."+e),c,g)});a(window).resize(function(){a(".ba-slider").each(function(){var b=a(this),c=b.width()+"px";b.find(".resize img").css("width",c)})})};e.prototype.drags=function(a,b,c,e){var d=this;if("horizontal"===e)a.on("mousedown touchstart",function(e){return d.dragStartHorizontal(e,a,b,c)}).on("mouseup touchend touchcancel",function(){a.removeClass("draggable");b.removeClass("resizable")});else if("vertical"===e)a.on("mousedown touchstart",
function(e){return d.dragStartVertical(e,a,b,c)}).on("mouseup touchend touchcancel",function(){a.removeClass("draggable");b.removeClass("resizable")})};e.prototype.dragStartVertical=function(d,b,c,e){b.addClass("draggable");c.addClass("resizable");"undefined"===typeof e.data("isTriggered")&&(e.data("isTriggered",!0),this.analyticsCall(e));var g=d.pageX?d.pageX:d.originalEvent.touches[0].pageX,f=b.outerWidth(),m=b.offset().left+f-g,l=e.offset().left,p=e.outerWidth(),q=l-f/2,n=l+p-f/2;b.parents().on("mousemove touchmove",
function(b){b=(b.pageX?b.pageX:b.originalEvent.touches[0].pageX)+m-f/2;b<q?b=q:b>n&&(b=n);b=100*(b+f/2-l)/p;99<parseFloat(b)?b=100.3:1>parseFloat(b)&&(b=0);b+="%";e.find(".draggable").css("left",b).on("mouseup touchend touchcancel",function(){a(this).removeClass("draggable");c.removeClass("resizable")});e.find(".resizable").css("width",b)}).on("mouseup touchend touchcancel",function(){b.removeClass("draggable");c.removeClass("resizable")});d.preventDefault()};e.prototype.dragStartHorizontal=function(d,
b,c,e){b.addClass("draggable");c.addClass("resizable");"undefined"===typeof e.data("isTriggered")&&(e.data("isTriggered",!0),this.analyticsCall(e));var g=d.pageY?d.pageY:d.originalEvent.touches[0].pageY,f=b.outerHeight(),m=b.offset().top+f-g,l=e.offset().top,p=e.outerHeight(),q=l-f/2,n=l+p-f/2;b.parents().on("mousemove touchmove",function(b){b=(b.pageY?b.pageY:b.originalEvent.touches[0].pageY)+m-f/2;b<q?b=q:b>n&&(b=n);b=100*(b+f/2-l)/p;99<parseFloat(b)?b=99.1:1>parseFloat(b)&&(b=0);b+="%";e.find(".draggable").css("top",
b).on("mouseup touchend touchcancel",function(){a(this).removeClass("draggable");c.removeClass("resizable")});e.find(".resizable").css("height",b)}).on("mouseup touchend touchcancel",function(){b.removeClass("draggable");c.removeClass("resizable")});d.preventDefault()};e.prototype.analyticsCall=function(a){a=a.closest(".c-image-slider").find(".c-image-slider__title").text();f.setAnalyticsByPage({event_name:"image_slider",generic_engagement_name:(a?a:"Undefind")+":"+("undefined"===typeof utag_data?
"Undefind":utag_data.page_name)},!0)};return e}())}($,TNC.Utility);this.TNC=this.TNC||{};
this.TNC.Audio=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.initialize();this.events()}e.prototype.initialize=function(){var d=this;this.players=Array.from(document.querySelectorAll(".audio-play-area")).map(function(a){return d.initAudioPlyr(a)});a('.plyr__control[data-plyr\x3d"download"]').wrap("\x3cdiv class\x3d'c-audio__download_button'\x3e\x3c/div\x3e");a(".c-audio__download_button").append('\x3cdiv class\x3d"c-audio__download_tooltip family-sans"\x3eDownload Audio\x3c/div\x3e')};
e.prototype.events=function(){var d=this;a(".js-sharethis").on("click",function(b){b.preventDefault();a(this).closest(".c-audio-share").find(".share-this-popover").toggleClass("show-me");a(this).closest(".c-audio").find(".c-image-credit_toggle, .plyr__progress input[type\x3drange]").toggleClass("zIndexNormal")});a(document).on("click touchstart",function(b){a(b.target).closest(".c-social-share-icon-list").length||a(b.target).closest(".js-sharethis").length||(a(".c-audio").find(".c-audio-share .share-this-popover").removeClass("show-me"),
a(".c-audio").find(".c-image-credit_toggle, .plyr__progress input[type\x3drange]").removeClass("zIndexNormal"))});a(".ex--col_trigger").on("click",function(){var b=a(this).closest(".c-audio-transcript"),c=b.find(".ex--col_content");b=b.find(".ex--col_trigger");b.toggleClass("_exp");c.toggle();"block"===c.css("display")?b.text("Collapse Transcript"):b.text("Expand Transcript")});/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?a(".plyr--audio .plyr__volume").hide():
a(".plyr--audio .plyr__volume").show();a(window).on("load",function(){a(window).trigger("resize")});a(window).on("resize",function(){d.adjustTextPostion()})};e.prototype.plyrEvents=function(a){var b=a.closest(".c-audio-player").find(".plyr.plyr--audio");b.find('.plyr__volume button.plyr__control, input[data-plyr\x3d"volume"]').hover(function(){b.find('.plyr__volume input[data-plyr\x3d"volume"]').show()},function(){b.find('.plyr__volume input[data-plyr\x3d"volume"]').hide()})};e.prototype.initAudioPlyr=
function(d){var b=this,c=a(d).find("source").attr("src"),e=a(d).attr("id"),h=a(d).data("title");c=c.substr(c.lastIndexOf(".")+1);c=b.validateFormat(c);if(a(d).hasClass("c-audio__download")){var k=new Plyr(d,{controls:"play-large play progress current-time duration mute volume download".split(" ")});var m=a(d).closest(".c-audio").find('.plyr__control[data-plyr\x3d"download"]'),l=a(d).closest(".c-audio").find(".c-audio__download_text");l.after(m);l.children().attr("href",m.attr("href"))}else k=new Plyr(d,
{controls:"play-large play progress current-time duration mute volume".split(" ")}),a(d).closest(".c-audio").find(".c-audio__download_text").hide();k.on("ready",function(c){c=a(d).closest(".plyr");a(c).find(".plyr__time--duration").text(b.secondsTimeSpanToHMS(k.duration))});k.on("play",function(){a(d).data("played")||(a(d).data("played",!0),f.setAnalyticsByPage({event_name:"audio_start",audio_name:h+":"+e},!0))});b.plyrEvents(a(d));!0===c?(a(d).closest(".c-audio").find(".audio-error-message-1").text(""),
a(d).closest(".c-audio").removeClass("c-not-supported-audio"),a(d).closest(".c-audio").find(".no-border").removeClass("err-margin"),a(d).closest(".c-audio").find(".audio-error-message-1").removeClass("err-bottom error-bottom")):(a(d).closest(".c-audio").find(".c-audio__cborder").length?(a(d).closest(".c-audio").find(".no-border").addClass("err-margin"),c=a(d).closest(".c-audio").find(".audio-error-message-1").attr("data-error-message"),a(d).closest(".c-audio").find(".audio-error-message-1").text(c),
a(d).closest(".c-audio").find(".audio-error-message-1").addClass("err-bottom")):(a(d).closest(".c-audio").find(".c-audio-cntrl").addClass("error-margin"),c=a(d).closest(".c-audio").find(".audio-error-message-1").attr("data-error-message"),a(d).closest(".c-audio").find(".audio-error-message-1").text(c),a(d).closest(".c-audio").find(".audio-error-message-1").addClass("error-bottom")),a(d).closest(".c-audio").addClass("c-not-supported-audio"))};e.prototype.secondsTimeSpanToHMS=function(a){var b=Math.floor(a/
3600);a-=3600*b;var c=Math.floor(a/60);a=Math.round(a-60*c);return(0<b?b+":":"")+(10>c?"0"+c:c)+":"+(10>a?"0"+a:a)};e.prototype.validateFormat=function(a){return"mp3"===a||"wav"===a||"ogg"===a?!0:!1};e.prototype.adjustTextPostion=function(){a(".c-audio").each(function(d,b){if("backdrop-as-image"===a(b).data("variation")){d=a(b).find(".c-audio-image-container").height();var c=a(b).find(".c-audio__valign").height();d=(d-c)/2;a(b).find(".c-audio__valign").css("top",d+"px")}})};return e}())}($,TNC.Utility);
this.TNC=this.TNC||{};
this.TNC.FeatureCollection=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;var f={link_sent:function(a){return{event_name:"featured_story_click",featured_story_location:a}}};return new (function(){function e(){this.initialize()}e.prototype.initialize=function(){var d=(new Date).getHours();0<d&&12>d?a(".c-feat-coll__morning-greeting").removeClass("hide"):12<=d&&17>=d?a(".c-feat-coll__afternoon-greeting").removeClass("hide"):a(".c-feat-coll__evening-greeting").removeClass("hide");a(".c-feat-coll__link").on("click",
function(b){b.preventDefault();"undefined"!==typeof utag&&utag.link(f.link_sent("headline"));document.location=a(b.target).attr("href")});a(".c-feat-coll__cta ").on("click",function(b){b.preventDefault();"undefined"!==typeof utag&&utag.link(f.link_sent("hero"));document.location=a(b.target).attr("href")})};return e}())}($);this.TNC=this.TNC||{};this.TNC.Statistics=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();
this.TNC=this.TNC||{};
this.TNC.PieChart=function(){function a(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var f="#005487 #1B75BC #019ECB #B8DEDF #E6B100 #C85D28".split(" "),e={link_sent:function(){return{event_name:"piechart_click"}}},d=function(a,b,c){void 0===c&&(c=!0);return{title:a.title,percent:a.percent,color:a.color,id:b,pulled:c}},b=function(a,b){return a.subs&&0<a.subs.length?a.subs.map(function(c){return d(Object.assign({},a,
c),b)}):d(a,b)},c=function(c){function g(a){var b=c.call(this)||this;c.prototype.init.call(b,a,am4charts.PieChart);b.selectedPie=null;4<b.elements.legendElements.length&&a.querySelector(".chart__legend").classList.add("chart__legend--long");return b}a(g,c);g.prototype.createChart=function(a){if(!this.chart){if(a=c.prototype.createChart.call(this,a)){var b=a.series.push(new am4charts.PieSeries),d=640>window.innerWidth?"":"[bold]{category}[/]: {value.percent.formatNumber('#.#')}%";b.dataFields=Object.assign({},
b.dataFields,{value:"percent",category:"title"});b.slices.template.propertyFields=Object.assign({},b.slices.template.propertyFields,{fill:"color",isActive:"pulled"});b.slices.template.strokeWidth=0;b.slices.template.tooltipText=d;b.labels.template.text="";b.tooltip.getFillFromObject=!1;b.tooltip.background.fill=am4core.color("#FFFFFF");b.tooltip.label.fill=am4core.color("black");this.pieSeries=b}return a}return this.chart};g.prototype.attachEvents=function(){var a=this;c.prototype.attachEvents.call(this);
var b=null;this.pieSeries.slices.template.events.on("hit",function(b){var c=a.chart.data.find(function(a){return a.id===b.target.dataItem.dataContext.id});if(c){var d=Array.from(a.elements.legendElements).find(function(b){return b.querySelector(a.selectors.chartElementName).innerHTML===c.title});a.clickOnElement(d,c)}});this.elements.legendElements.forEach(function(b){var c=b.querySelector(a.selectors.chartElementTitle),d=c.querySelector(a.selectors.chartElementName).innerHTML;c.addEventListener("click",
function(){var c=a.chart.data.find(function(a){return a.title===d});a.clickOnElement(b,c)})});window.addEventListener("resize",function(){b||(a.pieSeries.slices.template.tooltipText=640>window.innerWidth?"":"{category}: {value.percent.formatNumber('#.#')}%",b=setTimeout(function(){b=null},500))})};g.prototype.clickOnElement=function(a,b){b=b?b.id:null;var c=this.selectors.chartElementExpanded,d=this.elements.el.querySelector("."+c),g=!b&&this.selectedPie||this.selectedPie===b;d&&d.classList.remove(c);
!g&&a&&a.classList.add(c);this.selectedPie=g?null:b;this.chart.data=this.getData();utag.link(e.link_sent())};g.prototype.getData=function(){var a=this;return this.data.map(function(c,e){return e+1===a.selectedPie?b(c,e+1):d(c,e+1,!1)}).flat(2).sort(function(a,b){return b.position-a.position})};g.prototype.getDataFromHTML=function(){var a=this;return c.prototype.getDataFromHTML.call(this).sort(function(a,b){return b.percent-a.percent}).map(function(b,c){var d=10*(c+1),e=a.getColor(c);b.subs&&0<b.subs.length&&
(b.subs=b.subs.map(function(a,b){return Object.assign({},a,{position:d+b,color:e})}));a.elements.el.querySelectorAll(".chart__element").forEach(function(a){var d=a.querySelector(".chart__element-name");d&&d.innerHTML===b.title&&(a.classList.add("chart__element-color-"+c),a.style.order=c+1)});return Object.assign({},b,{position:d,color:e})})};g.prototype.getChartElement=function(a){var b=this;return function(c){var d=a?c.querySelector(a):c;d={title:d.querySelector(".chart__element-name").innerHTML,
percent:Math.round(100*parseFloat(d.querySelector(".chart__element-value").innerHTML)),subs:[]};return(c=c.querySelectorAll(".chart__element-list .chart_element-list-object"))&&0<c.length?Object.assign({},d,{subs:Array.from(c).map(b.getChartElement(!1,!1))}):d}};return g}(function(){function a(){}a.prototype.getPostfixConfiguration=function(){var a=document.documentElement.clientWidth<this.mobileWidth;return[{number:1E6,suffix:a?"M":"Million"},{number:1E9,suffix:a?"B":"Billion"},{number:1E12,suffix:a?
"B":"Trillion"}]};a.prototype.init=function(a,b,c){void 0===c&&(c=!0);am4core.options.commercialLicense=!0;am4core.options.autoSetClassName=!0;this.selectors={chartContainer:".chart__object",legendElement:".chart__element",chartElementExpanded:"chart__element--expanded",chartElementTitle:".chart__element-title",chartElementName:".chart__element-name"};this.elements={el:a,chartContainer:a.querySelector(this.selectors.chartContainer),legendElements:a.querySelectorAll(this.selectors.legendElement)};
this.type=b;this.container=null;this.sizes={desktop:{height:610,width:610,paddingLeft:0},mobile:{height:264,width:280,paddingLeft:0}};this.valueAxis=this.categoryAxis=null;this.mobileWidth=640;c&&this.afterInit()};a.prototype.afterInit=function(){this.data=this.getDataFromHTML();(this.chart=this.createChart(this.type))&&this.attachEvents()};a.prototype.createChart=function(a){var b=this;if(this.elements.chartContainer){var c=this.getSizes();am4core.useTheme(am4themes_animated);var d=am4core.create(this.elements.chartContainer,
am4core.Container);d.width=c.width;d.height=c.height;d.paddingLeft=c.paddingLeft;this.container=d;a=d.createChild(a);a.data=this.getData();a.labelText="";a.events.on("ready",function(){b.elements.el.querySelector(".chart__legend").classList.add("chart__legend--open")});return a}return null};a.prototype.getChartElement=function(a){return function(){return a}};a.prototype.attachEvents=function(){var a=this,b=null;window.addEventListener("resize",function(){if(!b){var c=a.getSizes();a.container.width=
c.width;a.container.height=c.height;a.container.paddingLeft=c.paddingLeft;b=setTimeout(function(){b=null},500);a.valueAxis&&(a.valueAxis.numberFormatter.bigNumberPrefixes=a.getPostfixConfiguration())}})};a.prototype.getData=function(){return[]};a.prototype.getDataFromHTML=function(){return Array.from(this.elements.legendElements).map(this.getChartElement(this.selectors.chartElementTitle))};a.prototype.getColor=function(a){return 0>a||a>f.length-1?f[0]:f[a]};a.prototype.getSizes=function(){return 639<
window.innerWidth?this.sizes.desktop:this.sizes.mobile};return a}());return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){document.querySelectorAll("body .pie-chart.chart").forEach(function(a){return new c(a)})};return a}())}();this.TNC=this.TNC||{};
this.TNC.ColumnChart=function(){function a(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var f="#005487 #1B75BC #019ECB #B8DEDF #E6B100 #C85D28".split(" "),e=function(d){function b(){return null!==d&&d.apply(this,arguments)||this}a(b,d);b.prototype.creatChartSeries=function(a){var b=this,c=a.xAxes.push(new am4charts.CategoryAxis);c.dataFields.category="mainCategory";c.fontFamily="Whitney A";
c.fontSize=14;c.fontWeight=600;c.renderer.grid.template.location=0;c.renderer.minGridDistance=20;c.renderer.cellStartLocation=.1;c.renderer.cellEndLocation=.9;c.renderer.grid.template.disabled=!0;c.id="send-font-3";this.categoryAxis=c;c=a.yAxes.push(new am4charts.ValueAxis);c.min=0;c.fontFamily="Whitney A";c.fontSize=14;c.fontWeight=600;c.numberFormatter=new am4core.NumberFormatter;c.numberFormatter.bigNumberPrefixes=this.getPostfixConfiguration();c.numberFormatter.numberFormat=(this.isDollar?"$":
"")+"#,# a";c.renderer.grid.template.disabled=!0;c.id="send-font-4";this.valuesAxis=c;return this.readValues(this.currentElements.titles).map(function(c,d){var e=a.series.push(new am4charts.ColumnSeries);e.numberFormatter=new am4core.NumberFormatter;e.numberFormatter.bigNumberPrefixes=b.getPostfixConfiguration();e.numberFormatter.numberFormat=(b.isDollar?" $":"")+"#,# a";e.dataFields.valueY=b.getSeriesName(d);e.dataFields.categoryX="mainCategory";e.name=c;e.columns.template.tooltipText="[bold]{name}[/]: "+
(b.isDollar?" $":"")+'{valueY.formatNumber("#,# a")} ';e.legendSettings.valueText="{valueY}";e.stacked="stacked"===b.elements.el.getAttribute("data-type");e.columns.template.width=am4core.percent(95);e.columns.template.stroke=am4core.color(b.getColor(d));e.columns.template.fill=am4core.color(b.getColor(d));e.tooltip.getFillFromObject=!1;e.tooltip.background.fill=am4core.color("#FFFFFF");e.tooltip.label.fill=am4core.color("black");e.columns.template.width=am4core.percent(70);return e})};return b}(function(d){function b(a){var b=
d.call(this)||this;d.prototype.init.call(b,a,am4charts.XYChart,!1);b.currentElements={chartCategories:a.querySelectorAll(".chart__categories \x3e li"),titles:a.querySelectorAll(b.selectors.legendElement+" .chart__element-title")};b.isDollar="dollar"===a.getAttribute("data-value-type");d.prototype.afterInit.call(b);return b}a(b,d);b.prototype.getSeriesName=function(a){return"serie-"+a};b.prototype.readValues=function(a){return Array.from(a).map(function(a){return a.innerHTML})};b.prototype.creatChartSeries=
function(a){return a};b.prototype.getCategoryObject=function(a,b){var c=this;b=b.reduce(function(a,b,d){return Object.assign({},a,(e={},e[c.getSeriesName(d)]=b,e));var e},{});return Object.assign({},{mainCategory:a},b)};b.prototype.createChart=function(a){var b=this;if(a=d.prototype.createChart.call(this,a))this.creatChartSeries(a),a.scrollbarX=new am4core.Scrollbar,a.scrollbarX.marginLeft=0,a.events.on("ready",function(){var a=b.elements.el.querySelector(".chart__object-description");a&&(a.style["margin-right"]=
b.elements.el.parentNode.offsetWidth-b.container.contentWidth+"px")});return a};b.prototype.getData=function(){var a=this;return this.data.map(function(b){return a.getCategoryObject(b.title,b.values)})};b.prototype.getDataFromHTML=function(){return Array.from(this.currentElements.chartCategories).map(this.getChartElement())};b.prototype.getChartElement=function(){var a=this;return function(b){return{title:b.querySelector(".chart__categories-title").innerHTML,values:a.readValues(b.querySelectorAll(".chart__element-values li"))}}};
b.prototype.getSizes=function(){var a=this.elements.el.offsetWidth;return 639<a?{height:610,width:a,paddingLeft:0}:{height:320,width:a,paddingLeft:-20}};return b}(function(){function a(){}a.prototype.getPostfixConfiguration=function(){var a=document.documentElement.clientWidth<this.mobileWidth;return[{number:1E6,suffix:a?"M":"Million"},{number:1E9,suffix:a?"B":"Billion"},{number:1E12,suffix:a?"B":"Trillion"}]};a.prototype.init=function(a,c,d){void 0===d&&(d=!0);am4core.options.commercialLicense=!0;
am4core.options.autoSetClassName=!0;this.selectors={chartContainer:".chart__object",legendElement:".chart__element",chartElementExpanded:"chart__element--expanded",chartElementTitle:".chart__element-title",chartElementName:".chart__element-name"};this.elements={el:a,chartContainer:a.querySelector(this.selectors.chartContainer),legendElements:a.querySelectorAll(this.selectors.legendElement)};this.type=c;this.container=null;this.sizes={desktop:{height:610,width:610,paddingLeft:0},mobile:{height:264,
width:280,paddingLeft:0}};this.valueAxis=this.categoryAxis=null;this.mobileWidth=640;d&&this.afterInit()};a.prototype.afterInit=function(){this.data=this.getDataFromHTML();(this.chart=this.createChart(this.type))&&this.attachEvents()};a.prototype.createChart=function(a){var b=this;if(this.elements.chartContainer){var d=this.getSizes();am4core.useTheme(am4themes_animated);var e=am4core.create(this.elements.chartContainer,am4core.Container);e.width=d.width;e.height=d.height;e.paddingLeft=d.paddingLeft;
this.container=e;a=e.createChild(a);a.data=this.getData();a.labelText="";a.events.on("ready",function(){b.elements.el.querySelector(".chart__legend").classList.add("chart__legend--open")});return a}return null};a.prototype.getChartElement=function(a){return function(){return a}};a.prototype.attachEvents=function(){var a=this,c=null;window.addEventListener("resize",function(){if(!c){var b=a.getSizes();a.container.width=b.width;a.container.height=b.height;a.container.paddingLeft=b.paddingLeft;c=setTimeout(function(){c=
null},500);a.valueAxis&&(a.valueAxis.numberFormatter.bigNumberPrefixes=a.getPostfixConfiguration())}})};a.prototype.getData=function(){return[]};a.prototype.getDataFromHTML=function(){return Array.from(this.elements.legendElements).map(this.getChartElement(this.selectors.chartElementTitle))};a.prototype.getColor=function(a){return 0>a||a>f.length-1?f[0]:f[a]};a.prototype.getSizes=function(){return 639<window.innerWidth?this.sizes.desktop:this.sizes.mobile};return a}()));return new (function(){function a(){this.initialize()}
a.prototype.initialize=function(){document.querySelectorAll("body .column-chart-component-container").forEach(function(a){return new e(a)})};return a}())}();this.TNC=this.TNC||{};
this.TNC.LineChart=function(){function a(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var f="#005487 #1B75BC #019ECB #B8DEDF #E6B100 #C85D28".split(" "),e=function(d){function b(){return null!==d&&d.apply(this,arguments)||this}a(b,d);b.prototype.creatChartSeries=function(a){var b=this,c=a.xAxes.push(new am4charts.CategoryAxis);c.dataFields.category="mainCategory";c.fontFamily="Whitney A";
c.fontSize=14;c.fontWeight=600;c.renderer.grid.template.disabled=!0;c.id="send-font";this.categoryAxis=c;c=a.yAxes.push(new am4charts.ValueAxis);c.title.text="";c.fontFamily="Whitney A";c.fontSize=14;c.fontWeight=600;c.renderer.minLabelPosition=.01;c.numberFormatter=new am4core.NumberFormatter;c.numberFormatter.bigNumberPrefixes=this.getPostfixConfiguration();c.numberFormatter.numberFormat=(this.isDollar?"$":"")+"#,# a";c.renderer.grid.template.disabled=!0;c.id="send-font-2";return this.readValues(this.currentElements.titles).map(function(c,
d){var e=a.series.push(new am4charts.LineSeries);e.numberFormatter=new am4core.NumberFormatter;e.numberFormatter.bigNumberPrefixes=b.getPostfixConfiguration();e.numberFormatter.numberFormat=(b.isDollar?" $":"")+"#,# a";e.dataFields.valueY=b.getSeriesName(d);e.dataFields.categoryX="mainCategory";e.name=c;e.stroke=am4core.color(b.getColor(d));e.strokeWidth=3;e.legendSettings.valueText="{valueY}";e.tooltip.getFillFromObject=!1;e.tooltip.background.fill=am4core.color("#FFFFFF");e.tooltip.label.fill=am4core.color("black");
c=e.bullets.push(new am4charts.CircleBullet);c.fill=am4core.color(b.getColor(d));c.tooltipText="[bold]{categoryX}:[/]  "+(b.isDollar?" $":"")+'{valueY.formatNumber("#,# a")}  {name}';c.fontFamily="Whitney A";return e})};return b}(function(d){function b(a){var b=d.call(this)||this;d.prototype.init.call(b,a,am4charts.XYChart,!1);b.currentElements={chartCategories:a.querySelectorAll(".chart__categories \x3e li"),titles:a.querySelectorAll(b.selectors.legendElement+" .chart__element-title")};b.isDollar=
"dollar"===a.getAttribute("data-value-type");d.prototype.afterInit.call(b);return b}a(b,d);b.prototype.getSeriesName=function(a){return"serie-"+a};b.prototype.readValues=function(a){return Array.from(a).map(function(a){return a.innerHTML})};b.prototype.creatChartSeries=function(a){return a};b.prototype.getCategoryObject=function(a,b){var c=this;b=b.reduce(function(a,b,d){return Object.assign({},a,(e={},e[c.getSeriesName(d)]=b,e));var e},{});return Object.assign({},{mainCategory:a},b)};b.prototype.createChart=
function(a){var b=this;if(a=d.prototype.createChart.call(this,a))this.creatChartSeries(a),a.scrollbarX=new am4core.Scrollbar,a.scrollbarX.marginLeft=0,a.events.on("ready",function(){var a=b.elements.el.querySelector(".chart__object-description");a&&(a.style["margin-right"]=b.elements.el.parentNode.offsetWidth-b.container.contentWidth+"px")});return a};b.prototype.getData=function(){var a=this;return this.data.map(function(b){return a.getCategoryObject(b.title,b.values)})};b.prototype.getDataFromHTML=
function(){return Array.from(this.currentElements.chartCategories).map(this.getChartElement())};b.prototype.getChartElement=function(){var a=this;return function(b){return{title:b.querySelector(".chart__categories-title").innerHTML,values:a.readValues(b.querySelectorAll(".chart__element-values li"))}}};b.prototype.getSizes=function(){var a=this.elements.el.offsetWidth;return 639<a?{height:610,width:a,paddingLeft:0}:{height:320,width:a,paddingLeft:-20}};return b}(function(){function a(){}a.prototype.getPostfixConfiguration=
function(){var a=document.documentElement.clientWidth<this.mobileWidth;return[{number:1E6,suffix:a?"M":"Million"},{number:1E9,suffix:a?"B":"Billion"},{number:1E12,suffix:a?"B":"Trillion"}]};a.prototype.init=function(a,c,d){void 0===d&&(d=!0);am4core.options.commercialLicense=!0;am4core.options.autoSetClassName=!0;this.selectors={chartContainer:".chart__object",legendElement:".chart__element",chartElementExpanded:"chart__element--expanded",chartElementTitle:".chart__element-title",chartElementName:".chart__element-name"};
this.elements={el:a,chartContainer:a.querySelector(this.selectors.chartContainer),legendElements:a.querySelectorAll(this.selectors.legendElement)};this.type=c;this.container=null;this.sizes={desktop:{height:610,width:610,paddingLeft:0},mobile:{height:264,width:280,paddingLeft:0}};this.valueAxis=this.categoryAxis=null;this.mobileWidth=640;d&&this.afterInit()};a.prototype.afterInit=function(){this.data=this.getDataFromHTML();(this.chart=this.createChart(this.type))&&this.attachEvents()};a.prototype.createChart=
function(a){var b=this;if(this.elements.chartContainer){var d=this.getSizes();am4core.useTheme(am4themes_animated);var e=am4core.create(this.elements.chartContainer,am4core.Container);e.width=d.width;e.height=d.height;e.paddingLeft=d.paddingLeft;this.container=e;a=e.createChild(a);a.data=this.getData();a.labelText="";a.events.on("ready",function(){b.elements.el.querySelector(".chart__legend").classList.add("chart__legend--open")});return a}return null};a.prototype.getChartElement=function(a){return function(){return a}};
a.prototype.attachEvents=function(){var a=this,c=null;window.addEventListener("resize",function(){if(!c){var b=a.getSizes();a.container.width=b.width;a.container.height=b.height;a.container.paddingLeft=b.paddingLeft;c=setTimeout(function(){c=null},500);a.valueAxis&&(a.valueAxis.numberFormatter.bigNumberPrefixes=a.getPostfixConfiguration())}})};a.prototype.getData=function(){return[]};a.prototype.getDataFromHTML=function(){return Array.from(this.elements.legendElements).map(this.getChartElement(this.selectors.chartElementTitle))};
a.prototype.getColor=function(a){return 0>a||a>f.length-1?f[0]:f[a]};a.prototype.getSizes=function(){return 639<window.innerWidth?this.sizes.desktop:this.sizes.mobile};return a}()));return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){document.querySelectorAll("body .line-chart").forEach(function(a){return new e(a)})};return a}())}();this.TNC=this.TNC||{};
this.TNC["image-collage"]=function(){return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){};return a}())}();this.TNC=this.TNC||{};
this.TNC.DocumentDownload=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;var e="ontouchstart"in window||"onmsgesturechange"in window,d=function(){function b(b,c,d){void 0===d&&(d=!1);this.prefix=b;this.currentSlider={};this.elements={el:c,modal:a("."+b+"__modal",c),htmlBody:a("html body"),container:a("."+b+"__container",c),wrappers:a("."+b+"__modal-wrapper",c),items:a("."+b+"__modal-item-content",c),modalClose:a("."+b+"__modal-close",
c)};this.classes={modalIsOpen:b+"__modal-is-open",indexes:b+"__index",total:b+"__total",bodyOpenModal:"c-modal-open",currentWrapperSelected:"album-is-selected"};this.lastPosition=0;this.prepareImagesSizes=d;this.isCalculated=!1;this.attachEvents()}b.prototype.attachEvents=function(){var b=this;this.elements.container.on("click",function(c){if(c.target!==c.currentTarget&&c.target.hasAttribute("data-index")&&c.currentTarget.hasAttribute("data-index")){c.preventDefault();c=c.target.getAttribute("data-index")||
0;var d=a("."+b.prefix+"__modal-wrapper[data-index\x3d0]",b.elements.el);0<d.length&&(d.attr("tabindex",0),d.addClass(b.classes.currentWrapperSelected),b.currentSlider=new f(d[0],{pageDots:!1,draggable:e,cellAlign:"left",contain:!0,imagesLoaded:!0,setGallerySize:!1}),b.lastPosition=window.scrollY,b.currentSlider.select(c,!0,!0),b.elements.htmlBody.addClass(b.classes.bodyOpenModal),b.elements.modal.addClass(b.classes.modalIsOpen),a(document).on("keydown",b.onCloseModal.bind(b)),setTimeout(function(){a(d[0]).focus()},
500))}});this.elements.modalClose.on("click",function(){b.closeModal()})};b.prototype.closeModal=function(){var b=this;this.elements.htmlBody.removeClass(this.classes.bodyOpenModal);this.elements.modal.removeClass(this.classes.modalIsOpen);this.elements.wrappers.removeClass(this.classes.currentWrapperSelected);this.currentSlider.destroy();a(document).off("keydown",this.onCloseModal);setTimeout(function(){window.scrollTo(0,b.lastPosition)},5)};b.prototype.onCloseModal=function(a){27===a.which&&this.closeModal()};
return b}(),b=function(){return function(a){new d("c-image-mosaic",a,!0)}}();return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){document.querySelectorAll(".c-image-mosaic").forEach(function(a){return new b(a)})};return a}())}($,Flickity);this.TNC=this.TNC||{};
this.TNC.PhotoAlbumDetail=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;var e="ontouchstart"in window||"onmsgesturechange"in window,d=function(){function b(b,c,d){void 0===d&&(d=!1);this.prefix=b;this.currentSlider={};this.elements={el:c,modal:a("."+b+"__modal",c),htmlBody:a("html body"),container:a("."+b+"__container",c),wrappers:a("."+b+"__modal-wrapper",c),items:a("."+b+"__modal-item-content",c),modalClose:a("."+b+"__modal-close",
c)};this.classes={modalIsOpen:b+"__modal-is-open",indexes:b+"__index",total:b+"__total",bodyOpenModal:"c-modal-open",currentWrapperSelected:"album-is-selected"};this.lastPosition=0;this.prepareImagesSizes=d;this.isCalculated=!1;this.attachEvents()}b.prototype.attachEvents=function(){var b=this;this.elements.container.on("click",function(c){if(c.target!==c.currentTarget&&c.target.hasAttribute("data-index")&&c.currentTarget.hasAttribute("data-index")){c.preventDefault();c=c.target.getAttribute("data-index")||
0;var d=a("."+b.prefix+"__modal-wrapper[data-index\x3d0]",b.elements.el);0<d.length&&(d.attr("tabindex",0),d.addClass(b.classes.currentWrapperSelected),b.currentSlider=new f(d[0],{pageDots:!1,draggable:e,cellAlign:"left",contain:!0,imagesLoaded:!0,setGallerySize:!1}),b.lastPosition=window.scrollY,b.currentSlider.select(c,!0,!0),b.elements.htmlBody.addClass(b.classes.bodyOpenModal),b.elements.modal.addClass(b.classes.modalIsOpen),a(document).on("keydown",b.onCloseModal.bind(b)),setTimeout(function(){a(d[0]).focus()},
500))}});this.elements.modalClose.on("click",function(){b.closeModal()})};b.prototype.closeModal=function(){var b=this;this.elements.htmlBody.removeClass(this.classes.bodyOpenModal);this.elements.modal.removeClass(this.classes.modalIsOpen);this.elements.wrappers.removeClass(this.classes.currentWrapperSelected);this.currentSlider.destroy();a(document).off("keydown",this.onCloseModal);setTimeout(function(){window.scrollTo(0,b.lastPosition)},5)};b.prototype.onCloseModal=function(a){27===a.which&&this.closeModal()};
return b}(),b=function(){function b(b){this.elements={el:b,index:a(".c-album-detail__index",b)};new d("c-album-detail",b,!0);this.prepareIndexes();this.prepareImages();this.attachEvents()}b.prototype.attachEvents=function(){var a=this,b=null;window.addEventListener("resize",function(){b||(b=setTimeout(function(){a.prepareImages();b=null},150))})};b.prototype.prepareIndexes=function(){this.elements.index.each(function(a,b){b.textContent=a+1})};b.prototype.prepareImages=function(){var b=this.elements.el.querySelectorAll(".c-album-detail__item");
b&&Array.from(b).forEach(function(b){var c=window.getComputedStyle(b).width;a(b).height(c);a(".c-album-detail__item-img",b).height()})};return b}();return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){document.querySelectorAll(".c-album-detail").forEach(function(a){return new b(a)})};return a}())}($,Flickity);this.TNC=this.TNC||{};
this.TNC.ScrollingSlideshow=function(a){a=a&&a.hasOwnProperty("default")?a["default"]:a;(function(){function a(){function a(a,b){this.scrollLeft=a;this.scrollTop=b}function b(a){if(null===a||"object"!==typeof a||void 0===a.behavior||"auto"===a.behavior||"instant"===a.behavior)return!0;if("object"===typeof a&&"smooth"===a.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+a.behavior+" is not a valid value for enumeration ScrollBehavior.");}function c(a,b){if("Y"===b)return a.clientHeight+
r<a.scrollHeight;if("X"===b)return a.clientWidth+r<a.scrollWidth}function e(a,b){a=l.getComputedStyle(a,null)["overflow"+b];return"auto"===a||"scroll"===a}function f(a){var b=c(a,"Y")&&e(a,"Y");a=c(a,"X")&&e(a,"X");return b||a}function k(a){var b=(v()-a.startTime)/468;var c=.5*(1-Math.cos(Math.PI*(1<b?1:b)));b=a.startX+(a.x-a.startX)*c;c=a.startY+(a.y-a.startY)*c;a.method.call(a.scrollable,b,c);b===a.x&&c===a.y||l.requestAnimationFrame(k.bind(l,a))}function m(b,c,d){var e=v();if(b===p.body){var g=
l;var f=l.scrollX||l.pageXOffset;b=l.scrollY||l.pageYOffset;var h=n.scroll}else g=b,f=b.scrollLeft,b=b.scrollTop,h=a;k({scrollable:g,method:h,startTime:e,startX:f,startY:b,x:c,y:d})}var l=window,p=document;if(!("scrollBehavior"in p.documentElement.style&&!0!==l.__forceSmoothScrollPolyfill__)){var q=l.HTMLElement||l.Element,n={scroll:l.scroll||l.scrollTo,scrollBy:l.scrollBy,elementScroll:q.prototype.scroll||a,scrollIntoView:q.prototype.scrollIntoView},v=l.performance&&l.performance.now?l.performance.now.bind(l.performance):
Date.now,r=/MSIE |Trident\/|Edge\//.test(l.navigator.userAgent)?1:0;l.scroll=l.scrollTo=function(a,c){void 0!==a&&(!0===b(a)?n.scroll.call(l,void 0!==a.left?a.left:"object"!==typeof a?a:l.scrollX||l.pageXOffset,void 0!==a.top?a.top:void 0!==c?c:l.scrollY||l.pageYOffset):m.call(l,p.body,void 0!==a.left?~~a.left:l.scrollX||l.pageXOffset,void 0!==a.top?~~a.top:l.scrollY||l.pageYOffset))};l.scrollBy=function(a,c){void 0!==a&&(b(a)?n.scrollBy.call(l,void 0!==a.left?a.left:"object"!==typeof a?a:0,void 0!==
a.top?a.top:void 0!==c?c:0):m.call(l,p.body,~~a.left+(l.scrollX||l.pageXOffset),~~a.top+(l.scrollY||l.pageYOffset)))};q.prototype.scroll=q.prototype.scrollTo=function(a,c){if(void 0!==a)if(!0===b(a)){if("number"===typeof a&&void 0===c)throw new SyntaxError("Value could not be converted");n.elementScroll.call(this,void 0!==a.left?~~a.left:"object"!==typeof a?~~a:this.scrollLeft,void 0!==a.top?~~a.top:void 0!==c?~~c:this.scrollTop)}else c=a.left,a=a.top,m.call(this,this,"undefined"===typeof c?this.scrollLeft:
~~c,"undefined"===typeof a?this.scrollTop:~~a)};q.prototype.scrollBy=function(a,c){void 0!==a&&(!0===b(a)?n.elementScroll.call(this,void 0!==a.left?~~a.left+this.scrollLeft:~~a+this.scrollLeft,void 0!==a.top?~~a.top+this.scrollTop:~~c+this.scrollTop):this.scroll({left:~~a.left+this.scrollLeft,top:~~a.top+this.scrollTop,behavior:a.behavior}))};q.prototype.scrollIntoView=function(a){if(!0===b(a))n.scrollIntoView.call(this,void 0===a?!0:a);else{for(a=this;a!==p.body&&!1===f(a);)a=a.parentNode||a.host;
var c=a.getBoundingClientRect(),d=this.getBoundingClientRect();a!==p.body?(m.call(this,a,a.scrollLeft+d.left-c.left,a.scrollTop+d.top-c.top),"fixed"!==l.getComputedStyle(a).position&&l.scrollBy({left:c.left,top:c.top,behavior:"smooth"})):l.scrollBy({left:d.left,top:d.top,behavior:"smooth"})}}}}"object"===typeof exports&&"undefined"!==typeof module?module.exports={polyfill:a}:a()})();!function(){function a(c){if(!c)throw Error("No options passed to Waypoint constructor");if(!c.element)throw Error("No element option passed to Waypoint constructor");
if(!c.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+d;this.options=a.Adapter.extend({},a.defaults,c);this.element=this.options.element;this.adapter=new a.Adapter(this.element);this.callback=c.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;this.triggerPoint=null;this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=a.Context.findOrCreateByElement(this.options.context);
a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]);this.group.add(this);this.context.add(this);b[this.key]=this;d+=1}var d=0,b={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)};a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)};a.prototype.destroy=function(){this.context.remove(this);this.group.remove(this);delete b[this.key]};a.prototype.disable=function(){return this.enabled=!1,this};a.prototype.enable=
function(){return this.context.refresh(),this.enabled=!0,this};a.prototype.next=function(){return this.group.next(this)};a.prototype.previous=function(){return this.group.previous(this)};a.invokeAll=function(a){var c=[];for(d in b)c.push(b[d]);var d=0;for(var e=c.length;e>d;d++)c[d][a]()};a.destroyAll=function(){a.invokeAll("destroy")};a.disableAll=function(){a.invokeAll("disable")};a.enableAll=function(){a.Context.refreshAll();for(var c in b)b[c].enabled=!0;return this};a.refreshAll=function(){a.Context.refreshAll()};
a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};a.viewportWidth=function(){return document.documentElement.clientWidth};a.adapters=[];a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0};a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=a}();(function(){function a(a){window.setTimeout(a,
1E3/60)}function d(a){this.element=a;this.Adapter=g.Adapter;this.adapter=new this.Adapter(a);this.key="waypoint-context-"+b;this.didResize=this.didScroll=!1;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};a.waypointContextKey=this.key;c[a.waypointContextKey]=this;b+=1;g.windowContext||(g.windowContext=!0,g.windowContext=new d(window));this.createThrottledScrollHandler();this.createThrottledResizeHandler()}var b=0,c={},g=window.Waypoint,
f=window.onload;d.prototype.add=function(a){this.waypoints[a.options.horizontal?"horizontal":"vertical"][a.key]=a;this.refresh()};d.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical),d=this.element==this.element.window;a&&b&&!d&&(this.adapter.off(".waypoints"),delete c[this.key])};d.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize();b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",
function(){b.didResize||(b.didResize=!0,g.requestAnimationFrame(a))})};d.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll();b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){b.didScroll&&!g.isTouch||(b.didScroll=!0,g.requestAnimationFrame(a))})};d.prototype.handleResize=function(){g.Context.refreshAll()};d.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},
vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c;for(c in b){var d=b[c],e=d.newScroll>d.oldScroll?d.forward:d.backward,g;for(g in this.waypoints[c]){var f=this.waypoints[c][g];if(null!==f.triggerPoint){var h=d.oldScroll<f.triggerPoint,t=d.newScroll>=f.triggerPoint,u=!h&&!t;(h&&t||u)&&(f.queueTrigger(e),a[f.group.id]=f.group)}}}for(var w in a)a[w].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};d.prototype.innerHeight=
function(){return this.element==this.element.window?g.viewportHeight():this.adapter.innerHeight()};d.prototype.remove=function(a){delete this.waypoints[a.axis][a.key];this.checkEmpty()};d.prototype.innerWidth=function(){return this.element==this.element.window?g.viewportWidth():this.adapter.innerWidth()};d.prototype.destroy=function(){var a=[];for(c in this.waypoints)for(var b in this.waypoints[c])a.push(this.waypoints[c][b]);var c=0;for(b=a.length;b>c;c++)a[c].destroy()};d.prototype.refresh=function(){var a,
b=(a=this.element==this.element.window)?void 0:this.adapter.offset(),c={};this.handleScroll();a={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var d in a){b=a[d];for(var e in this.waypoints[d]){var f=
this.waypoints[d][e];var h=f.options.offset;var r=f.triggerPoint;var t=0;var u=null==r;f.element!==f.element.window&&(t=f.adapter.offset()[b.offsetProp]);"function"==typeof h?h=h.apply(f):"string"==typeof h&&(h=parseFloat(h),-1<f.options.offset.indexOf("%")&&(h=Math.ceil(b.contextDimension*h/100)));f.triggerPoint=Math.floor(t+(b.contextScroll-b.contextOffset)-h);r=r<b.oldScroll;t=f.triggerPoint>=b.oldScroll;h=r&&t;r=!r&&!t;!u&&h?(f.queueTrigger(b.backward),c[f.group.id]=f.group):!u&&r?(f.queueTrigger(b.forward),
c[f.group.id]=f.group):u&&b.oldScroll>=f.triggerPoint&&(f.queueTrigger(b.forward),c[f.group.id]=f.group)}}return g.requestAnimationFrame(function(){for(var a in c)c[a].flushTriggers()}),this};d.findOrCreateByElement=function(a){return d.findByElement(a)||new d(a)};d.refreshAll=function(){for(var a in c)c[a].refresh()};d.findByElement=function(a){return c[a.waypointContextKey]};window.onload=function(){f&&f();d.refreshAll()};g.requestAnimationFrame=function(b){(window.requestAnimationFrame||window.mozRequestAnimationFrame||
window.webkitRequestAnimationFrame||a).call(window,b)};g.Context=d})();(function(){function a(a,b){return a.triggerPoint-b.triggerPoint}function d(a,b){return b.triggerPoint-a.triggerPoint}function b(a){this.name=a.name;this.axis=a.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();c[this.axis][this.name]=this}var c={vertical:{},horizontal:{}},g=window.Waypoint;b.prototype.add=function(a){this.waypoints.push(a)};b.prototype.clearTriggerQueues=function(){this.triggerQueues=
{up:[],down:[],left:[],right:[]}};b.prototype.flushTriggers=function(){for(var b in this.triggerQueues){var c=this.triggerQueues[b];c.sort("up"===b||"left"===b?d:a);for(var e=0,g=c.length;g>e;e+=1){var f=c[e];(f.options.continuous||e===c.length-1)&&f.trigger([b])}}this.clearTriggerQueues()};b.prototype.next=function(b){this.waypoints.sort(a);b=g.Adapter.inArray(b,this.waypoints);return b===this.waypoints.length-1?null:this.waypoints[b+1]};b.prototype.previous=function(b){this.waypoints.sort(a);return(b=
g.Adapter.inArray(b,this.waypoints))?this.waypoints[b-1]:null};b.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)};b.prototype.remove=function(a){a=g.Adapter.inArray(a,this.waypoints);-1<a&&this.waypoints.splice(a,1)};b.prototype.first=function(){return this.waypoints[0]};b.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};b.findOrCreate=function(a){return c[a.axis][a.name]||new b(a)};g.Group=b})();(function(){function a(a){return a===a.window}function d(b){return a(b)?
b:b.defaultView}function b(a){this.element=a;this.handlers={}}var c=window.Waypoint;b.prototype.innerHeight=function(){return a(this.element)?this.element.innerHeight:this.element.clientHeight};b.prototype.innerWidth=function(){return a(this.element)?this.element.innerWidth:this.element.clientWidth};b.prototype.off=function(a,b){function c(a,b,c){for(var d=0,e=b.length-1;e>d;d++){var g=b[d];c&&c!==g||a.removeEventListener(g)}}var d=a.split(".");a=d[0];d=d[1];var e=this.element;if(d&&this.handlers[d]&&
a)c(e,this.handlers[d][a],b),this.handlers[d][a]=[];else if(a)for(var g in this.handlers)c(e,this.handlers[g][a]||[],b),this.handlers[g][a]=[];else if(d&&this.handlers[d]){for(var f in this.handlers[d])c(e,this.handlers[d][f],b);this.handlers[d]={}}};b.prototype.offset=function(){if(!this.element.ownerDocument)return null;var a=this.element.ownerDocument.documentElement,b=d(this.element.ownerDocument),c={top:0,left:0};return this.element.getBoundingClientRect&&(c=this.element.getBoundingClientRect()),
{top:c.top+b.pageYOffset-a.clientTop,left:c.left+b.pageXOffset-a.clientLeft}};b.prototype.on=function(a,b){var c=a.split(".");a=c[0];c=c[1]||"__default";c=this.handlers[c]=this.handlers[c]||{};(c[a]=c[a]||[]).push(b);this.element.addEventListener(a,b)};b.prototype.outerHeight=function(b){var c,d=this.innerHeight();return b&&!a(this.element)&&(c=window.getComputedStyle(this.element),d+=parseInt(c.marginTop,10),d+=parseInt(c.marginBottom,10)),d};b.prototype.outerWidth=function(b){var c,d=this.innerWidth();
return b&&!a(this.element)&&(c=window.getComputedStyle(this.element),d+=parseInt(c.marginLeft,10),d+=parseInt(c.marginRight,10)),d};b.prototype.scrollLeft=function(){var a=d(this.element);return a?a.pageXOffset:this.element.scrollLeft};b.prototype.scrollTop=function(){var a=d(this.element);return a?a.pageYOffset:this.element.scrollTop};b.extend=function(){for(var a=Array.prototype.slice.call(arguments),b=1,c=a.length;c>b;b++){var d=void 0,e=a[0],f=a[b];if("object"==typeof e&&"object"==typeof f)for(d in f)f.hasOwnProperty(d)&&
(e[d]=f[d])}return a[0]};b.inArray=function(a,b,c){return null==b?-1:b.indexOf(a,c)};b.isEmptyObject=function(a){for(var b in a)return!1;return!0};c.adapters.push({name:"noframework",Adapter:b});c.Adapter=b})();(function(){function a(c){if(!c)throw Error("No options passed to Waypoint constructor");if(!c.element)throw Error("No element option passed to Waypoint constructor");if(!c.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+d;this.options=a.Adapter.extend({},
a.defaults,c);this.element=this.options.element;this.adapter=new a.Adapter(this.element);this.callback=c.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;this.triggerPoint=null;this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=a.Context.findOrCreateByElement(this.options.context);a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]);this.group.add(this);this.context.add(this);
b[this.key]=this;d+=1}var d=0,b={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)};a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)};a.prototype.destroy=function(){this.context.remove(this);this.group.remove(this);delete b[this.key]};a.prototype.disable=function(){this.enabled=!1;return this};a.prototype.enable=function(){this.context.refresh();this.enabled=!0;return this};a.prototype.next=function(){return this.group.next(this)};a.prototype.previous=
function(){return this.group.previous(this)};a.invokeAll=function(a){var c=[];for(d in b)c.push(b[d]);var d=0;for(var e=c.length;d<e;d++)c[d][a]()};a.destroyAll=function(){a.invokeAll("destroy")};a.disableAll=function(){a.invokeAll("disable")};a.enableAll=function(){a.Context.refreshAll();for(var c in b)b[c].enabled=!0;return this};a.refreshAll=function(){a.Context.refreshAll()};a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};a.viewportWidth=function(){return document.documentElement.clientWidth};
a.adapters=[];a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0};a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=a})();(function(){function a(a){window.setTimeout(a,1E3/60)}function d(a){this.element=a;this.Adapter=g.Adapter;this.adapter=new this.Adapter(a);this.key="waypoint-context-"+b;this.didResize=
this.didScroll=!1;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};a.waypointContextKey=this.key;c[a.waypointContextKey]=this;b+=1;g.windowContext||(g.windowContext=!0,g.windowContext=new d(window));this.createThrottledScrollHandler();this.createThrottledResizeHandler()}var b=0,c={},g=window.Waypoint,f=window.onload;d.prototype.add=function(a){this.waypoints[a.options.horizontal?"horizontal":"vertical"][a.key]=a;this.refresh()};d.prototype.checkEmpty=
function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical),d=this.element==this.element.window;a&&b&&!d&&(this.adapter.off(".waypoints"),delete c[this.key])};d.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize();b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=!0,g.requestAnimationFrame(a))})};d.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll();
b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){if(!b.didScroll||g.isTouch)b.didScroll=!0,g.requestAnimationFrame(a)})};d.prototype.handleResize=function(){g.Context.refreshAll()};d.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c;for(c in b){var d=b[c],e=d.newScroll>
d.oldScroll?d.forward:d.backward,f;for(f in this.waypoints[c]){var g=this.waypoints[c][f];if(null!==g.triggerPoint){var h=d.oldScroll<g.triggerPoint,t=d.newScroll>=g.triggerPoint,u=!h&&!t;if(h&&t||u)g.queueTrigger(e),a[g.group.id]=g.group}}}for(var w in a)a[w].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};d.prototype.innerHeight=function(){return this.element==this.element.window?g.viewportHeight():this.adapter.innerHeight()};d.prototype.remove=function(a){delete this.waypoints[a.axis][a.key];
this.checkEmpty()};d.prototype.innerWidth=function(){return this.element==this.element.window?g.viewportWidth():this.adapter.innerWidth()};d.prototype.destroy=function(){var a=[];for(c in this.waypoints)for(var b in this.waypoints[c])a.push(this.waypoints[c][b]);var c=0;for(b=a.length;c<b;c++)a[c].destroy()};d.prototype.refresh=function(){var a=this.element==this.element.window,b=a?void 0:this.adapter.offset(),c={};this.handleScroll();a={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,
contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var d in a){b=a[d];for(var e in this.waypoints[d]){var f=this.waypoints[d][e],h=f.options.offset,r=f.triggerPoint,t=0,u=null==r;f.element!==f.element.window&&(t=f.adapter.offset()[b.offsetProp]);"function"===
typeof h?h=h.apply(f):"string"===typeof h&&(h=parseFloat(h),-1<f.options.offset.indexOf("%")&&(h=Math.ceil(b.contextDimension*h/100)));f.triggerPoint=Math.floor(t+(b.contextScroll-b.contextOffset)-h);r=r<b.oldScroll;t=f.triggerPoint>=b.oldScroll;h=r&&t;r=!r&&!t;!u&&h?(f.queueTrigger(b.backward),c[f.group.id]=f.group):!u&&r?(f.queueTrigger(b.forward),c[f.group.id]=f.group):u&&b.oldScroll>=f.triggerPoint&&(f.queueTrigger(b.forward),c[f.group.id]=f.group)}}g.requestAnimationFrame(function(){for(var a in c)c[a].flushTriggers()});
return this};d.findOrCreateByElement=function(a){return d.findByElement(a)||new d(a)};d.refreshAll=function(){for(var a in c)c[a].refresh()};d.findByElement=function(a){return c[a.waypointContextKey]};window.onload=function(){f&&f();d.refreshAll()};g.requestAnimationFrame=function(b){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||a).call(window,b)};g.Context=d})();(function(){function a(a,b){return a.triggerPoint-b.triggerPoint}function d(a,b){return b.triggerPoint-
a.triggerPoint}function b(a){this.name=a.name;this.axis=a.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();c[this.axis][this.name]=this}var c={vertical:{},horizontal:{}},f=window.Waypoint;b.prototype.add=function(a){this.waypoints.push(a)};b.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};b.prototype.flushTriggers=function(){for(var b in this.triggerQueues){var c=this.triggerQueues[b];c.sort("up"===b||"left"===b?d:a);for(var e=
0,f=c.length;e<f;e+=1){var g=c[e];(g.options.continuous||e===c.length-1)&&g.trigger([b])}}this.clearTriggerQueues()};b.prototype.next=function(b){this.waypoints.sort(a);b=f.Adapter.inArray(b,this.waypoints);return b===this.waypoints.length-1?null:this.waypoints[b+1]};b.prototype.previous=function(b){this.waypoints.sort(a);return(b=f.Adapter.inArray(b,this.waypoints))?this.waypoints[b-1]:null};b.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)};b.prototype.remove=function(a){a=f.Adapter.inArray(a,
this.waypoints);-1<a&&this.waypoints.splice(a,1)};b.prototype.first=function(){return this.waypoints[0]};b.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};b.findOrCreate=function(a){return c[a.axis][a.name]||new b(a)};f.Group=b})();(function(){function a(a){this.$element=d(a)}var d=window.jQuery,b=window.Waypoint;d.each("innerHeight innerWidth off offset on outerHeight outerWidth scrollLeft scrollTop".split(" "),function(b,d){a.prototype[d]=function(){var a=Array.prototype.slice.call(arguments);
return this.$element[d].apply(this.$element,a)}});d.each(["extend","inArray","isEmptyObject"],function(b,e){a[e]=d[e]});b.adapters.push({name:"jquery",Adapter:a});b.Adapter=a})();(function(){function a(a){return function(b,e){var c=[],f=b;a.isFunction(b)&&(f=a.extend({},e),f.handler=b);this.each(function(){var b=a.extend({},f,{element:this});"string"===typeof b.context&&(b.context=a(this).closest(b.context)[0]);c.push(new d(b))});return c}}var d=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=
a(window.jQuery));window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))})();(function(){function a(){}function d(a){this.options=b.Adapter.extend({},d.defaults,a);this.axis=this.options.horizontal?"horizontal":"vertical";this.waypoints=[];this.element=this.options.element;this.createWaypoints()}var b=window.Waypoint;d.prototype.createWaypoints=function(){for(var a={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},
{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},b=0,d=a[this.axis].length;b<d;b++)this.createWaypoint(a[this.axis][b])};d.prototype.createWaypoint=function(a){var c=this;this.waypoints.push(new b({context:this.options.context,element:this.options.element,
enabled:this.options.enabled,handler:function(a){return function(b){c.options[a[b]].call(c,b)}}(a),offset:a.offset,horizontal:this.options.horizontal}))};d.prototype.destroy=function(){for(var a=0,b=this.waypoints.length;a<b;a++)this.waypoints[a].destroy();this.waypoints=[]};d.prototype.disable=function(){for(var a=0,b=this.waypoints.length;a<b;a++)this.waypoints[a].disable()};d.prototype.enable=function(){for(var a=0,b=this.waypoints.length;a<b;a++)this.waypoints[a].enable()};d.defaults={context:window,
enabled:!0,enter:a,entered:a,exit:a,exited:a};b.Inview=d})();var f=function(){function e(a){this.current=null;a&&(this.elements={el:a,items:a.querySelector(".scrolling-slideshow__items"),anchors:a.querySelectorAll(".scrolling-slideshow__item-anchor"),labelsElement:a.querySelector(".scrolling-slideshow__labels"),labels:a.querySelectorAll(".scrolling-slideshow__labels-element"),toggles:a.querySelectorAll(".image-caption__toggle"),staticContainerImages:a.querySelectorAll(".scrolling-slideshow__static-item-image-inside-container img")},
this.scrollWorking=!1,"EDIT"===a.getAttribute("data-mode")?a.style["max-height"]="580px":(this.attachEvents(),this.calculateMobileMenu(),this.checkImages(),this.showFirstMilestone()))}e.prototype.attachEvents=function(){var a=this,b=null;this.attachWayPoints();window.addEventListener("resize",function(){b||(b=setTimeout(function(){a.onWindowResize();b=null},150))});this.elements.toggles.forEach(function(a){a.addEventListener("click",function(b){b.preventDefault();a.parentNode.classList.toggle("toggle-open")})});
this.elements.labels.forEach(function(b){b.addEventListener("click",function(c){c.preventDefault();a.clickOnAnchor(b.getAttribute("data-item"))})})};e.prototype.attachWayPoints=function(){var d=a(this.elements.el),b=this;new Waypoint.Inview({element:this.elements.el,entered:function(a){"down"===a?(d.removeClass("fixed"),d.addClass("bottom")):"up"===a&&(d.removeClass("fixed"),d.removeClass("bottom"))},exit:function(a){"down"!==a&&"up"!==a||d.addClass("fixed")}});a(this.elements.anchors).waypoint(function(c){c=
"down"===c?a(this.element):a(this.element).prev().prev();var d=c.attr("data-index");"last"===d||b.scrollWorking||b.activateMilestone(c,d)},{offset:1024>a(window).width()?"0":"50%"})};e.prototype.clickOnAnchor=function(d){var b=this;if(d&&(d=this.elements.el.querySelector('.scrolling-slideshow__item-anchor[data-anchor\x3d"'+d+'"]'))){this.scrollWorking=!0;var c=a(d).offset().top-(1024<=a(window).width()?100:-50);a([document.documentElement,document.body]).animate({scrollTop:0>c?0:c},1500,function(){b.scrollWorking=
!1});this.activateMilestone(a(d))}};e.prototype.onWindowResize=function(){this.calculateMobileMenu()};e.prototype.activateMilestone=function(a,b){void 0===b&&(b="0");var c=a.attr("data-anchor");this.setImage(c,b);this.setOpacityText(a);this.activateLabel(c)};e.prototype.showFirstMilestone=function(){a(".scrolling-slideshow__item",this.elements.el).first().addClass("first");this.activateMilestone(a(".scrolling-slideshow__item-anchor",this.elements.el).first())};e.prototype.activateLabel=function(a){a=
this.elements.el.querySelector('.scrolling-slideshow__labels-element[data-item\x3d"'+a+'"]');var b=this.elements.el.querySelector(".scrolling-slideshow__labels-element--active");a&&(b&&b.classList.remove("scrolling-slideshow__labels-element--active"),a.classList.add("scrolling-slideshow__labels-element--active"))};e.prototype.setOpacityText=function(d){a(".no-opacity",this.elements.el).removeClass("no-opacity");a(d).next().addClass("no-opacity")};e.prototype.calculateMobileMenu=function(){var d=a(this.elements.labelsElement),
b=d.width();if(this.elements.labels){var c=Array.from(this.elements.labels).reduce(function(b,c){return b+a(c).outerWidth(!0)},0);b=b>c?"center":"";a(".scrolling-slideshow__labels-content",d).css("justify-content",b)}};e.prototype.checkImages=function(){var a=this.elements.staticContainerImages;a&&Array.from(a).forEach(function(a){a.naturalWidth>a.naturalHeight&&a.parentNode.parentNode.classList.add("scrolling-slideshow__static-item-image-inside-container--horizontal")})};e.prototype.setImage=function(d,
b){d=this.getStaticImage(d,b);b=this.elements.el;d&&0<d.length&&!d.hasClass("scrolling-slideshow__static-item-image-container--open")&&(a(".scrolling-slideshow__static-item-image-container--open",b).removeClass("scrolling-slideshow__static-item-image-container--open"),d.addClass("scrolling-slideshow__static-item-image-container--open"))};e.prototype.getStaticImage=function(d,b){return a('.scrolling-slideshow__static-item-image-container[data-index\x3d"'+b+'"][data-item-index\x3d"'+d+'"]',this.elements.el)};
return e}();return new (function(){function a(){this.initialize()}a.prototype.initialize=function(){var a=document.querySelectorAll(".scrolling-slideshow-container");a&&Array.from(a).forEach(function(a){return new f(a)})};return a}())}($);this.TNC=this.TNC||{};
this.TNC.Globe=function(a,f){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;return new (function(){function e(){this.tabs=a(".c-globe__tab");this.modalPrev=a(".c-globe__modal-prev");this.modalNext=a(".c-globe__modal-next");this.modal=a(".c-globe__modal");this.modalClose=a(".c-globe__modal-close");this.listItems=a(".c-globe__item");this.list=a(".c-globe__list");this.container=a(".c-globe__container");this.earthView=a(".c-globe__earth");this.initialize()}
e.prototype.initialize=function(){var d=this,b=this.checkTouchDevice(),c=document.querySelector(".c-globe__modal-wrapper");0!==a("#earth_div").length&&this.initGlobe();c&&(this.flkty=new f(c,{pageDots:!1,draggable:b,prevNextButtons:!1,cellAlign:"left",contain:!0}));this.tabs.on("click",function(a){return d.switchTabs(a)});this.listItems.on("click",function(b){var c=b.target.getAttribute("data-index");a("[data-index\x3d"+d.flkty.selectedIndex+"]").removeClass("active");a("[data-index\x3d"+d.flkty.selectedIndex+
"]").removeClass("open");d.flkty.select(c,!0,!0);a(b.target).addClass("active");a(b.target).addClass("open");d.openModal()});this.list.on("mouseover",function(a){return d.addItemListLayout(a)});this.modalClose.on("click",function(b){b.preventDefault();d.modal.removeClass("c-globe__modal-is-open");a("html, body").removeClass("globe-modal-open");d.earth.setCenter([20,d.earth.getCenter()[1]]);d.earth.setZoom(2.8);a(".we-pm-icon.active").removeClass("active");d.resetLayoutOverlay();d.listItems.removeClass("open");
d.listItems.addClass("active");b=d.container.offset().top;a(window).scrollTop(b);requestAnimationFrame(d.hackMouse);d.zoomMarker=!1;d.listItems.on("mouseleave",function(a){return d.removeItemListLayout(a)})});this.modalPrev.on("click",function(){d.removeActiveMarker();d.earthView.hasClass("active")?0>=d.activeMarkerIndex?d.activeMarkerIndex=d.markersInfo.length-1:d.activeMarkerIndex--:d.flkty.previous(!0);d.addActiveMarker()});this.modalNext.on("click",function(){d.removeActiveMarker();d.earthView.hasClass("active")?
d.activeMarkerIndex+1===d.markersInfo.length?d.activeMarkerIndex=0:d.activeMarkerIndex++:d.flkty.next(!0);d.addActiveMarker()})};e.prototype.addItemListLayout=function(d){var b=this;d.target.classList.contains("c-globe__item")&&(this.resetLayoutOverlay(),this.listItems.addClass("inactive"),a(d.target).removeClass("inactive"),a(d.target).addClass("active"),this.listItems.on("mouseleave",function(a){return b.removeItemListLayout(a)}))};e.prototype.removeItemListLayout=function(d){0===a(".c-globe__item.open").length&&
(this.resetLayoutOverlay(),a(d.target).removeClass("active"))};e.prototype.resetLayoutOverlay=function(){this.listItems.removeClass("inactive");this.listItems.removeClass("active")};e.prototype.openModal=function(){this.modal.addClass("c-globe__modal-is-open");a("html, body").addClass("globe-modal-open");var d=this.container.offset().top;a(window).scrollTop(d)};e.prototype.removeActiveMarker=function(){a(".c-globe__item[data-index\x3d"+this.flkty.selectedIndex+"]").removeClass("active");this.markersIcon[this.flkty.selectedIndex].element.children[0].classList.remove("active")};
e.prototype.addActiveMarker=function(){var d=this;if(this.earthView.hasClass("active")){this.flkty.select(this.markersInfo[this.activeMarkerIndex].index,!0,!0);var b=a("[data-index\x3d"+this.flkty.selectedIndex+"]");this.markersIcon[this.flkty.selectedIndex].element.children[0].classList.add("active");requestAnimationFrame(function(){return d.zoomToMarker(b.data().latitude,b.data().longitude)})}else{var c=a(".c-globe__item[data-index\x3d"+this.flkty.selectedIndex+"]");this.listItems.removeClass("open");
this.listItems.addClass("inactive");c.addClass("active");c.addClass("open");this.list.animate({scrollTop:c.position().top-a(".c-globe__list ul").offset().top+this.container.offset().top},200)}};e.prototype.switchTabs=function(d){d=a(d.target);if(d.hasClass("c-globe__tab-item")&&!d.hasClass("active")){d.addClass("active");var b=d.data().tab;a("[data-tab]").removeClass("active");a("[data-tab\x3d"+b+"]").addClass("active");d.siblings().removeClass("active")}};e.prototype.checkTouchDevice=function(){return"ontouchstart"in
window||"onmsgesturechange"in window};e.prototype.orderMarkers=function(a){var b=this;this.activeMarkerIndex=0;this.selectedLat=a.data().latitude;this.selectedLong=a.data().longitude;this.markersInfo.sort(function(a,d){return b.calculateDistance(a)-b.calculateDistance(d)})};e.prototype.calculateDistance=function(a){return(a.latitude-this.selectedLat)*(a.latitude-this.selectedLat)+(a.longitude-this.selectedLong)*(a.longitude-this.selectedLong)};e.prototype.initGlobe=function(){var d=this;this.earth=
new WE.map("earth_div",{atmosphere:!1,center:[0,0],unconstrainedRotation:!1,dragging:!1,tilting:!1,zoom:2.8});WE.tileLayer("/etc/designs/clientlibs/tnc/assets/images/globe_map_large/{z}/tile_{x}_{y}.jpg",{minZoom:0,maxZoom:5}).addTo(this.earth);this.zoomMarker=!1;this.markersIcon=[];this.markersInfo=[];a(".c-globe__marker").each(function(b,c){var e=WE.marker([a(c).data().latitude,a(c).data().longitude],a(c).data().image,50,50).addTo(d.earth);d.earth.setCenter([20,a(c).data().longitude]);d.markersIcon.push(e);
d.markersInfo.push({index:b,latitude:a(c).data().latitude,longitude:a(c).data().longitude});d.zoomToMarker=function(a,b){d.earth.setCenter([a,b]);d.earth.setZoom(3.7)};e.element.addEventListener("mousedown",function(e){d.flkty.select(b,!0,!0);d.orderMarkers(a(c));a(".we-pm-icon.active").removeClass("active");a(e.target).addClass("active");requestAnimationFrame(function(){return d.zoomToMarker(a(c).data().latitude,a(c).data().longitude)});d.openModal();d.earthDiv.style.cursor="default";d.zoomMarker=
!0})});var b=0,c=0,e=0,f=function(a){var b=a.clientX;a.touches&&(b=a.touches[0].clientX);return b},k=function(a){e=b-f(a)},m=function(a){d.earthDiv.addEventListener("mousemove",k);d.earthDiv.addEventListener("mouseup",l);d.earthDiv.addEventListener("touchmove",k);d.earthDiv.addEventListener("touchend",l);d.zoomMarker||(d.earthDiv.style.cursor="grabbing");c=d.earth.getCenter()[1];b=f(a);e=0},l=function(){d.earthDiv.removeEventListener("mousemove",k);d.earthDiv.removeEventListener("mouseup",l);d.earthDiv.removeEventListener("touchmove",
k);d.earthDiv.removeEventListener("touchstart",l);d.zoomMarker||(d.earthDiv.style.cursor="grab")};document.getElementById("earth_div").getElementsByTagName("canvas")[0].style.pointerEvents="none";this.earthDiv=document.getElementById("earth_div");this.earthDiv.addEventListener("mousedown",m);this.earthDiv.addEventListener("touchstart",m);this.hackMouse=function(){d.earth.setCenter([20,c+.5*e]);d.zoomMarker||requestAnimationFrame(d.hackMouse)};c=a(".c-globe__marker").data().longitude;requestAnimationFrame(this.hackMouse)};
return e}())}($,Flickity);this.TNC=this.TNC||{};
(function(a,f,e){a=a&&a.hasOwnProperty("default")?a["default"]:a;f=f&&f.hasOwnProperty("default")?f["default"]:f;e=e&&e.hasOwnProperty("default")?e["default"]:e;var d=function(){function b(b,d){window.localeInterstitialShown=!1;this.element=b;this.$element=a(b);this.settings=a.extend({},{siteLocale:"en_us",dismissedCookie:"localeRedirectDismissed",availableLocales:"en_au,en_ca,en_hk,en_in,en_us,es,es_mx,in,pt_br,zh_cn,zh_hk",defaultLocale:"",defaultCountryLocales:{au:"en_au",br:"pt_br",ca:"en_ca",
cn:"zh_cn",hk:"zh_hk",id:"in","in":"en_in",mx:"es_mx"},defaultLanguageLocales:{en:"en_us",es:"es"}},d,a(b).data(),!0);this.componentRootClassname="c-interstitial-modal";this.suggestedLocalization=this.siteLocalization=this.userLocalization=this.userCountryCode=this.userLanguage=this.browserLocale="";this.availableLocales=[];this.defaultLocale="";this.defaultCountryLocales={};this.defaultLanguageLocales={};this.$title=a();this.$message=a();this.$redirectCta=a();this.$dismissCta=a();this.$closeBtn=
a();this.events={show:new window.Event("show-localeInterstitial",{bubbles:!0}),hide:new window.Event("hide-localeInterstitial",{bubbles:!0})};this.i18nKeys={title:"",message:"",redirectUrl:"",redirectCta:"",dismissCta:""};this.translations={title:"",message:"",redirectUrl:"",redirectCta:"",dismissCta:""};this.translationService=window.Granite&&window.Granite.I18n?window.Granite.I18n:{get:function(a){return a},setLocale:function(a){console.log("setLocale("+a+")")}};this.init()}b.prototype.init=function(){var b=
this;try{if(this.wasDismissed())f.setCookie(this.settings.dismissedCookie,"true",365);else{e.checkBrowserLocale();this.siteLocalization=this.normalizeLocale(this.settings.siteLocale);"id"===this.siteLocalization&&(this.siteLocalization="in");this.availableLocales=this.settings.availableLocales.split(",");this.defaultCountryLocales=this.parseDefaultLocaleSetting(this.settings.defaultCountryLocales);this.defaultLanguageLocales=this.parseDefaultLocaleSetting(this.settings.defaultLanguageLocales);this.defaultLocale=
this.normalizeLocale(this.settings.defaultLocale);for(var d=0;d<this.availableLocales.length;d++)this.availableLocales[d]=this.normalizeLocale(this.availableLocales[d]);this.availableLocales=Array.from(new Set(this.availableLocales));this.normalizeDefaultLocaleObject(this.defaultCountryLocales);this.normalizeDefaultLocaleObject(this.defaultLanguageLocales);this.$title=this.$element.find("."+this.componentRootClassname+"__title");this.$message=this.$element.find("."+this.componentRootClassname+"__message");
this.$redirectCta=this.$element.find("."+this.componentRootClassname+"__redirect-cta");this.$dismissCta=this.$element.find("."+this.componentRootClassname+"__dismiss-cta");this.$closeBtn=this.$element.find("."+this.componentRootClassname+"__close-button");this.i18nKeys.title=a.trim(this.$title.text());this.i18nKeys.message=a.trim(this.$message.text());this.i18nKeys.redirectUrl=a.trim(this.$redirectCta.attr("href"));this.i18nKeys.redirectCta=a.trim(this.$redirectCta.text());this.i18nKeys.dismissCta=
a.trim(this.$dismissCta.text());this.getUserLocalization().then(function(){b.shouldShow()&&(b.bindEvents(),b.translationService.setLocale(b.suggestedLocalization),b.$element.addClass("c-modal").removeClass("hide"),b.updateContent(),b.show())})}}catch(h){console.log(h)}};b.prototype.bindEvents=function(){var b=this;a(document).on("click",function(c){if(a(c.target).is(b.$closeBtn)||a(c.target).is(b.$element)||a(c.target).is(b.$dismissCta))c.preventDefault(),b.dismiss()});this.$redirectCta.click(function(){e.setAnalyticsByPage({event_name:"lightbox_click",
lightbox_name:b.translations.title,link_name:b.translations.redirectCta},!0)})};b.prototype.show=function(){this.$element.addClass("is-visible");a("html, body").addClass("modal-open");window.localeInterstitialShown=!0;this.element.dispatchEvent(this.events.show);e.setAnalyticsByPage({event_name:"lightbox_impression",lightbox_name:this.translations.title},!0)};b.prototype.hide=function(){this.$element.removeClass("is-visible");a("html, body").removeClass("modal-open");window.localeInterstitialShown=
!1;this.element.dispatchEvent(this.events.hide)};b.prototype.dismiss=function(){f.setCookie(this.settings.dismissedCookie,"true",365);this.hide()};b.prototype.wasDismissed=function(){return f.getCookie(this.settings.dismissedCookie)};b.prototype.shouldShow=function(){if("EDIT"===this.settings.cqMode||a("body").hasClass("in-edit")||this.wasDismissed())return!1;if(this.userLocalization!==this.siteLocalization){for(var b=0;b<this.availableLocales.length;b++)if(this.userLocalization===a.trim(this.availableLocales[b]).toLowerCase()){this.suggestedLocalization=
this.userLocalization;break}this.suggestedLocalization||(this.suggestedLocalization=this.defaultCountryLocales[this.userCountryCode]);this.suggestedLocalization||(this.suggestedLocalization=this.defaultLanguageLocales[this.userLanguage]);this.suggestedLocalization||(this.suggestedLocalization=this.defaultLocale);if(this.suggestedLocalization&&this.suggestedLocalization!==this.siteLocalization)return!0}return!1};b.prototype.getUserLocalization=function(){var a=this;this.browserLocale=this.normalizeLocale(f.getCookie("browserLocale"));
switch(this.browserLocale.length){case 2:this.userLanguage=this.browserLocale;break;case 5:this.browserLocale.includes("_")&&(this.userLanguage=this.browserLocale.substring(0,2))}"id"===this.userLanguage&&(this.userLanguage="in");this.userLocalization=this.userLanguage;return e.checkGeolocation().then(function(b){a.userCountryCode=a.normalizeLocale(b.response["edge-two-letter-country"]);a.userLocalization=""+a.userLanguage+(a.userCountryCode?"_"+a.userCountryCode:"");"in_id"===a.userLocalization&&
(a.userLocalization="in")})["catch"](function(a){console.log(a)})};b.prototype.updateContent=function(){this.translations.title=this.translationService.get(this.i18nKeys.title)||this.i18nKeys.title;this.translations.message=this.translationService.get(this.i18nKeys.message)||this.i18nKeys.message;this.translations.redirectUrl=this.translationService.get(this.i18nKeys.redirectUrl)||this.i18nKeys.redirectUrl;this.translations.redirectCta=this.translationService.get(this.i18nKeys.redirectCta)||this.i18nKeys.redirectCta;
this.translations.dismissCta=this.translationService.get(this.i18nKeys.dismissCta)||this.i18nKeys.dismissCta;this.$title.text(this.translations.title);this.$message.text(this.translations.message);this.$redirectCta.attr("href",this.translations.redirectUrl);this.$redirectCta.text(this.translations.redirectCta);this.$dismissCta.text(this.translations.dismissCta)};b.prototype.normalizeLocale=function(b){return a.trim(b).toLowerCase().replace("-","_")};b.prototype.normalizeDefaultLocaleObject=function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=
this.normalizeLocale(b);a[c]=this.normalizeLocale(a[b]);b!==c&&delete a[b]}};b.prototype.parseDefaultLocaleSetting=function(a){var b={};switch(typeof a){case "string":b=JSON.parse(a);break;case "object":b=a}return b};return b}();a.fn.intersitialRedirectModal=function(a){return this.each(function(){return new d(this,a)})};a(document).ready(function(){a("body").hasClass("in-edit")||a(".c-interstitial-modal").intersitialRedirectModal()})})($,TNC.BrowserStorage,TNC.Utility);